"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[179],{138:(Tb,Ak,Mb)=>{var ed={};function Be(n){return"function"==typeof n}function Ab(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Mb.r(ed),Mb.d(ed,{FirebaseError:()=>ti,SDK_VERSION:()=>_s,_DEFAULT_ENTRY_NAME:()=>ms,_addComponent:()=>p_,_addOrOverwriteComponent:()=>m2,_apps:()=>gs,_clearComponents:()=>yoe,_components:()=>xh,_getProvider:()=>JE,_registerComponent:()=>Ao,_removeServiceInstance:()=>_oe,deleteApp:()=>_2,getApp:()=>g2,getApps:()=>woe,initializeApp:()=>m_,onLog:()=>y2,registerVersion:()=>ki,setLogLevel:()=>v2});const kb=Ab(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function zp(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class sn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Be(i))try{i()}catch(o){e=o instanceof kb?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{Nk(o)}catch(s){e=e??[],s instanceof kb?e=[...e,...s.errors]:e.push(s)}}if(e)throw new kb(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Nk(e);else{if(e instanceof sn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&zp(t,e)}remove(e){const{_finalizers:t}=this;t&&zp(t,e),e instanceof sn&&e._removeParent(this)}}sn.EMPTY=(()=>{const n=new sn;return n.closed=!0,n})();const kk=sn.EMPTY;function Rk(n){return n instanceof sn||n&&"closed"in n&&Be(n.remove)&&Be(n.add)&&Be(n.unsubscribe)}function Nk(n){Be(n)?n():n.unsubscribe()}const oa={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},$p={setTimeout(n,e,...t){const{delegate:i}=$p;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=$p;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ok(n){$p.setTimeout(()=>{const{onUnhandledError:e}=oa;if(!e)throw n;e(n)})}function Rb(){}const HG=Nb("C",void 0,void 0);function Nb(n,e,t){return{kind:n,value:e,error:t}}let sa=null;function qp(n){if(oa.useDeprecatedSynchronousErrorHandling){const e=!sa;if(e&&(sa={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=sa;if(sa=null,t)throw i}}else n()}class Ob extends sn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Rk(e)&&e.add(this)):this.destination=YG}static create(e,t,i){return new td(e,t,i)}next(e){this.isStopped?Fb(function $G(n){return Nb("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Fb(function zG(n){return Nb("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Fb(HG,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const WG=Function.prototype.bind;function Pb(n,e){return WG.call(n,e)}class GG{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Wp(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Wp(i)}else Wp(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Wp(t)}}}class td extends Ob{constructor(e,t,i){let r;if(super(),Be(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&oa.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Pb(e.next,o),error:e.error&&Pb(e.error,o),complete:e.complete&&Pb(e.complete,o)}):r=e}this.destination=new GG(r)}}function Wp(n){oa.useDeprecatedSynchronousErrorHandling?function qG(n){oa.useDeprecatedSynchronousErrorHandling&&sa&&(sa.errorThrown=!0,sa.error=n)}(n):Ok(n)}function Fb(n,e){const{onStoppedNotification:t}=oa;t&&$p.setTimeout(()=>t(n,e))}const YG={closed:!0,next:Rb,error:function KG(n){throw n},complete:Rb},Lb="function"==typeof Symbol&&Symbol.observable||"@@observable";function aa(n){return n}function Pk(n){return 0===n.length?aa:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let Je=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const o=function ZG(n){return n&&n instanceof Ob||function XG(n){return n&&Be(n.next)&&Be(n.error)&&Be(n.complete)}(n)&&Rk(n)}(t)?t:new td(t,i,r);return qp(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Fk(i))((r,o)=>{const s=new td({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Lb](){return this}pipe(...t){return Pk(t)(this)}toPromise(t){return new(t=Fk(t))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function Fk(n){var e;return null!==(e=n??oa.Promise)&&void 0!==e?e:Promise}const JG=Ab(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Qe=(()=>{class n extends Je{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new Lk(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new JG}next(t){qp(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){qp(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){qp(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:o}=this;return i||r?kk:(this.currentObservers=null,o.push(t),new sn(()=>{this.currentObservers=null,zp(o,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){const t=new Je;return t.source=this,t}}return n.create=(e,t)=>new Lk(e,t),n})();class Lk extends Qe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:kk}}function Vk(n){return Be(n?.lift)}function Pt(n){return e=>{if(Vk(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ct(n,e,t,i,r){return new e5(n,e,t,i,r)}class e5 extends Ob{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function oe(n,e){return Pt((t,i)=>{let r=0;t.subscribe(Ct(i,o=>{i.next(n.call(e,o,r++))}))})}function Bb(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]])}return t}function la(n){return this instanceof la?(this.v=n,this):new la(n)}function o5(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function jk(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){!function r(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}(a,l,(s=n[o](s)).done,s.value)})}}}const Ub=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Hk(n){return Be(n?.then)}function zk(n){return Be(n[Lb])}function $k(n){return Symbol.asyncIterator&&Be(n?.[Symbol.asyncIterator])}function qk(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Wk=function a5(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Gk(n){return Be(n?.[Wk])}function Kk(n){return function r5(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(h){i[h]&&(r[h]=function(f){return new Promise(function(p,g){o.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof la?Promise.resolve(h.value.v).then(c,u):d(o[0][2],h)}(i[h](f))}catch(p){d(o[0][3],p)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield la(t.read());if(r)return yield la(void 0);yield yield la(i)}}finally{t.releaseLock()}})}function Yk(n){return Be(n?.getReader)}function Wn(n){if(n instanceof Je)return n;if(null!=n){if(zk(n))return function l5(n){return new Je(e=>{const t=n[Lb]();if(Be(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Ub(n))return function c5(n){return new Je(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Hk(n))return function u5(n){return new Je(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ok)})}(n);if($k(n))return Qk(n);if(Gk(n))return function d5(n){return new Je(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Yk(n))return function h5(n){return Qk(Kk(n))}(n)}throw qk(n)}function Qk(n){return new Je(e=>{(function f5(n,e){var t,i,r,o;return function t5(n,e,t,i){return new(t||(t=Promise))(function(o,s){function a(u){try{c(i.next(u))}catch(d){s(d)}}function l(u){try{c(i.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):function r(o){return o instanceof t?o:new t(function(s){s(o)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=o5(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function lo(n,e,t,i=0,r=!1){const o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function an(n,e,t=1/0){return Be(e)?an((i,r)=>oe((o,s)=>e(i,o,r,s))(Wn(n(i,r))),t):("number"==typeof e&&(t=e),Pt((i,r)=>function p5(n,e,t,i,r,o,s,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=g=>c<i?p(g):l.push(g),p=g=>{o&&e.next(g),c++;let _=!1;Wn(t(g,u++)).subscribe(Ct(e,v=>{r?.(v),o?f(v):e.next(v)},()=>{_=!0},void 0,()=>{if(_)try{for(c--;l.length&&c<i;){const v=l.shift();s?lo(e,s,()=>p(v)):p(v)}h()}catch(v){e.error(v)}}))};return n.subscribe(Ct(e,f,()=>{d=!0,h()})),()=>{a?.()}}(i,r,n,t)))}function Pl(n=1/0){return an(aa,n)}const lr=new Je(n=>n.complete());function Xk(n){return n&&Be(n.schedule)}function jb(n){return n[n.length-1]}function Zk(n){return Be(jb(n))?n.pop():void 0}function nd(n){return Xk(jb(n))?n.pop():void 0}function Jk(n,e=0){return Pt((t,i)=>{t.subscribe(Ct(i,r=>lo(i,n,()=>i.next(r),e),()=>lo(i,n,()=>i.complete(),e),r=>lo(i,n,()=>i.error(r),e)))})}function eR(n,e=0){return Pt((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function tR(n,e){if(!n)throw new Error("Iterable cannot be null");return new Je(t=>{lo(t,e,()=>{const i=n[Symbol.asyncIterator]();lo(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Ft(n,e){return e?function C5(n,e){if(null!=n){if(zk(n))return function _5(n,e){return Wn(n).pipe(eR(e),Jk(e))}(n,e);if(Ub(n))return function v5(n,e){return new Je(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(Hk(n))return function y5(n,e){return Wn(n).pipe(eR(e),Jk(e))}(n,e);if($k(n))return tR(n,e);if(Gk(n))return function b5(n,e){return new Je(t=>{let i;return lo(t,e,()=>{i=n[Wk](),lo(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void t.error(s)}o?t.complete():t.next(r)},0,!0)}),()=>Be(i?.return)&&i.return()})}(n,e);if(Yk(n))return function w5(n,e){return tR(Kk(n),e)}(n,e)}throw qk(n)}(n,e):Wn(n)}function Hb(...n){const e=nd(n),t=function g5(n,e){return"number"==typeof jb(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Wn(i[0]):Pl(t)(Ft(i,e)):lr}function nR(n={}){const{connector:e=(()=>new Qe),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=l=void 0,u=d=!1},p=()=>{const g=s;f(),g?.unsubscribe()};return Pt((g,_)=>{c++,!d&&!u&&h();const v=l=l??e();_.add(()=>{c--,0===c&&!d&&!u&&(a=zb(p,r))}),v.subscribe(_),!s&&c>0&&(s=new td({next:E=>v.next(E),error:E=>{d=!0,h(),a=zb(f,t,E),v.error(E)},complete:()=>{u=!0,h(),a=zb(f,i),v.complete()}}),Wn(g).subscribe(s))})(o)}}function zb(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new td({next:()=>{i.unsubscribe(),n()}});return Wn(e(...t)).subscribe(i)}function nt(n){for(let e in n)if(n[e]===nt)return e;throw Error("Could not find renamed property on target object.")}function $b(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function rt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(rt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function qb(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const E5=nt({__forward_ref__:nt});function ot(n){return n.__forward_ref__=ot,n.toString=function(){return rt(this())},n}function J(n){return Wb(n)?n():n}function Wb(n){return"function"==typeof n&&n.hasOwnProperty(E5)&&n.__forward_ref__===ot}function Gb(n){return n&&!!n.\u0275providers}const Gp="https://g.co/ng/security#xss";class x extends Error{constructor(e,t){super(Kp(e,t)),this.code=e}}function Kp(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}function le(n){return"string"==typeof n?n:null==n?"":String(n)}function Yp(n,e){throw new x(-201,!1)}function zi(n,e){null==n&&function Ge(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function P(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Pe(n){return{providers:n.providers||[],imports:n.imports||[]}}function Qp(n){return iR(n,Xp)||iR(n,oR)}function iR(n,e){return n.hasOwnProperty(e)?n[e]:null}function rR(n){return n&&(n.hasOwnProperty(Kb)||n.hasOwnProperty(R5))?n[Kb]:null}const Xp=nt({\u0275prov:nt}),Kb=nt({\u0275inj:nt}),oR=nt({ngInjectableDef:nt}),R5=nt({ngInjectorDef:nt});var ee=(()=>((ee=ee||{})[ee.Default=0]="Default",ee[ee.Host=1]="Host",ee[ee.Self=2]="Self",ee[ee.SkipSelf=4]="SkipSelf",ee[ee.Optional=8]="Optional",ee))();let Yb;function $i(n){const e=Yb;return Yb=n,e}function sR(n,e,t){const i=Qp(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&ee.Optional?null:void 0!==e?e:void Yp(rt(n))}const ut=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),id={},Qb="__NG_DI_FLAG__",Zp="ngTempTokenPath",O5="ngTokenPath",P5=/\n/gm,F5="\u0275",aR="__source";let rd;function Fl(n){const e=rd;return rd=n,e}function L5(n,e=ee.Default){if(void 0===rd)throw new x(-203,!1);return null===rd?sR(n,void 0,e):rd.get(n,e&ee.Optional?null:void 0,e)}function D(n,e=ee.Default){return(function N5(){return Yb}()||L5)(J(n),e)}function ye(n,e=ee.Default){return D(n,Jp(e))}function Jp(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Xb(n){const e=[];for(let t=0;t<n.length;t++){const i=J(n[t]);if(Array.isArray(i)){if(0===i.length)throw new x(900,!1);let r,o=ee.Default;for(let s=0;s<i.length;s++){const a=i[s],l=V5(a);"number"==typeof l?-1===l?r=a.token:o|=l:r=a}e.push(D(r,o))}else e.push(D(i))}return e}function od(n,e){return n[Qb]=e,n.prototype[Qb]=e,n}function V5(n){return n[Qb]}function es(n){return{toString:n}.toString()}var Tr=(()=>((Tr=Tr||{})[Tr.OnPush=0]="OnPush",Tr[Tr.Default=1]="Default",Tr))(),cr=(()=>{return(n=cr||(cr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",cr;var n})();const co={},He=[],em=nt({\u0275cmp:nt}),Zb=nt({\u0275dir:nt}),Jb=nt({\u0275pipe:nt}),cR=nt({\u0275mod:nt}),uo=nt({\u0275fac:nt}),sd=nt({__NG_ELEMENT_ID__:nt});let j5=0;function st(n){return es(()=>{const t=!0===n.standalone,i={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Tr.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||He,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||cr.Emulated,id:"c"+j5++,styles:n.styles||He,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},o=n.dependencies,s=n.features;return r.inputs=hR(n.inputs,i),r.outputs=hR(n.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=o?()=>("function"==typeof o?o():o).map(uR).filter(dR):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(Gn).filter(dR):null,r})}function uR(n){return Ke(n)||Nn(n)}function dR(n){return null!==n}function Ue(n){return es(()=>({type:n.type,bootstrap:n.bootstrap||He,declarations:n.declarations||He,imports:n.imports||He,exports:n.exports||He,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function hR(n,e){if(null==n)return co;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),t[r]=i,e&&(e[r]=o)}return t}const M=st;function ci(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ke(n){return n[em]||null}function Nn(n){return n[Zb]||null}function Gn(n){return n[Jb]||null}function Ei(n,e){const t=n[cR]||null;if(!t&&!0===e)throw new Error(`Type ${rt(n)} does not have '\u0275mod' property.`);return t}const ho=0,B=1,ge=2,It=3,ur=4,ca=5,On=6,Vl=7,Lt=8,tm=9,nm=10,ve=11,ew=12,ad=13,fR=14,Bl=15,Pn=16,ld=17,Ul=18,Mr=19,cd=20,pR=21,dt=22,tw=1,mR=2,im=7,rm=8,jl=9,Kn=10;function xi(n){return Array.isArray(n)&&"object"==typeof n[tw]}function dr(n){return Array.isArray(n)&&!0===n[tw]}function nw(n){return 0!=(4&n.flags)}function ud(n){return n.componentOffset>-1}function om(n){return 1==(1&n.flags)}function hr(n){return null!==n.template}function $5(n){return 0!=(256&n[ge])}function ua(n,e){return n.hasOwnProperty(uo)?n[uo]:null}class G5{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Fn(){return yR}function yR(n){return n.type.prototype.ngOnChanges&&(n.setInput=Y5),K5}function K5(){const n=bR(this),e=n?.current;if(e){const t=n.previous;if(t===co)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function Y5(n,e,t,i){const r=this.declaredInputs[t],o=bR(n)||function Q5(n,e){return n[vR]=e}(n,{previous:co,current:null}),s=o.current||(o.current={}),a=o.previous,l=a[r];s[r]=new G5(l&&l.currentValue,e,a===co),n[i]=e}Fn.ngInherit=!0;const vR="__ngSimpleChanges__";function bR(n){return n[vR]||null}const qi=function(n,e,t){};function yn(n){for(;Array.isArray(n);)n=n[ho];return n}function sm(n,e){return yn(e[n])}function Di(n,e){return yn(e[n.index])}function ER(n,e){return n.data[e]}function Si(n,e){const t=e[n];return xi(t)?t:t[ho]}function am(n){return 64==(64&n[ge])}function ts(n,e){return null==e?null:n[e]}function xR(n){n[Ul]=0}function rw(n,e){n[ca]+=e;let t=n,i=n[It];for(;null!==i&&(1===e&&1===t[ca]||-1===e&&0===t[ca]);)i[ca]+=e,t=i,i=i[It]}const ce={lFrame:OR(null),bindingsEnabled:!0};function SR(){return ce.bindingsEnabled}function I(){return ce.lFrame.lView}function Re(){return ce.lFrame.tView}function zl(n){return ce.lFrame.contextLView=n,n[Lt]}function $l(n){return ce.lFrame.contextLView=null,n}function vn(){let n=IR();for(;null!==n&&64===n.type;)n=n.parent;return n}function IR(){return ce.lFrame.currentTNode}function Ar(n,e){const t=ce.lFrame;t.currentTNode=n,t.isParent=e}function ow(){return ce.lFrame.isParent}function sw(){ce.lFrame.isParent=!1}function ql(){return ce.lFrame.bindingIndex++}function c8(n,e){const t=ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,aw(e)}function aw(n){ce.lFrame.currentDirectiveIndex=n}function kR(){return ce.lFrame.currentQueryIndex}function cw(n){ce.lFrame.currentQueryIndex=n}function d8(n){const e=n[B];return 2===e.type?e.declTNode:1===e.type?n[On]:null}function RR(n,e,t){if(t&ee.SkipSelf){let r=e,o=n;for(;!(r=r.parent,null!==r||t&ee.Host||(r=d8(o),null===r||(o=o[Bl],10&r.type))););if(null===r)return!1;e=r,n=o}const i=ce.lFrame=NR();return i.currentTNode=e,i.lView=n,!0}function uw(n){const e=NR(),t=n[B];ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function NR(){const n=ce.lFrame,e=null===n?null:n.child;return null===e?OR(n):e}function OR(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function PR(){const n=ce.lFrame;return ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const FR=PR;function dw(){const n=PR();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Qn(){return ce.lFrame.selectedIndex}function da(n){ce.lFrame.selectedIndex=n}function Et(){const n=ce.lFrame;return ER(n.tView,n.selectedIndex)}function lm(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(n.contentHooks||(n.contentHooks=[])).push(-t,s),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function cm(n,e,t){LR(n,e,3,t)}function um(n,e,t,i){(3&n[ge])===t&&LR(n,e,t,i)}function hw(n,e){let t=n[ge];(3&t)===e&&(t&=2047,t+=1,n[ge]=t)}function LR(n,e,t,i){const o=i??-1,s=e.length-1;let a=0;for(let l=void 0!==i?65535&n[Ul]:0;l<s;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[Ul]+=65536),(a<o||-1==o)&&(b8(n,t,e,l),n[Ul]=(4294901760&n[Ul])+l+2),l++}function b8(n,e,t,i){const r=t[i]<0,o=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[ge]>>11<n[Ul]>>16&&(3&n[ge])===e){n[ge]+=2048,qi(4,a,o);try{o.call(a)}finally{qi(5,a,o)}}}else{qi(4,a,o);try{o.call(a)}finally{qi(5,a,o)}}}const Wl=-1;class hd{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function pw(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{const o=r,s=t[++i];BR(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function VR(n){return 3===n||4===n||6===n}function BR(n){return 64===n.charCodeAt(0)}function fd(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||UR(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function UR(n,e,t,i,r){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[o+1]=r));if(i===n[o+1])return void(n[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==i&&n.splice(o++,0,i),null!==r&&n.splice(o++,0,r)}function jR(n){return n!==Wl}function dm(n){return 32767&n}function hm(n,e){let t=function x8(n){return n>>16}(n),i=e;for(;t>0;)i=i[Bl],t--;return i}let mw=!0;function fm(n){const e=mw;return mw=n,e}const HR=255,zR=5;let D8=0;const kr={};function pm(n,e){const t=$R(n,e);if(-1!==t)return t;const i=e[B];i.firstCreatePass&&(n.injectorIndex=e.length,gw(i.data,n),gw(e,null),gw(i.blueprint,null));const r=_w(n,e),o=n.injectorIndex;if(jR(r)){const s=dm(r),a=hm(r,e),l=a[B].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=r,o}function gw(n,e){n.push(0,0,0,0,0,0,0,0,e)}function $R(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function _w(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=XR(r),null===i)return Wl;if(t++,r=r[Bl],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return Wl}function yw(n,e,t){!function S8(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(sd)&&(i=t[sd]),null==i&&(i=t[sd]=D8++);const r=i&HR;e.data[n+(r>>zR)]|=1<<r}(n,e,t)}function qR(n,e,t){if(t&ee.Optional||void 0!==n)return n;Yp()}function WR(n,e,t,i){if(t&ee.Optional&&void 0===i&&(i=null),!(t&(ee.Self|ee.Host))){const r=n[tm],o=$i(void 0);try{return r?r.get(e,i,t&ee.Optional):sR(e,i,t&ee.Optional)}finally{$i(o)}}return qR(i,0,t)}function GR(n,e,t,i=ee.Default,r){if(null!==n){if(1024&e[ge]){const s=function k8(n,e,t,i,r){let o=n,s=e;for(;null!==o&&null!==s&&1024&s[ge]&&!(256&s[ge]);){const a=KR(o,s,t,i|ee.Self,kr);if(a!==kr)return a;let l=o.parent;if(!l){const c=s[pR];if(c){const u=c.get(t,kr,i);if(u!==kr)return u}l=XR(s),s=s[Bl]}o=l}return r}(n,e,t,i,kr);if(s!==kr)return s}const o=KR(n,e,t,i,kr);if(o!==kr)return o}return WR(e,t,i,r)}function KR(n,e,t,i,r){const o=function M8(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(sd)?n[sd]:void 0;return"number"==typeof e?e>=0?e&HR:A8:e}(t);if("function"==typeof o){if(!RR(e,n,i))return i&ee.Host?qR(r,0,i):WR(e,t,i,r);try{const s=o(i);if(null!=s||i&ee.Optional)return s;Yp()}finally{FR()}}else if("number"==typeof o){let s=null,a=$R(n,e),l=Wl,c=i&ee.Host?e[Pn][On]:null;for((-1===a||i&ee.SkipSelf)&&(l=-1===a?_w(n,e):e[a+8],l!==Wl&&QR(i,!1)?(s=e[B],a=dm(l),e=hm(l,e)):a=-1);-1!==a;){const u=e[B];if(YR(o,a,u.data)){const d=T8(a,e,t,s,i,c);if(d!==kr)return d}l=e[a+8],l!==Wl&&QR(i,e[B].data[a+8]===c)&&YR(o,a,e)?(s=u,a=dm(l),e=hm(l,e)):a=-1}}return r}function T8(n,e,t,i,r,o){const s=e[B],a=s.data[n+8],u=mm(a,s,t,null==i?ud(a)&&mw:i!=s&&0!=(3&a.type),r&ee.Host&&o===a);return null!==u?ha(e,s,u,a):kr}function mm(n,e,t,i,r){const o=n.providerIndexes,s=e.data,a=1048575&o,l=n.directiveStart,u=o>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=s[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(r){const f=s[l];if(f&&hr(f)&&f.type===t)return l}return null}function ha(n,e,t,i){let r=n[t];const o=e.data;if(function w8(n){return n instanceof hd}(r)){const s=r;s.resolving&&function x5(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new x(-200,`Circular dependency in DI detected for ${n}${t}`)}(function We(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():le(n)}(o[t]));const a=fm(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?$i(s.injectImpl):null;RR(n,i,ee.Default);try{r=n[t]=s.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&function v8(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const s=yR(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o))}(t,o[t],e)}finally{null!==l&&$i(l),fm(a),s.resolving=!1,FR()}}return r}function YR(n,e,t){return!!(t[e+(n>>zR)]&1<<n)}function QR(n,e){return!(n&ee.Self||n&ee.Host&&e)}class Gl{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return GR(this._tNode,this._lView,e,Jp(i),t)}}function A8(){return new Gl(vn(),I())}function Fe(n){return es(()=>{const e=n.prototype.constructor,t=e[uo]||vw(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const o=r[uo]||vw(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function vw(n){return Wb(n)?()=>{const e=vw(J(n));return e&&e()}:ua(n)}function XR(n){const e=n[B],t=e.type;return 2===t?e.declTNode:1===t?n[On]:null}function fa(n){return function I8(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const o=t[r];if(VR(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(o===e)return t[r+1];r+=2}}}return null}(vn(),n)}const Yl="__parameters__";function Xl(n,e,t){return es(()=>{const i=function bw(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(l,c,u){const d=l.hasOwnProperty(Yl)?l[Yl]:Object.defineProperty(l,Yl,{value:[]})[Yl];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class k{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=P({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function pa(n,e){n.forEach(t=>Array.isArray(t)?pa(t,e):e(t))}function JR(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function gm(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function gd(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function Ii(n,e,t){let i=Zl(n,e);return i>=0?n[1|i]=t:(i=~i,function P8(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Cw(n,e){const t=Zl(n,e);if(t>=0)return n[1|t]}function Zl(n,e){return function eN(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}(n,e,1)}const ym=od(Xl("Inject",n=>({token:n})),-1),Rr=od(Xl("Optional"),8),ma=od(Xl("SkipSelf"),4);var ui=(()=>((ui=ui||{})[ui.Important=1]="Important",ui[ui.DashCase=2]="DashCase",ui))();const Iw=new Map;let i6=0;const Mw="__ngContext__";function Ln(n,e){xi(e)?(n[Mw]=e[cd],function o6(n){Iw.set(n[cd],n)}(e)):n[Mw]=e}let Aw;function kw(n,e){return Aw(n,e)}function bd(n){const e=n[It];return dr(e)?e[It]:e}function Rw(n){return bN(n[ad])}function Nw(n){return bN(n[ur])}function bN(n){for(;null!==n&&!dr(n);)n=n[ur];return n}function ec(n,e,t,i,r){if(null!=i){let o,s=!1;dr(i)?o=i:xi(i)&&(s=!0,i=i[ho]);const a=yn(i);0===n&&null!==t?null==r?SN(e,t,a):ga(e,t,a,r||null,!0):1===n&&null!==t?ga(e,t,a,r||null,!0):2===n?function Uw(n,e,t){const i=wm(n,e);i&&function D6(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function T6(n,e,t,i,r){const o=t[im];o!==yn(t)&&ec(e,n,i,o,r);for(let a=Kn;a<t.length;a++){const l=t[a];wd(l[B],l,n,e,i,o)}}(e,n,o,t,r)}}function Pw(n,e,t){return n.createElement(e,t)}function CN(n,e){const t=n[jl],i=t.indexOf(e),r=e[It];512&e[ge]&&(e[ge]&=-513,rw(r,-1)),t.splice(i,1)}function Fw(n,e){if(n.length<=Kn)return;const t=Kn+e,i=n[t];if(i){const r=i[ld];null!==r&&r!==n&&CN(r,i),e>0&&(n[t-1][ur]=i[ur]);const o=gm(n,Kn+e);!function _6(n,e){wd(n,e,e[ve],2,null,null),e[ho]=null,e[On]=null}(i[B],i);const s=o[Mr];null!==s&&s.detachView(o[B]),i[It]=null,i[ur]=null,i[ge]&=-65}return i}function EN(n,e){if(!(128&e[ge])){const t=e[ve];t.destroyNode&&wd(n,e,t,3,null,null),function b6(n){let e=n[ad];if(!e)return Lw(n[B],n);for(;e;){let t=null;if(xi(e))t=e[ad];else{const i=e[Kn];i&&(t=i)}if(!t){for(;e&&!e[ur]&&e!==n;)xi(e)&&Lw(e[B],e),e=e[It];null===e&&(e=n),xi(e)&&Lw(e[B],e),t=e&&e[ur]}e=t}}(e)}}function Lw(n,e){if(!(128&e[ge])){e[ge]&=-65,e[ge]|=128,function x6(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof hd)){const o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],l=o[s+1];qi(4,a,l);try{l.call(a)}finally{qi(5,a,l)}}else{qi(4,r,o);try{o.call(r)}finally{qi(5,r,o)}}}}}(n,e),function E6(n,e){const t=n.cleanup,i=e[Vl];let r=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?i[r=s]():i[r=-s].unsubscribe(),o+=2}else{const s=i[r=t[o+1]];t[o].call(s)}if(null!==i){for(let o=r+1;o<i.length;o++)(0,i[o])();e[Vl]=null}}(n,e),1===e[B].type&&e[ve].destroy();const t=e[ld];if(null!==t&&dr(e[It])){t!==e[It]&&CN(t,e);const i=e[Mr];null!==i&&i.detachView(n)}!function s6(n){Iw.delete(n[cd])}(e)}}function xN(n,e,t){return function DN(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[ho];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=n.data[i.directiveStart+r];if(o===cr.None||o===cr.Emulated)return null}return Di(i,t)}}(n,e.parent,t)}function ga(n,e,t,i,r){n.insertBefore(e,t,i,r)}function SN(n,e,t){n.appendChild(e,t)}function IN(n,e,t,i,r){null!==i?ga(n,e,t,i,r):SN(n,e,t)}function wm(n,e){return n.parentNode(e)}function TN(n,e,t){return AN(n,e,t)}let Vw,xm,zw,AN=function MN(n,e,t){return 40&n.type?Di(n,t):null};function Cm(n,e,t,i){const r=xN(n,i,e),o=e[ve],a=TN(i.parent||e[On],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)IN(o,r,t[l],a,!1);else IN(o,r,t,a,!1);void 0!==Vw&&Vw(o,i,e,t,r)}function Em(n,e){if(null!==e){const t=e.type;if(3&t)return Di(e,n);if(4&t)return Bw(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Em(n,i);{const r=n[e.index];return dr(r)?Bw(-1,r):yn(r)}}if(32&t)return kw(e,n)()||yn(n[e.index]);{const i=RN(n,e);return null!==i?Array.isArray(i)?i[0]:Em(bd(n[Pn]),i):Em(n,e.next)}}return null}function RN(n,e){return null!==e?n[Pn][On].projection[e.projection]:null}function Bw(n,e){const t=Kn+n+1;if(t<e.length){const i=e[t],r=i[B].firstChild;if(null!==r)return Em(i,r)}return e[im]}function jw(n,e,t,i,r,o,s){for(;null!=t;){const a=i[t.index],l=t.type;if(s&&0===e&&(a&&Ln(yn(a),i),t.flags|=2),32!=(32&t.flags))if(8&l)jw(n,e,t.child,i,r,o,!1),ec(e,n,r,a,o);else if(32&l){const c=kw(t,i);let u;for(;u=c();)ec(e,n,r,u,o);ec(e,n,r,a,o)}else 16&l?NN(n,e,i,t,r,o):ec(e,n,r,a,o);t=s?t.projectionNext:t.next}}function wd(n,e,t,i,r,o){jw(t,i,n.firstChild,e,r,o,!1)}function NN(n,e,t,i,r,o){const s=t[Pn],l=s[On].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)ec(e,n,r,l[c],o);else jw(n,e,l,s[It],r,o,!0)}function ON(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function PN(n,e,t){const{mergedAttrs:i,classes:r,styles:o}=t;null!==i&&pw(n,e,i),null!==r&&ON(n,e,r),null!==o&&function A6(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}function tc(n){return function Hw(){if(void 0===xm&&(xm=null,ut.trustedTypes))try{xm=ut.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return xm}()?.createHTML(n)||n}class _a{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Gp})`}}class P6 extends _a{getTypeName(){return"HTML"}}class F6 extends _a{getTypeName(){return"Style"}}class L6 extends _a{getTypeName(){return"Script"}}class V6 extends _a{getTypeName(){return"URL"}}class B6 extends _a{getTypeName(){return"ResourceURL"}}function Ti(n){return n instanceof _a?n.changingThisBreaksApplicationSecurity:n}function Nr(n,e){const t=function U6(n){return n instanceof _a&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Gp})`)}return t===e}class W6{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(tc(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class G6{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=tc(e),t}}const Y6=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Sm(n){return(n=String(n)).match(Y6)?n:"unsafe:"+n}function mo(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Cd(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const jN=mo("area,br,col,hr,img,wbr"),HN=mo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zN=mo("rp,rt"),qw=Cd(jN,Cd(HN,mo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Cd(zN,mo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Cd(zN,HN)),Ww=mo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$N=Cd(Ww,mo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),mo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Q6=mo("script,style,template");class X6{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!qw.hasOwnProperty(t))return this.sanitizedSomething=!0,!Q6.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),s=o.name,a=s.toLowerCase();if(!$N.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;Ww[a]&&(l=Sm(l)),this.buf.push(" ",s,'="',qN(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();qw.hasOwnProperty(t)&&!jN.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(qN(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const Z6=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,J6=/([^\#-~ |!])/g;function qN(n){return n.replace(/&/g,"&amp;").replace(Z6,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(J6,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Im;function WN(n,e){let t=null;try{Im=Im||function UN(n){const e=new G6(n);return function K6(){try{return!!(new window.DOMParser).parseFromString(tc(""),"text/html")}catch{return!1}}()?new W6(e):e}(n);let i=e?String(e):"";t=Im.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=Im.getInertBodyElement(i)}while(i!==o);return tc((new X6).sanitizeChildren(Gw(t)||t))}finally{if(t){const i=Gw(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Gw(n){return"content"in n&&function eK(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var ze=(()=>((ze=ze||{})[ze.NONE=0]="NONE",ze[ze.HTML=1]="HTML",ze[ze.STYLE=2]="STYLE",ze[ze.SCRIPT=3]="SCRIPT",ze[ze.URL=4]="URL",ze[ze.RESOURCE_URL=5]="RESOURCE_URL",ze))();const Tm=new k("ENVIRONMENT_INITIALIZER"),QN=new k("INJECTOR",-1),XN=new k("INJECTOR_DEF_TYPES");class ZN{get(e,t=id){if(t===id){const i=new Error(`NullInjectorError: No provider for ${rt(e)}!`);throw i.name="NullInjectorError",i}return t}}function aK(...n){return{\u0275providers:JN(0,n),\u0275fromNgModule:!0}}function JN(n,...e){const t=[],i=new Set;let r;return pa(e,o=>{const s=o;Kw(s,t,[],i)&&(r||(r=[]),r.push(s))}),void 0!==r&&eO(r,t),t}function eO(n,e){for(let t=0;t<n.length;t++){const{providers:r}=n[t];Yw(r,o=>{e.push(o)})}}function Kw(n,e,t,i){if(!(n=J(n)))return!1;let r=null,o=rR(n);const s=!o&&Ke(n);if(o||s){if(s&&!s.standalone)return!1;r=n}else{const l=n.ngModule;if(o=rR(l),!o)return!1;r=l}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)Kw(c,e,t,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;i.add(r);try{pa(o.imports,u=>{Kw(u,e,t,i)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&eO(c,e)}if(!a){const c=ua(r)||(()=>new r);e.push({provide:r,useFactory:c,deps:He},{provide:XN,useValue:r,multi:!0},{provide:Tm,useValue:()=>D(r),multi:!0})}const l=o.providers;null==l||a||Yw(l,u=>{e.push(u)})}}return r!==n&&void 0!==n.providers}function Yw(n,e){for(let t of n)Gb(t)&&(t=t.\u0275providers),Array.isArray(t)?Yw(t,e):e(t)}const lK=nt({provide:String,useValue:nt});function Qw(n){return null!==n&&"object"==typeof n&&lK in n}function ya(n){return"function"==typeof n}const Xw=new k("Set Injector scope."),Mm={},uK={};let Zw;function Am(){return void 0===Zw&&(Zw=new ZN),Zw}class go{}class iO extends go{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,e0(e,s=>this.processProvider(s)),this.records.set(QN,nc(void 0,this)),r.has("environment")&&this.records.set(go,nc(void 0,this));const o=this.records.get(Xw);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(XN.multi,He,ee.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=Fl(this),i=$i(void 0);try{return e()}finally{Fl(t),$i(i)}}get(e,t=id,i=ee.Default){this.assertNotDestroyed(),i=Jp(i);const r=Fl(this),o=$i(void 0);try{if(!(i&ee.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function mK(n){return"function"==typeof n||"object"==typeof n&&n instanceof k}(e)&&Qp(e);a=l&&this.injectableDefInScope(l)?nc(Jw(e),Mm):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&ee.Self?Am():this.parent).get(e,t=i&ee.Optional&&t===id?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[Zp]=s[Zp]||[]).unshift(rt(e)),r)throw s;return function B5(n,e,t,i){const r=n[Zp];throw e[aR]&&r.unshift(e[aR]),n.message=function U5(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==F5?n.slice(2):n;let r=rt(e);if(Array.isArray(e))r=e.map(rt).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):rt(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(P5,"\n  ")}`}("\n"+n.message,r,t,i),n[O5]=r,n[Zp]=null,n}(s,e,"R3InjectorError",this.source)}throw s}finally{$i(o),Fl(r)}}resolveInjectorInitializers(){const e=Fl(this),t=$i(void 0);try{const i=this.get(Tm.multi,He,ee.Self);for(const r of i)r()}finally{Fl(e),$i(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(rt(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new x(205,!1)}processProvider(e){let t=ya(e=J(e))?e:J(e&&e.provide);const i=function hK(n){return Qw(n)?nc(void 0,n.useValue):nc(rO(n),Mm)}(e);if(ya(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=nc(void 0,Mm,!0),r.factory=()=>Xb(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===Mm&&(t.value=uK,t.value=t.factory()),"object"==typeof t.value&&t.value&&function pK(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=J(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Jw(n){const e=Qp(n),t=null!==e?e.factory:ua(n);if(null!==t)return t;if(n instanceof k)throw new x(204,!1);if(n instanceof Function)return function dK(n){const e=n.length;if(e>0)throw gd(e,"?"),new x(204,!1);const t=function A5(n){const e=n&&(n[Xp]||n[oR]);return e?(function k5(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),e):null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new x(204,!1)}function rO(n,e,t){let i;if(ya(n)){const r=J(n);return ua(r)||Jw(r)}if(Qw(n))i=()=>J(n.useValue);else if(function nO(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Xb(n.deps||[]));else if(function tO(n){return!(!n||!n.useExisting)}(n))i=()=>D(J(n.useExisting));else{const r=J(n&&(n.useClass||n.provide));if(!function fK(n){return!!n.deps}(n))return ua(r)||Jw(r);i=()=>new r(...Xb(n.deps))}return i}function nc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function e0(n,e){for(const t of n)Array.isArray(t)?e0(t,e):t&&Gb(t)?e0(t.\u0275providers,e):e(t)}class gK{}class oO{}class yK{resolveComponentFactory(e){throw function _K(n){const e=Error(`No component factory found for ${rt(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let ic=(()=>{class n{}return n.NULL=new yK,n})();function vK(){return rc(vn(),I())}function rc(n,e){return new Me(Di(n,e))}let Me=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=vK,n})();function bK(n){return n instanceof Me?n.nativeElement:n}class xd{}let _o=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function wK(){const n=I(),t=Si(vn().index,n);return(xi(t)?t:n)[ve]}(),n})(),CK=(()=>{class n{}return n.\u0275prov=P({token:n,providedIn:"root",factory:()=>null}),n})();class va{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const EK=new va("15.2.2"),t0={},n0="ngOriginalError";function r0(n){return n[n0]}class yo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&r0(e);for(;t&&r0(t);)t=r0(t);return t||null}}function vo(n){return n instanceof Function?n():n}function lO(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}const cO="ng-template";function OK(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==lO(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function uO(n){return 4===n.type&&n.value!==cO}function PK(n,e,t){return e===(4!==n.type||t?n.value:cO)}function FK(n,e,t){let i=4;const r=n.attrs||[],o=function BK(n){for(let e=0;e<n.length;e++)if(VR(n[e]))return e;return n.length}(r);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&i){if(i=2|1&i,""!==l&&!PK(n,l,t)||""===l&&1===e.length){if(fr(i))return!1;s=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!OK(n.attrs,c,t)){if(fr(i))return!1;s=!0}continue}const d=LK(8&i?"class":l,r,uO(n),t);if(-1===d){if(fr(i))return!1;s=!0;continue}if(""!==c){let h;h=d>o?"":r[d+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==lO(f,c,0)||2&i&&c!==h){if(fr(i))return!1;s=!0}}}}else{if(!s&&!fr(i)&&!fr(l))return!1;if(s&&fr(l))continue;s=!1,i=l|1&i}}return fr(i)||s}function fr(n){return 0==(1&n)}function LK(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){const s=e[r];if(s===n)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function UK(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function dO(n,e,t=!1){for(let i=0;i<e.length;i++)if(FK(n,e[i],t))return!0;return!1}function jK(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function hO(n,e){return n?":not("+e.trim()+")":e}function HK(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&i){const a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!fr(s)&&(e+=hO(o,r),r=""),i=s,o=o||!fr(i);t++}return""!==r&&(e+=hO(o,r)),e}const ue={};function xe(n){fO(Re(),I(),Qn()+n,!1)}function fO(n,e,t,i){if(!i)if(3==(3&e[ge])){const o=n.preOrderCheckHooks;null!==o&&cm(e,o,t)}else{const o=n.preOrderHooks;null!==o&&um(e,o,0,t)}da(t)}function _O(n,e=null,t=null,i){const r=yO(n,e,t,i);return r.resolveInjectorInitializers(),r}function yO(n,e=null,t=null,i,r=new Set){const o=[t||He,aK(n)];return i=i||("object"==typeof n?void 0:rt(n)),new iO(o,e||Am(),i||null,r)}let hi=(()=>{class n{static create(t,i){if(Array.isArray(t))return _O({name:""},i,t,"");{const r=t.name??"";return _O({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=id,n.NULL=new ZN,n.\u0275prov=P({token:n,providedIn:"any",factory:()=>D(QN)}),n.__NG_ELEMENT_ID__=-1,n})();function y(n,e=ee.Default){const t=I();return null===t?D(n,e):GR(vn(),t,J(n),e)}function SO(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const s=n.data[o];cw(t[i]),s.contentQueries(2,e[o],o)}}}function Rm(n,e,t,i,r,o,s,a,l,c,u){const d=e.blueprint.slice();return d[ho]=r,d[ge]=76|i,(null!==u||n&&1024&n[ge])&&(d[ge]|=1024),xR(d),d[It]=d[Bl]=n,d[Lt]=t,d[nm]=s||n&&n[nm],d[ve]=a||n&&n[ve],d[ew]=l||n&&n[ew]||null,d[tm]=c||n&&n[tm]||null,d[On]=o,d[cd]=function r6(){return i6++}(),d[pR]=u,d[Pn]=2==e.type?n[Pn]:d,d}function ac(n,e,t,i,r){let o=n.data[e];if(null===o)o=function c0(n,e,t,i,r){const o=IR(),s=ow(),l=n.data[e]=function p7(n,e,t,i,r,o){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l,l.prev=o)),l}(n,e,t,i,r),function l8(){return ce.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=i,o.attrs=r;const s=function dd(){const n=ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Ar(o,!0),o}function Dd(n,e,t,i){if(0===t)return-1;const r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function u0(n,e,t){uw(e);try{const i=n.viewQuery;null!==i&&b0(1,i,t);const r=n.template;null!==r&&IO(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&SO(n,e),n.staticViewQueries&&b0(2,n.viewQuery,t);const o=n.components;null!==o&&function d7(n,e){for(let t=0;t<e.length;t++)N7(n,e[t])}(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[ge]&=-5,dw()}}function Nm(n,e,t,i){const r=e[ge];if(128!=(128&r)){uw(e);try{xR(e),function MR(n){return ce.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&IO(n,e,t,2,i);const s=3==(3&r);if(s){const c=n.preOrderCheckHooks;null!==c&&cm(e,c,null)}else{const c=n.preOrderHooks;null!==c&&um(e,c,0,null),hw(e,0)}if(function k7(n){for(let e=Rw(n);null!==e;e=Nw(e)){if(!e[mR])continue;const t=e[jl];for(let i=0;i<t.length;i++){const r=t[i];512&r[ge]||rw(r[It],1),r[ge]|=512}}}(e),function A7(n){for(let e=Rw(n);null!==e;e=Nw(e))for(let t=Kn;t<e.length;t++){const i=e[t],r=i[B];am(i)&&Nm(r,i,r.template,i[Lt])}}(e),null!==n.contentQueries&&SO(n,e),s){const c=n.contentCheckHooks;null!==c&&cm(e,c)}else{const c=n.contentHooks;null!==c&&um(e,c,1),hw(e,1)}!function c7(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)da(~r);else{const o=r,s=t[++i],a=t[++i];c8(s,o),a(2,e[o])}}}finally{da(-1)}}(n,e);const a=n.components;null!==a&&function u7(n,e){for(let t=0;t<e.length;t++)R7(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&b0(2,l,i),s){const c=n.viewCheckHooks;null!==c&&cm(e,c)}else{const c=n.viewHooks;null!==c&&um(e,c,2),hw(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[ge]&=-41,512&e[ge]&&(e[ge]&=-513,rw(e[It],-1))}finally{dw()}}}function IO(n,e,t,i,r){const o=Qn(),s=2&i;try{da(-1),s&&e.length>dt&&fO(n,e,dt,!1),qi(s?2:0,r),t(i,r)}finally{da(o),qi(s?3:1,r)}}function d0(n,e,t){if(nw(e)){const r=e.directiveEnd;for(let o=e.directiveStart;o<r;o++){const s=n.data[o];s.contentQueries&&s.contentQueries(1,t[o],o)}}}function h0(n,e,t){SR()&&(function b7(n,e,t,i){const r=t.directiveStart,o=t.directiveEnd;ud(t)&&function I7(n,e,t){const i=Di(e,n),r=TO(t),o=n[nm],s=Om(n,Rm(n,r,null,t.onPush?32:16,i,e,o,o.createRenderer(i,t),null,null,null));n[e.index]=s}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||pm(t,e),Ln(i,e);const s=t.initialInputs;for(let a=r;a<o;a++){const l=n.data[a],c=ha(e,n,a,t);Ln(c,e),null!==s&&T7(0,a-r,c,l,0,s),hr(l)&&(Si(t.index,e)[Lt]=ha(e,n,a,t))}}(n,e,t,Di(t,e)),64==(64&t.flags)&&OO(n,e,t))}function f0(n,e,t=Di){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?t(e,n):n[s];n[r++]=a}}}function TO(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=p0(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function p0(n,e,t,i,r,o,s,a,l,c){const u=dt+i,d=u+r,h=function h7(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:ue);return t}(u,d),f="function"==typeof c?c():c;return h[B]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function MO(n,e,t,i){const r=FO(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&LO(n).push(i,r.length-1))}function AO(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const o=n[r];null===i?kO(t,e,r,o):i.hasOwnProperty(r)&&kO(t,e,i[r],o)}return t}function kO(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function Mi(n,e,t,i,r,o,s,a){const l=Di(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(w0(n,t,u,i,r),ud(e)&&RO(t,e.index)):3&e.type&&(i=function g7(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=s?s(r,e.value||"",i):r,o.setProperty(l,i,r))}function RO(n,e){const t=Si(e,n);16&t[ge]||(t[ge]|=32)}function m0(n,e,t,i){if(SR()){const r=null===i?null:{"":-1},o=function C7(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(dO(e,s.selectors,!1))if(i||(i=[]),hr(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s),g0(n,e,a.length)}else i.unshift(s),g0(n,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return null===i?null:[i,r]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&NO(n,e,t,s,r,a),r&&function E7(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const o=t[e[r+1]];if(null==o)throw new x(-301,!1);i.push(e[r],o)}}}(t,i,r)}t.mergedAttrs=fd(t.mergedAttrs,t.attrs)}function NO(n,e,t,i,r,o){for(let c=0;c<i.length;c++)yw(pm(t,e),n,i[c].type);!function D7(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let c=0;c<i.length;c++){const u=i[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=Dd(n,e,i.length,null);for(let c=0;c<i.length;c++){const u=i[c];t.mergedAttrs=fd(t.mergedAttrs,u.hostAttrs),S7(n,t,e,l,u),x7(l,u,r),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),a=!0),l++}!function m7(n,e,t){const r=e.directiveEnd,o=n.data,s=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<r;u++){const d=o[u],h=t?t.get(d):null,p=h?h.outputs:null;l=AO(d.inputs,u,l,h?h.inputs:null),c=AO(d.outputs,u,c,p);const g=null===l||null===s||uO(e)?null:M7(l,u,s);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,o)}function OO(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,s=function u8(){return ce.lFrame.currentDirectiveIndex}();try{da(o);for(let a=i;a<r;a++){const l=n.data[a],c=e[a];aw(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&w7(l,c)}}finally{da(-1),aw(s)}}function w7(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function g0(n,e,t){e.componentOffset=t,(n.components||(n.components=[])).push(e.index)}function x7(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;hr(e)&&(t[""]=n)}}function S7(n,e,t,i,r){n.data[i]=r;const o=r.factory||(r.factory=ua(r.type)),s=new hd(o,hr(r),y);n.blueprint[i]=s,t[i]=s,function y7(n,e,t,i,r){const o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function v7(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,i,o)}}(n,e,i,Dd(n,t,r.hostVars,ue),r)}function Or(n,e,t,i,r,o){const s=Di(n,e);!function _0(n,e,t,i,r,o,s){if(null==o)n.removeAttribute(e,r,t);else{const a=null==s?le(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}(e[ve],s,o,n.value,t,i,r)}function T7(n,e,t,i,r,o){const s=o[e];if(null!==s){const a=i.setInput;for(let l=0;l<s.length;){const c=s[l++],u=s[l++],d=s[l++];null!==a?i.setInput(t,d,c,u):t[u]=d}}}function M7(n,e,t){let i=null,r=0;for(;r<t.length;){const o=t[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===i&&(i=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){i.push(o,s[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function PO(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null]}function R7(n,e){const t=Si(e,n);if(am(t)){const i=t[B];48&t[ge]?Nm(i,t,i.template,t[Lt]):t[ca]>0&&y0(t)}}function y0(n){for(let i=Rw(n);null!==i;i=Nw(i))for(let r=Kn;r<i.length;r++){const o=i[r];if(am(o))if(512&o[ge]){const s=o[B];Nm(s,o,s.template,o[Lt])}else o[ca]>0&&y0(o)}const t=n[B].components;if(null!==t)for(let i=0;i<t.length;i++){const r=Si(t[i],n);am(r)&&r[ca]>0&&y0(r)}}function N7(n,e){const t=Si(e,n),i=t[B];(function O7(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),u0(i,t,t[Lt])}function Om(n,e){return n[ad]?n[fR][ur]=e:n[ad]=e,n[fR]=e,e}function v0(n){for(;n;){n[ge]|=32;const e=bd(n);if($5(n)&&!e)return n;n=e}return null}function Pm(n,e,t,i=!0){const r=e[nm];r.begin&&r.begin();try{Nm(n,e,n.template,t)}catch(s){throw i&&BO(e,s),s}finally{r.end&&r.end()}}function b0(n,e,t){cw(0),e(n,t)}function FO(n){return n[Vl]||(n[Vl]=[])}function LO(n){return n.cleanup||(n.cleanup=[])}function BO(n,e){const t=n[tm],i=t?t.get(yo,null):null;i&&i.handleError(e)}function w0(n,e,t,i,r){for(let o=0;o<t.length;){const s=t[o++],a=t[o++],l=e[s],c=n.data[s];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function Fm(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?r=qb(r,a):2==o&&(i=qb(i,a+": "+e[++s]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Lm(n,e,t,i,r=!1){for(;null!==t;){const o=e[t.index];if(null!==o&&i.push(yn(o)),dr(o))for(let a=Kn;a<o.length;a++){const l=o[a],c=l[B].firstChild;null!==c&&Lm(l[B],l,c,i)}const s=t.type;if(8&s)Lm(n,e,t.child,i);else if(32&s){const a=kw(t,e);let l;for(;l=a();)i.push(l)}else if(16&s){const a=RN(e,t);if(Array.isArray(a))i.push(...a);else{const l=bd(e[Pn]);Lm(l[B],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class Sd{get rootNodes(){const e=this._lView,t=e[B];return Lm(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Lt]}set context(e){this._lView[Lt]=e}get destroyed(){return 128==(128&this._lView[ge])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[It];if(dr(e)){const t=e[rm],i=t?t.indexOf(this):-1;i>-1&&(Fw(e,i),gm(t,i))}this._attachedToViewContainer=!1}EN(this._lView[B],this._lView)}onDestroy(e){MO(this._lView[B],this._lView,null,e)}markForCheck(){v0(this._cdRefInjectingView||this._lView)}detach(){this._lView[ge]&=-65}reattach(){this._lView[ge]|=64}detectChanges(){Pm(this._lView[B],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new x(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function v6(n,e){wd(n,e,e[ve],2,null,null)}(this._lView[B],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new x(902,!1);this._appRef=e}}class P7 extends Sd{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Pm(e[B],e,e[Lt],!1)}checkNoChanges(){}get context(){return null}}class UO extends ic{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Ke(e);return new Id(t,this.ngModule)}}function jO(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class L7{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Jp(i);const r=this.injector.get(e,t0,i);return r!==t0||t===t0?r:this.parentInjector.get(e,t,i)}}class Id extends oO{get inputs(){return jO(this.componentDef.inputs)}get outputs(){return jO(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function zK(n){return n.map(HK).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let o=(r=r||this.ngModule)instanceof go?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new L7(e,o):e,a=s.get(xd,null);if(null===a)throw new x(407,!1);const l=s.get(CK,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=i?function f7(n,e,t){return n.selectRootElement(e,t===cr.ShadowDom)}(c,i,this.componentDef.encapsulation):Pw(c,u,function F7(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),h=this.componentDef.onPush?288:272,f=p0(0,null,null,1,0,null,null,null,null,null),p=Rm(null,f,null,h,null,null,a,c,l,s,null);let g,_;uw(p);try{const v=this.componentDef;let E,b=null;v.findHostDirectiveDefs?(E=[],b=new Map,v.findHostDirectiveDefs(v,E,b),E.push(v)):E=[v];const N=function B7(n,e){const t=n[B],i=dt;return n[i]=e,ac(t,i,2,"#host",null)}(p,d),W=function U7(n,e,t,i,r,o,s,a){const l=r[B];!function j7(n,e,t,i){for(const r of n)e.mergedAttrs=fd(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Fm(e,e.mergedAttrs,!0),null!==t&&PN(i,t,e))}(i,n,e,s);const c=o.createRenderer(e,t),u=Rm(r,TO(t),null,t.onPush?32:16,r[n.index],n,o,c,a||null,null,null);return l.firstCreatePass&&g0(l,n,i.length-1),Om(r,u),r[n.index]=u}(N,d,v,E,p,a,c);_=ER(f,dt),d&&function z7(n,e,t,i){if(i)pw(n,t,["ng-version",EK.full]);else{const{attrs:r,classes:o}=function $K(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let o=n[i];if("string"==typeof o)2===r?""!==o&&e.push(o,n[++i]):8===r&&t.push(o);else{if(!fr(r))break;r=o}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&pw(n,t,r),o&&o.length>0&&ON(n,t,o.join(" "))}}(c,v,d,i),void 0!==t&&function $7(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const o=t[r];i.push(null!=o?Array.from(o):null)}}(_,this.ngContentSelectors,t),g=function H7(n,e,t,i,r,o){const s=vn(),a=r[B],l=Di(s,r);NO(a,r,s,t,null,i);for(let u=0;u<t.length;u++)Ln(ha(r,a,s.directiveStart+u,s),r);OO(a,r,s),l&&Ln(l,r);const c=ha(r,a,s.directiveStart+s.componentOffset,s);if(n[Lt]=r[Lt]=c,null!==o)for(const u of o)u(c,e);return d0(a,s,n),c}(W,v,E,b,p,[q7]),u0(f,p,null)}finally{dw()}return new V7(this.componentType,g,rc(_,p),p,_)}}class V7 extends gK{constructor(e,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new P7(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){const o=this._rootLView;w0(o[B],o,r,e,t),RO(o,this._tNode.index)}}get injector(){return new Gl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function q7(){const n=vn();lm(I()[B],n)}function K(n){let e=function HO(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(hr(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new x(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const s=n;s.inputs=C0(n.inputs),s.declaredInputs=C0(n.declaredInputs),s.outputs=C0(n.outputs);const a=r.hostBindings;a&&Y7(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&G7(n,l),c&&K7(n,c),$b(n.inputs,r.inputs),$b(n.declaredInputs,r.declaredInputs),$b(n.outputs,r.outputs),hr(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===K&&(t=!1)}}e=Object.getPrototypeOf(e)}!function W7(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=fd(r.hostAttrs,t=fd(t,r.hostAttrs))}}(i)}function C0(n){return n===co?{}:n===He?[]:n}function G7(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function K7(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,o)=>{e(i,r,o),t(i,r,o)}:e}function Y7(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function Vn(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function fi(n,e,t,i){const r=I();return Vn(r,ql(),e)&&(Re(),Or(Et(),r,n,e,t,i)),fi}function et(n,e,t,i,r,o,s,a){const l=I(),c=Re(),u=n+dt,d=c.firstCreatePass?function oY(n,e,t,i,r,o,s,a,l){const c=e.consts,u=ac(e,n,4,s||null,ts(c,a));m0(e,t,u,ts(c,l)),lm(e,u);const d=u.tView=p0(2,u,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,r,o,s):c.data[u];Ar(d,!1);const h=l[ve].createComment("");Cm(c,l,h,d),Ln(h,l),Om(l,l[u]=PO(h,l,h,d)),om(d)&&h0(c,l,d),null!=s&&f0(l,d,a)}function x0(n){return function Hl(n,e){return n[e]}(function a8(){return ce.lFrame.contextLView}(),dt+n)}function Se(n,e,t){const i=I();return Vn(i,ql(),e)&&Mi(Re(),Et(),i,n,e,i[ve],t,!1),Se}function D0(n,e,t,i,r){const s=r?"class":"style";w0(n,t,e.inputs[s],s,i)}function te(n,e,t,i){const r=I(),o=Re(),s=dt+n,a=r[ve],l=o.firstCreatePass?function aY(n,e,t,i,r,o){const s=e.consts,l=ac(e,n,2,i,ts(s,r));return m0(e,t,l,ts(s,o)),null!==l.attrs&&Fm(l,l.attrs,!1),null!==l.mergedAttrs&&Fm(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(s,o,r,e,t,i):o.data[s],c=r[s]=Pw(a,e,function y8(){return ce.lFrame.currentNamespace}()),u=om(l);return Ar(l,!0),PN(a,c,l),32!=(32&l.flags)&&Cm(o,r,c,l),0===function n8(){return ce.lFrame.elementDepthCount}()&&Ln(c,r),function i8(){ce.lFrame.elementDepthCount++}(),u&&(h0(o,r,l),d0(o,l,r)),null!==i&&f0(r,l),te}function re(){let n=vn();ow()?sw():(n=n.parent,Ar(n,!1));const e=n;!function r8(){ce.lFrame.elementDepthCount--}();const t=Re();return t.firstCreatePass&&(lm(t,n),nw(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function C8(n){return 0!=(8&n.flags)}(e)&&D0(t,e,I(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function E8(n){return 0!=(16&n.flags)}(e)&&D0(t,e,I(),e.stylesWithoutHost,!1),re}function bn(n,e,t,i){return te(n,e,t,i),re(),bn}function kd(){return I()}function Rd(n){return!!n&&"function"==typeof n.then}const S0=function t1(n){return!!n&&"function"==typeof n.subscribe};function Tt(n,e,t,i){const r=I(),o=Re(),s=vn();return function r1(n,e,t,i,r,o,s){const a=om(i),c=n.firstCreatePass&&LO(n),u=e[Lt],d=FO(e);let h=!0;if(3&i.type||s){const g=Di(i,e),_=s?s(g):g,v=d.length,E=s?N=>s(yn(N[i.index])):i.index;let b=null;if(!s&&a&&(b=function cY(n,e,t,i){const r=n.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===t&&r[o+1]===i){const a=e[Vl],l=r[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(n,e,r,i.index)),null!==b)(b.__ngLastListenerFn__||b).__ngNextListenerFn__=o,b.__ngLastListenerFn__=o,h=!1;else{o=s1(i,e,u,o,!1);const N=t.listen(_,r,o);d.push(o,N),c&&c.push(r,E,v,v+1)}}else o=s1(i,e,u,o,!1);const f=i.outputs;let p;if(h&&null!==f&&(p=f[r])){const g=p.length;if(g)for(let _=0;_<g;_+=2){const W=e[p[_]][p[_+1]].subscribe(o),H=d.length;d.push(o,W),c&&c.push(r,i.index,H,-(H+1))}}}(o,r,r[ve],s,n,e,i),Tt}function o1(n,e,t,i){try{return qi(6,e,t),!1!==t(i)}catch(r){return BO(n,r),!1}finally{qi(7,e,t)}}function s1(n,e,t,i,r){return function o(s){if(s===Function)return i;v0(n.componentOffset>-1?Si(n.index,e):e);let l=o1(e,t,i,s),c=o.__ngNextListenerFn__;for(;c;)l=o1(e,t,c,s)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function Vt(n=1){return function h8(n){return(ce.lFrame.contextLView=function f8(n,e){for(;n>0;)e=e[Bl],n--;return e}(n,ce.lFrame.contextLView))[Lt]}(n)}function uY(n,e){let t=null;const i=function VK(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const o=e[r];if("*"!==o){if(null===i?dO(n,o,!0):jK(i,o))return r}else t=r}return t}function Lr(n){const e=I()[Pn][On];if(!e.projection){const i=e.projection=gd(n?n.length:1,null),r=i.slice();let o=e.child;for(;null!==o;){const s=n?uY(o,n):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function _t(n,e=0,t){const i=I(),r=Re(),o=ac(r,dt+n,16,null,t||null);null===o.projection&&(o.projection=e),sw(),32!=(32&o.flags)&&function I6(n,e,t){NN(e[ve],0,e,t,xN(n,t,e),TN(t.parent||e[On],t,e))}(r,i,o)}function Um(n,e){return n<<17|e<<2}function ns(n){return n>>17&32767}function T0(n){return 2|n}function wa(n){return(131068&n)>>2}function M0(n,e){return-131069&n|e<<2}function A0(n){return 1|n}function g1(n,e,t,i,r){const o=n[t+1],s=null===e;let a=i?ns(o):wa(o),l=!1;for(;0!==a&&(!1===l||s);){const u=n[a+1];gY(n[a],e)&&(l=!0,n[a+1]=i?A0(u):T0(u)),a=i?ns(u):wa(u)}l&&(n[t+1]=i?T0(o):A0(o))}function gY(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Zl(n,e)>=0}function is(n,e,t){return pr(n,e,t,!1),is}function wn(n,e){return pr(n,e,null,!0),wn}function pr(n,e,t,i){const r=I(),o=Re(),s=function po(n){const e=ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);o.firstUpdatePass&&function x1(n,e,t,i){const r=n.data;if(null===r[t+1]){const o=r[Qn()],s=function E1(n,e){return e>=n.expandoStartIndex}(n,t);(function T1(n,e){return 0!=(n.flags&(e?8:16))})(o,i)&&null===e&&!s&&(e=!1),e=function DY(n,e,t,i){const r=function lw(n){const e=ce.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Nd(t=k0(null,n,e,t,i),e.attrs,i),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==r)if(t=k0(r,n,e,t,i),null===o){let l=function SY(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==wa(i))return n[ns(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=k0(null,n,e,l[1],i),l=Nd(l,e.attrs,i),function IY(n,e,t,i){n[ns(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else o=function TY(n,e,t){let i;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=Nd(i,n[o].hostAttrs,t);return Nd(i,e.attrs,t)}(n,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),t}(r,o,e,i),function pY(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=ns(s),l=wa(s);n[i]=t;let u,c=!1;if(Array.isArray(t)?(u=t[1],(null===u||Zl(t,u)>0)&&(c=!0)):u=t,r)if(0!==l){const h=ns(n[a+1]);n[i+1]=Um(h,a),0!==h&&(n[h+1]=M0(n[h+1],i)),n[a+1]=function hY(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Um(a,0),0!==a&&(n[a+1]=M0(n[a+1],i)),a=i;else n[i+1]=Um(l,0),0===a?a=i:n[l+1]=M0(n[l+1],i),l=i;c&&(n[i+1]=T0(n[i+1])),g1(n,u,i,!0),g1(n,u,i,!1),function mY(n,e,t,i,r){const o=r?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&Zl(o,e)>=0&&(t[i+1]=A0(t[i+1]))}(e,u,n,i,o),s=Um(a,l),o?e.classBindings=s:e.styleBindings=s}(r,o,e,t,s,i)}}(o,n,s,i),e!==ue&&Vn(r,s,e)&&function S1(n,e,t,i,r,o,s,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],u=function fY(n){return 1==(1&n)}(c)?I1(l,e,t,r,wa(c),s):void 0;jm(u)||(jm(o)||function dY(n){return 2==(2&n)}(c)&&(o=I1(l,null,t,r,a,s)),function M6(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=-1===i.indexOf("-")?void 0:ui.DashCase;null==r?n.removeStyle(t,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=ui.Important),n.setStyle(t,i,r,o))}}(i,s,sm(Qn(),t),r,o))}(o,o.data[Qn()],r,r[ve],n,r[s+1]=function kY(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=rt(Ti(n)))),n}(e,t),i,s)}function k0(n,e,t,i,r){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],i=Nd(i,o.hostAttrs,r),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Nd(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?r=s:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ii(n,s,!!t||e[++o]))}return void 0===n?null:n}function I1(n,e,t,i,r,o){const s=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[r+1];h===ue&&(h=d?He:void 0);let f=d?Cw(h,i):u===i?h:void 0;if(c&&!jm(f)&&(f=Cw(l,i)),jm(f)&&(a=f,s))return a;const p=n[r+1];r=s?ns(p):wa(p)}if(null!==e){let l=o?e.residualClasses:e.residualStyles;null!=l&&(a=Cw(l,i))}return a}function jm(n){return void 0!==n}function qt(n,e=""){const t=I(),i=Re(),r=n+dt,o=i.firstCreatePass?ac(i,r,1,e,null):i.data[r],s=t[r]=function Ow(n,e){return n.createText(e)}(t[ve],e);Cm(i,t,s,o),Ar(o,!1)}function Hm(n){return rs("",n,""),Hm}function rs(n,e,t){const i=I(),r=function cc(n,e,t,i){return Vn(n,ql(),t)?e+le(t)+i:ue}(i,n,e,t);return r!==ue&&function bo(n,e,t){const i=sm(e,n);!function wN(n,e,t){n.setValue(e,t)}(n[ve],i,t)}(i,Qn(),r),rs}function Od(n,e,t){const i=I();return Vn(i,ql(),e)&&Mi(Re(),Et(),i,n,e,i[ve],t,!0),Od}const Ca=void 0;var XY=["en",[["a","p"],["AM","PM"],Ca],[["AM","PM"],Ca,Ca],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ca,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ca,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ca,"{1} 'at' {0}",Ca],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function QY(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let yc={};function Xn(n){const e=function ZY(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=K1(e);if(t)return t;const i=e.split("-")[0];if(t=K1(i),t)return t;if("en"===i)return XY;throw new x(701,!1)}function K1(n){return n in yc||(yc[n]=ut.ng&&ut.ng.common&&ut.ng.common.locales&&ut.ng.common.locales[n]),yc[n]}var V=(()=>((V=V||{})[V.LocaleId=0]="LocaleId",V[V.DayPeriodsFormat=1]="DayPeriodsFormat",V[V.DayPeriodsStandalone=2]="DayPeriodsStandalone",V[V.DaysFormat=3]="DaysFormat",V[V.DaysStandalone=4]="DaysStandalone",V[V.MonthsFormat=5]="MonthsFormat",V[V.MonthsStandalone=6]="MonthsStandalone",V[V.Eras=7]="Eras",V[V.FirstDayOfWeek=8]="FirstDayOfWeek",V[V.WeekendRange=9]="WeekendRange",V[V.DateFormat=10]="DateFormat",V[V.TimeFormat=11]="TimeFormat",V[V.DateTimeFormat=12]="DateTimeFormat",V[V.NumberSymbols=13]="NumberSymbols",V[V.NumberFormats=14]="NumberFormats",V[V.CurrencyCode=15]="CurrencyCode",V[V.CurrencySymbol=16]="CurrencySymbol",V[V.CurrencyName=17]="CurrencyName",V[V.Currencies=18]="Currencies",V[V.Directionality=19]="Directionality",V[V.PluralCase=20]="PluralCase",V[V.ExtraData=21]="ExtraData",V))();const vc="en-US";let Y1=vc;function O0(n,e,t,i,r){if(n=J(n),Array.isArray(n))for(let o=0;o<n.length;o++)O0(n[o],e,t,i,r);else{const o=Re(),s=I();let a=ya(n)?n:J(n.provide),l=rO(n);const c=vn(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(ya(n)||!n.multi){const f=new hd(l,r,y),p=F0(a,e,r?u:u+h,d);-1===p?(yw(pm(c,s),o,a),P0(o,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(f),s.push(f)):(t[p]=f,s[p]=f)}else{const f=F0(a,e,u+h,d),p=F0(a,e,u,u+h),_=p>=0&&t[p];if(r&&!_||!r&&!(f>=0&&t[f])){yw(pm(c,s),o,a);const v=function YQ(n,e,t,i,r){const o=new hd(n,t,y);return o.multi=[],o.index=e,o.componentProviders=0,bP(o,r,i&&!t),o}(r?KQ:GQ,t.length,r,i,l);!r&&_&&(t[p].providerFactory=v),P0(o,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(v),s.push(v)}else P0(o,n,f>-1?f:p,bP(t[r?p:f],l,!r&&i));!r&&i&&_&&t[p].componentProviders++}}}function P0(n,e,t,i){const r=ya(e),o=function cK(n){return!!n.useClass}(e);if(r||o){const l=(o?J(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function bP(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function F0(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function GQ(n,e,t,i){return L0(this.multi,[])}function KQ(n,e,t,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=ha(t,t[B],this.providerFactory.index,i);o=a.slice(0,s),L0(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],L0(r,o);return o}function L0(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function de(n,e=[]){return t=>{t.providersResolver=(i,r)=>function WQ(n,e,t){const i=Re();if(i.firstCreatePass){const r=hr(n);O0(t,i.data,i.blueprint,r,!0),O0(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class bc{}class wP{}class CP extends bc{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new UO(this);const i=Ei(e);this._bootstrapComponents=vo(i.bootstrap),this._r3Injector=yO(e,t,[{provide:bc,useValue:this},{provide:ic,useValue:this.componentFactoryResolver}],rt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class V0 extends wP{constructor(e){super(),this.moduleType=e}create(e){return new CP(this.moduleType,e)}}class XQ extends bc{constructor(e,t,i){super(),this.componentFactoryResolver=new UO(this),this.instance=null;const r=new iO([...e,{provide:bc,useValue:this},{provide:ic,useValue:this.componentFactoryResolver}],t||Am(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Gm(n,e,t=null){return new XQ(n,e,t).injector}let ZQ=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const i=JN(0,t.type),r=i.length>0?Gm([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=P({token:n,providedIn:"environment",factory:()=>new n(D(go))}),n})();function B0(n){n.getStandaloneInjector=e=>e.get(ZQ).getOrCreateStandaloneInjector(n)}function j0(n){return e=>{setTimeout(n,void 0,e)}}const ht=class x9 extends Qe{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=j0(o),r&&(r=j0(r)),s&&(s=j0(s)));const a=super.subscribe({next:r,error:o,complete:s});return e instanceof sn&&e.add(a),a}};function D9(){return this._results[Symbol.iterator]()}class H0{get changes(){return this._changes||(this._changes=new ht)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=H0.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=D9)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function Wi(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function N8(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Cn=(()=>{class n{}return n.__NG_ELEMENT_ID__=T9,n})();const S9=Cn,I9=class extends S9{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e,t){const i=this._declarationTContainer.tView,r=Rm(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,t||null);r[ld]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[Mr];return null!==s&&(r[Mr]=s.createEmbeddedView(i)),u0(i,r,e),new Sd(r)}};function T9(){return Km(vn(),I())}function Km(n,e){return 4&n.type?new I9(e,n,rc(n,e)):null}let Bn=(()=>{class n{}return n.__NG_ELEMENT_ID__=M9,n})();function M9(){return FP(vn(),I())}const A9=Bn,OP=class extends A9{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return rc(this._hostTNode,this._hostLView)}get injector(){return new Gl(this._hostTNode,this._hostLView)}get parentInjector(){const e=_w(this._hostTNode,this._hostLView);if(jR(e)){const t=hm(e,this._hostLView),i=dm(e);return new Gl(t[B].data[i+8],t)}return new Gl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=PP(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Kn}createEmbeddedView(e,t,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const s=e.createEmbeddedView(t||{},o);return this.insert(s,r),s}createComponent(e,t,i,r,o){const s=e&&!function md(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const d=t||{};a=d.index,i=d.injector,r=d.projectableNodes,o=d.environmentInjector||d.ngModuleRef}const l=s?e:new Id(Ke(e)),c=i||this.parentInjector;if(!o&&null==l.ngModule){const h=(s?c:this.parentInjector).get(go,null);h&&(o=h)}const u=l.create(c,r,void 0,o);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[B];if(function t8(n){return dr(n[It])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[It],h=new OP(d,d[On],d[It]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(t),s=this._lContainer;!function w6(n,e,t,i){const r=Kn+i,o=t.length;i>0&&(t[r-1][ur]=e),i<o-Kn?(e[ur]=t[r],JR(t,Kn+i,e)):(t.push(e),e[ur]=null),e[It]=t;const s=e[ld];null!==s&&t!==s&&function C6(n,e){const t=n[jl];e[Pn]!==e[It][It][Pn]&&(n[mR]=!0),null===t?n[jl]=[e]:t.push(e)}(s,e);const a=e[Mr];null!==a&&a.insertView(n),e[ge]|=64}(r,i,s,o);const a=Bw(o,s),l=i[ve],c=wm(l,s[im]);return null!==c&&function y6(n,e,t,i,r,o){i[ho]=r,i[On]=e,wd(n,i,t,1,r,o)}(r,s[On],l,i,c,a),e.attachToViewContainerRef(),JR(z0(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=PP(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=Fw(this._lContainer,t);i&&(gm(z0(this._lContainer),t),EN(i[B],i))}detach(e){const t=this._adjustIndex(e,-1),i=Fw(this._lContainer,t);return i&&null!=gm(z0(this._lContainer),t)?new Sd(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function PP(n){return n[rm]}function z0(n){return n[rm]||(n[rm]=[])}function FP(n,e){let t;const i=e[n.index];if(dr(i))t=i;else{let r;if(8&n.type)r=yn(i);else{const o=e[ve];r=o.createComment("");const s=Di(n,e);ga(o,wm(o,s),r,function S6(n,e){return n.nextSibling(e)}(o,s),!1)}e[n.index]=t=PO(i,e,r,n),Om(e,t)}return new OP(t,n,e)}class $0{constructor(e){this.queryList=e,this.matches=null}clone(){return new $0(this.queryList)}setDirty(){this.queryList.setDirty()}}class q0{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){const s=t.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new q0(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==jP(e,t).matches&&this.queries[t].setDirty()}}class LP{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class W0{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,null!==t?t.push(o):t=[o])}return null!==t?new W0(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class G0{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new G0(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(e,t,k9(t,o)),this.matchTNodeWithReadOption(e,t,mm(t,e,o,!1,!1))}else i===Cn?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,mm(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Me||r===Bn||r===Cn&&4&t.type)this.addMatch(t.index,-2);else{const o=mm(t,e,r,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function k9(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function N9(n,e,t,i){return-1===t?function R9(n,e){return 11&n.type?rc(n,e):4&n.type?Km(n,e):null}(e,n):-2===t?function O9(n,e,t){return t===Me?rc(e,n):t===Cn?Km(e,n):t===Bn?FP(e,n):void 0}(n,e,i):ha(n,n[B],t,e)}function VP(n,e,t,i){const r=e[Mr].queries[i];if(null===r.matches){const o=n.data,s=t.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:N9(e,o[c],s[l+1],t.metadata.read))}r.matches=a}return r.matches}function K0(n,e,t,i){const r=n.queries.getByIndex(t),o=r.matches;if(null!==o){const s=VP(n,e,r,t);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)i.push(s[a/2]);else{const c=o[a+1],u=e[-l];for(let d=Kn;d<u.length;d++){const h=u[d];h[ld]===h[It]&&K0(h[B],h,c,i)}if(null!==u[jl]){const d=u[jl];for(let h=0;h<d.length;h++){const f=d[h];K0(f[B],f,c,i)}}}}}return i}function $e(n){const e=I(),t=Re(),i=kR();cw(i+1);const r=jP(t,i);if(n.dirty&&function e8(n){return 4==(4&n[ge])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const o=r.crossesNgTemplate?K0(t,e,i,[]):VP(t,e,r,i);n.reset(o,bK),n.notifyOnChanges()}return!0}return!1}function Zn(n,e,t){const i=Re();i.firstCreatePass&&(UP(i,new LP(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),BP(i,I(),e)}function En(n,e,t,i){const r=Re();if(r.firstCreatePass){const o=vn();UP(r,new LP(e,t,i),o.index),function F9(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}BP(r,I(),t)}function qe(){return function P9(n,e){return n[Mr].queries[e].queryList}(I(),kR())}function BP(n,e,t){const i=new H0(4==(4&t));MO(n,e,i,i.destroy),null===e[Mr]&&(e[Mr]=new q0),e[Mr].queries.push(new $0(i))}function UP(n,e,t){null===n.queries&&(n.queries=new W0),n.queries.track(new G0(e,t))}function jP(n,e){return n.queries.getByIndex(e)}function HP(n,e){return Km(n,e)}function Qm(...n){}const Xm=new k("Application Initializer");let Zm=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Qm,this.reject=Qm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const o=this.appInits[r]();if(Rd(o))t.push(o);else if(S0(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(D(Xm,8))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zd=new k("AppId",{providedIn:"root",factory:function sF(){return`${eC()}${eC()}${eC()}`}});function eC(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const aF=new k("Platform Initializer"),tC=new k("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Jm=new k("AnimationModuleType");let nX=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Ur=new k("LocaleId",{providedIn:"root",factory:()=>ye(Ur,ee.Optional|ee.SkipSelf)||function iX(){return typeof $localize<"u"&&$localize.locale||vc}()});class oX{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let lF=(()=>{class n{compileModuleSync(t){return new V0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),o=vo(Ei(t).declarations).reduce((s,a)=>{const l=Ke(a);return l&&s.push(new Id(l)),s},[]);return new oX(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lX=(()=>Promise.resolve(0))();function nC(n){typeof Zone>"u"?lX.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class pe{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ht(!1),this.onMicrotaskEmpty=new ht(!1),this.onStable=new ht(!1),this.onError=new ht(!1),typeof Zone>"u")throw new x(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function cX(){let n=ut.requestAnimationFrame,e=ut.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function hX(n){const e=()=>{!function dX(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ut,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,rC(n),n.isCheckStableRunning=!0,iC(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),rC(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,o,s,a)=>{try{return dF(n),t.invokeTask(r,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),hF(n)}},onInvoke:(t,i,r,o,s,a,l)=>{try{return dF(n),t.invoke(r,o,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),hF(n)}},onHasTask:(t,i,r,o)=>{t.hasTask(r,o),i===r&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,rC(n),iC(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,i,r,o)=>(t.handleError(r,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pe.isInAngularZone())throw new x(909,!1)}static assertNotInAngularZone(){if(pe.isInAngularZone())throw new x(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,uX,Qm,Qm);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const uX={};function iC(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function rC(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function dF(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function hF(n){n._nesting--,iC(n)}class fX{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ht,this.onMicrotaskEmpty=new ht,this.onStable=new ht,this.onError=new ht}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const fF=new k(""),eg=new k("");let aC,oC=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,aC||(function pX(n){aC=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pe.assertNotInAngularZone(),nC(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())nC(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(D(pe),D(sC),D(eg))},n.\u0275prov=P({token:n,factory:n.\u0275fac}),n})(),sC=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return aC?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const wo=!1;let os=null;const pF=new k("AllowMultipleToken"),lC=new k("PlatformDestroyListeners"),mF=new k("appBootstrapListener");class gF{constructor(e,t){this.name=e,this.token=t}}function yF(n,e,t=[]){const i=`Platform: ${e}`,r=new k(i);return(o=[])=>{let s=cC();if(!s||s.injector.get(pF,!1)){const a=[...t,...o,{provide:r,useValue:!0}];n?n(a):function _X(n){if(os&&!os.get(pF,!1))throw new x(400,!1);os=n;const e=n.get(bF);(function _F(n){const e=n.get(aF,null);e&&e.forEach(t=>t())})(n)}(function vF(n=[],e){return hi.create({name:e,providers:[{provide:Xw,useValue:"platform"},{provide:lC,useValue:new Set([()=>os=null])},...n]})}(a,i))}return function vX(n){const e=cC();if(!e)throw new x(401,!1);return e}()}}function cC(){return os?.get(bF)??null}let bF=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function CF(n,e){let t;return t="noop"===n?new fX:("zone.js"===n?void 0:n)||new pe(e),t}(i?.ngZone,function wF(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),o=[{provide:pe,useValue:r}];return r.run(()=>{const s=hi.create({providers:o,parent:this.injector,name:t.moduleType.name}),a=t.create(s),l=a.injector.get(yo,null);if(!l)throw new x(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{tg(this._modules,a),c.unsubscribe()})}),function EF(n,e,t){try{const i=t();return Rd(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(l,r,()=>{const c=a.injector.get(Zm);return c.runInitializers(),c.donePromise.then(()=>(function Q1(n){zi(n,"Expected localeId to be defined"),"string"==typeof n&&(Y1=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Ur,vc)||vc),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,i=[]){const r=xF({},i);return function mX(n,e,t){const i=new V0(t);return Promise.resolve(i)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(t){const i=t.injector.get(Ec);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new x(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new x(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(lC,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(D(hi))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function xF(n,e){return Array.isArray(e)?e.reduce(xF,n):{...n,...e}}let Ec=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,i,r){this._zone=t,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new Je(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new Je(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),nC(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=Hb(o,s.pipe(nR()))}bootstrap(t,i){const r=t instanceof oO;if(!this._injector.get(Zm).done){!r&&function Ll(n){const e=Ke(n)||Nn(n)||Gn(n);return null!==e&&e.standalone}(t);throw new x(405,wo)}let s;s=r?t:this._injector.get(ic).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function gX(n){return n.isBoundToModule}(s)?void 0:this._injector.get(bc),c=s.create(hi.NULL,[],i||s.selector,a),u=c.location.nativeElement,d=c.injector.get(fF,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),tg(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new x(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;tg(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(mF,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>tg(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new x(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(D(pe),D(go),D(yo))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let Ea=(()=>{class n{}return n.__NG_ELEMENT_ID__=wX,n})();function wX(n){return function CX(n,e,t){if(ud(n)&&!t){const i=Si(n.index,e);return new Sd(i,i)}return 47&n.type?new Sd(e[Pn],e):null}(vn(),I(),16==(16&n))}const PX=yF(null,"core",[]);let FX=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(D(Ec))},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({}),n})();let pC=null;function Eo(){return pC}class BX{}const Ae=new k("DocumentToken");let mC=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:function(){return function UX(){return D(PF)}()},providedIn:"platform"}),n})();const jX=new k("Location Initialized");let PF=(()=>{class n extends mC{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Eo().getBaseHref(this._doc)}onPopState(t){const i=Eo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Eo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){FF()?this._history.pushState(t,i,r):this._location.hash=r}replaceState(t,i,r){FF()?this._history.replaceState(t,i,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(D(Ae))},n.\u0275prov=P({token:n,factory:function(){return function HX(){return new PF(D(Ae))}()},providedIn:"platform"}),n})();function FF(){return!!window.history.pushState}function gC(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function LF(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function xo(n){return n&&"?"!==n[0]?"?"+n:n}let Da=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:function(){return ye(BF)},providedIn:"root"}),n})();const VF=new k("appBaseHref");let BF=(()=>{class n extends Da{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ye(Ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return gC(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+xo(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){const s=this.prepareExternalUrl(r+xo(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){const s=this.prepareExternalUrl(r+xo(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(D(mC),D(VF,8))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zX=(()=>{class n extends Da{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=gC(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+xo(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+xo(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(D(mC),D(VF,8))},n.\u0275prov=P({token:n,factory:n.\u0275fac}),n})(),rg=(()=>{class n{constructor(t){this._subject=new ht,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function WX(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(LF(UF(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+xo(i))}normalize(t){return n.stripTrailingSlash(function qX(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,UF(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xo(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xo(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=xo,n.joinWithSlash=gC,n.stripTrailingSlash=LF,n.\u0275fac=function(t){return new(t||n)(D(Da))},n.\u0275prov=P({token:n,factory:function(){return function $X(){return new rg(D(Da))}()},providedIn:"root"}),n})();function UF(n){return n.replace(/\/index.html$/,"")}var Bt=(()=>((Bt=Bt||{})[Bt.Format=0]="Format",Bt[Bt.Standalone=1]="Standalone",Bt))(),De=(()=>((De=De||{})[De.Narrow=0]="Narrow",De[De.Abbreviated=1]="Abbreviated",De[De.Wide=2]="Wide",De[De.Short=3]="Short",De))(),xt=(()=>((xt=xt||{})[xt.Short=0]="Short",xt[xt.Medium=1]="Medium",xt[xt.Long=2]="Long",xt[xt.Full=3]="Full",xt))(),X=(()=>((X=X||{})[X.Decimal=0]="Decimal",X[X.Group=1]="Group",X[X.List=2]="List",X[X.PercentSign=3]="PercentSign",X[X.PlusSign=4]="PlusSign",X[X.MinusSign=5]="MinusSign",X[X.Exponential=6]="Exponential",X[X.SuperscriptingExponent=7]="SuperscriptingExponent",X[X.PerMille=8]="PerMille",X[X.Infinity=9]="Infinity",X[X.NaN=10]="NaN",X[X.TimeSeparator=11]="TimeSeparator",X[X.CurrencyDecimal=12]="CurrencyDecimal",X[X.CurrencyGroup=13]="CurrencyGroup",X))();function og(n,e){return Yi(Xn(n)[V.DateFormat],e)}function sg(n,e){return Yi(Xn(n)[V.TimeFormat],e)}function ag(n,e){return Yi(Xn(n)[V.DateTimeFormat],e)}function Ki(n,e){const t=Xn(n),i=t[V.NumberSymbols][e];if(typeof i>"u"){if(e===X.CurrencyDecimal)return t[V.NumberSymbols][X.Decimal];if(e===X.CurrencyGroup)return t[V.NumberSymbols][X.Group]}return i}function HF(n){if(!n[V.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[V.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Yi(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function yC(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const oZ=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,qd={},sZ=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var en=(()=>((en=en||{})[en.Short=0]="Short",en[en.ShortGMT=1]="ShortGMT",en[en.Long=2]="Long",en[en.Extended=3]="Extended",en))(),ne=(()=>((ne=ne||{})[ne.FullYear=0]="FullYear",ne[ne.Month=1]="Month",ne[ne.Date=2]="Date",ne[ne.Hours=3]="Hours",ne[ne.Minutes=4]="Minutes",ne[ne.Seconds=5]="Seconds",ne[ne.FractionalSeconds=6]="FractionalSeconds",ne[ne.Day=7]="Day",ne))(),_e=(()=>((_e=_e||{})[_e.DayPeriods=0]="DayPeriods",_e[_e.Days=1]="Days",_e[_e.Months=2]="Months",_e[_e.Eras=3]="Eras",_e))();function aZ(n,e,t,i){let r=function gZ(n){if(qF(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,o=1,s=1]=n.split("-").map(a=>+a);return lg(r,o-1,s)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(oZ))return function _Z(n){const e=new Date(0);let t=0,i=0;const r=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const s=Number(n[4]||0)-t,a=Number(n[5]||0)-i,l=Number(n[6]||0),c=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return o.call(e,s,a,l,c),e}(i)}const e=new Date(n);if(!qF(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Do(t,e)||e;let a,s=[];for(;e;){if(a=sZ.exec(e),!a){s.push(e);break}{s=s.concat(a.slice(1));const u=s.pop();if(!u)break;e=u}}let l=r.getTimezoneOffset();i&&(l=$F(i,l),r=function mZ(n,e,t){const i=t?-1:1,r=n.getTimezoneOffset();return function pZ(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,i*($F(e,r)-r))}(r,i,!0));let c="";return s.forEach(u=>{const d=function fZ(n){if(bC[n])return bC[n];let e;switch(n){case"G":case"GG":case"GGG":e=at(_e.Eras,De.Abbreviated);break;case"GGGG":e=at(_e.Eras,De.Wide);break;case"GGGGG":e=at(_e.Eras,De.Narrow);break;case"y":e=Gt(ne.FullYear,1,0,!1,!0);break;case"yy":e=Gt(ne.FullYear,2,0,!0,!0);break;case"yyy":e=Gt(ne.FullYear,3,0,!1,!0);break;case"yyyy":e=Gt(ne.FullYear,4,0,!1,!0);break;case"Y":e=hg(1);break;case"YY":e=hg(2,!0);break;case"YYY":e=hg(3);break;case"YYYY":e=hg(4);break;case"M":case"L":e=Gt(ne.Month,1,1);break;case"MM":case"LL":e=Gt(ne.Month,2,1);break;case"MMM":e=at(_e.Months,De.Abbreviated);break;case"MMMM":e=at(_e.Months,De.Wide);break;case"MMMMM":e=at(_e.Months,De.Narrow);break;case"LLL":e=at(_e.Months,De.Abbreviated,Bt.Standalone);break;case"LLLL":e=at(_e.Months,De.Wide,Bt.Standalone);break;case"LLLLL":e=at(_e.Months,De.Narrow,Bt.Standalone);break;case"w":e=vC(1);break;case"ww":e=vC(2);break;case"W":e=vC(1,!0);break;case"d":e=Gt(ne.Date,1);break;case"dd":e=Gt(ne.Date,2);break;case"c":case"cc":e=Gt(ne.Day,1);break;case"ccc":e=at(_e.Days,De.Abbreviated,Bt.Standalone);break;case"cccc":e=at(_e.Days,De.Wide,Bt.Standalone);break;case"ccccc":e=at(_e.Days,De.Narrow,Bt.Standalone);break;case"cccccc":e=at(_e.Days,De.Short,Bt.Standalone);break;case"E":case"EE":case"EEE":e=at(_e.Days,De.Abbreviated);break;case"EEEE":e=at(_e.Days,De.Wide);break;case"EEEEE":e=at(_e.Days,De.Narrow);break;case"EEEEEE":e=at(_e.Days,De.Short);break;case"a":case"aa":case"aaa":e=at(_e.DayPeriods,De.Abbreviated);break;case"aaaa":e=at(_e.DayPeriods,De.Wide);break;case"aaaaa":e=at(_e.DayPeriods,De.Narrow);break;case"b":case"bb":case"bbb":e=at(_e.DayPeriods,De.Abbreviated,Bt.Standalone,!0);break;case"bbbb":e=at(_e.DayPeriods,De.Wide,Bt.Standalone,!0);break;case"bbbbb":e=at(_e.DayPeriods,De.Narrow,Bt.Standalone,!0);break;case"B":case"BB":case"BBB":e=at(_e.DayPeriods,De.Abbreviated,Bt.Format,!0);break;case"BBBB":e=at(_e.DayPeriods,De.Wide,Bt.Format,!0);break;case"BBBBB":e=at(_e.DayPeriods,De.Narrow,Bt.Format,!0);break;case"h":e=Gt(ne.Hours,1,-12);break;case"hh":e=Gt(ne.Hours,2,-12);break;case"H":e=Gt(ne.Hours,1);break;case"HH":e=Gt(ne.Hours,2);break;case"m":e=Gt(ne.Minutes,1);break;case"mm":e=Gt(ne.Minutes,2);break;case"s":e=Gt(ne.Seconds,1);break;case"ss":e=Gt(ne.Seconds,2);break;case"S":e=Gt(ne.FractionalSeconds,1);break;case"SS":e=Gt(ne.FractionalSeconds,2);break;case"SSS":e=Gt(ne.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=ug(en.Short);break;case"ZZZZZ":e=ug(en.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=ug(en.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=ug(en.Long);break;default:return null}return bC[n]=e,e}(u);c+=d?d(r,t,l):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function lg(n,e,t){const i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function Do(n,e){const t=function GX(n){return Xn(n)[V.LocaleId]}(n);if(qd[t]=qd[t]||{},qd[t][e])return qd[t][e];let i="";switch(e){case"shortDate":i=og(n,xt.Short);break;case"mediumDate":i=og(n,xt.Medium);break;case"longDate":i=og(n,xt.Long);break;case"fullDate":i=og(n,xt.Full);break;case"shortTime":i=sg(n,xt.Short);break;case"mediumTime":i=sg(n,xt.Medium);break;case"longTime":i=sg(n,xt.Long);break;case"fullTime":i=sg(n,xt.Full);break;case"short":const r=Do(n,"shortTime"),o=Do(n,"shortDate");i=cg(ag(n,xt.Short),[r,o]);break;case"medium":const s=Do(n,"mediumTime"),a=Do(n,"mediumDate");i=cg(ag(n,xt.Medium),[s,a]);break;case"long":const l=Do(n,"longTime"),c=Do(n,"longDate");i=cg(ag(n,xt.Long),[l,c]);break;case"full":const u=Do(n,"fullTime"),d=Do(n,"fullDate");i=cg(ag(n,xt.Full),[u,d])}return i&&(qd[t][e]=i),i}function cg(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return null!=e&&i in e?e[i]:t})),n}function _r(n,e,t="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return i&&(s=s.slice(s.length-e)),o+s}function Gt(n,e,t=0,i=!1,r=!1){return function(o,s){let a=function cZ(n,e){switch(n){case ne.FullYear:return e.getFullYear();case ne.Month:return e.getMonth();case ne.Date:return e.getDate();case ne.Hours:return e.getHours();case ne.Minutes:return e.getMinutes();case ne.Seconds:return e.getSeconds();case ne.FractionalSeconds:return e.getMilliseconds();case ne.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,o);if((t>0||a>-t)&&(a+=t),n===ne.Hours)0===a&&-12===t&&(a=12);else if(n===ne.FractionalSeconds)return function lZ(n,e){return _r(n,3).substring(0,e)}(a,e);const l=Ki(s,X.MinusSign);return _r(a,e,l,i,r)}}function at(n,e,t=Bt.Format,i=!1){return function(r,o){return function uZ(n,e,t,i,r,o){switch(t){case _e.Months:return function QX(n,e,t){const i=Xn(n),o=Yi([i[V.MonthsFormat],i[V.MonthsStandalone]],e);return Yi(o,t)}(e,r,i)[n.getMonth()];case _e.Days:return function YX(n,e,t){const i=Xn(n),o=Yi([i[V.DaysFormat],i[V.DaysStandalone]],e);return Yi(o,t)}(e,r,i)[n.getDay()];case _e.DayPeriods:const s=n.getHours(),a=n.getMinutes();if(o){const c=function eZ(n){const e=Xn(n);return HF(e),(e[V.ExtraData][2]||[]).map(i=>"string"==typeof i?yC(i):[yC(i[0]),yC(i[1])])}(e),u=function tZ(n,e,t){const i=Xn(n);HF(i);const o=Yi([i[V.ExtraData][0],i[V.ExtraData][1]],e)||[];return Yi(o,t)||[]}(e,r,i),d=c.findIndex(h=>{if(Array.isArray(h)){const[f,p]=h,g=s>=f.hours&&a>=f.minutes,_=s<p.hours||s===p.hours&&a<p.minutes;if(f.hours<p.hours){if(g&&_)return!0}else if(g||_)return!0}else if(h.hours===s&&h.minutes===a)return!0;return!1});if(-1!==d)return u[d]}return function KX(n,e,t){const i=Xn(n),o=Yi([i[V.DayPeriodsFormat],i[V.DayPeriodsStandalone]],e);return Yi(o,t)}(e,r,i)[s<12?0:1];case _e.Eras:return function XX(n,e){return Yi(Xn(n)[V.Eras],e)}(e,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(r,o,n,e,t,i)}}function ug(n){return function(e,t,i){const r=-1*i,o=Ki(t,X.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case en.Short:return(r>=0?"+":"")+_r(s,2,o)+_r(Math.abs(r%60),2,o);case en.ShortGMT:return"GMT"+(r>=0?"+":"")+_r(s,1,o);case en.Long:return"GMT"+(r>=0?"+":"")+_r(s,2,o)+":"+_r(Math.abs(r%60),2,o);case en.Extended:return 0===i?"Z":(r>=0?"+":"")+_r(s,2,o)+":"+_r(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}const dZ=0,dg=4;function zF(n){return lg(n.getFullYear(),n.getMonth(),n.getDate()+(dg-n.getDay()))}function vC(n,e=!1){return function(t,i){let r;if(e){const o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();r=1+Math.floor((s+o)/7)}else{const o=zF(t),s=function hZ(n){const e=lg(n,dZ,1).getDay();return lg(n,0,1+(e<=dg?dg:dg+7)-e)}(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return _r(r,n,Ki(i,X.MinusSign))}}function hg(n,e=!1){return function(t,i){return _r(zF(t).getFullYear(),n,Ki(i,X.MinusSign),e)}}const bC={};function $F(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function qF(n){return n instanceof Date&&!isNaN(n.valueOf())}let pg=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new PZ,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){JF("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){JF("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(y(Bn),y(Cn))},n.\u0275dir=M({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class PZ{constructor(){this.$implicit=null,this.ngIf=null}}function JF(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${rt(e)}'.`)}class IC{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let mg=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const i of this._defaultViews)i.enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=M({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),eL=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new IC(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(y(Bn),y(Cn),y(mg,9))},n.\u0275dir=M({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),nL=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:o,ngTemplateOutletInjector:s}=this;this._viewRef=i.createEmbeddedView(r,o,s?{injector:s}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(y(Bn))},n.\u0275dir=M({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Fn]}),n})();const YZ=new k("DATE_PIPE_DEFAULT_TIMEZONE"),QZ=new k("DATE_PIPE_DEFAULT_OPTIONS");let iL=(()=>{class n{constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,o){if(null==t||""===t||t!=t)return null;try{return aZ(t,i??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,r??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(s){throw function yr(n,e){return new x(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(y(Ur,16),y(YZ,24),y(QZ,24))},n.\u0275pipe=ci({name:"date",type:n,pure:!0,standalone:!0}),n})(),Sa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({}),n})();const oL="browser";let uJ=(()=>{class n{}return n.\u0275prov=P({token:n,providedIn:"root",factory:()=>new dJ(D(Ae),window)}),n})();class dJ{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function hJ(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=sL(this.window.history)||sL(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function sL(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class UJ extends BX{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class RC extends UJ{static makeCurrent(){!function VX(n){pC||(pC=n)}(new RC)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function jJ(){return Kd=Kd||document.querySelector("base"),Kd?Kd.getAttribute("href"):null}();return null==t?null:function HJ(n){yg=yg||document.createElement("a"),yg.setAttribute("href",n);const e=yg.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Kd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function MZ(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,o]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let yg,Kd=null;const dL=new k("TRANSITION_ID"),$J=[{provide:Xm,useFactory:function zJ(n,e,t){return()=>{t.get(Zm).donePromise.then(()=>{const i=Eo(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<r.length;o++)i.remove(r[o])})}},deps:[dL,Ae,hi],multi:!0}];let WJ=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:n.\u0275fac}),n})();const vg=new k("EventManagerPlugins");let bg=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let o=0;o<r.length;o++){const s=r[o];if(s.supports(t))return this._eventNameToPlugin.set(t,s),s}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(D(vg),D(pe))},n.\u0275prov=P({token:n,factory:n.\u0275fac}),n})();class hL{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=Eo().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let fL=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,i){const r=this.usageCount;let o=r.get(t)??0;return o+=i,o>0?r.set(t,o):r.delete(t),o}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:n.\u0275fac}),n})(),Yd=(()=>{class n extends fL{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.forEach(o=>o.remove()),i.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,i){const r=this.doc.createElement("style");r.textContent=i,t.appendChild(r);const o=this.styleRef.get(i);o?o.push(r):this.styleRef.set(i,[r])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(D(Ae))},n.\u0275prov=P({token:n,factory:n.\u0275fac}),n})();const NC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},OC=/%COMP%/g,gL=new k("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function _L(n,e){return e.flat(100).map(t=>t.replace(OC,n))}function yL(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let wg=(()=>{class n{constructor(t,i,r,o){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestory=o,this.rendererByCompId=new Map,this.defaultRenderer=new PC(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;const r=this.getOrCreateRenderer(t,i);return r instanceof wL?r.applyToHost(t):r instanceof FC&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const s=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(i.encapsulation){case cr.Emulated:o=new wL(s,a,i,this.appId,l);break;case cr.ShadowDom:return new JJ(s,a,t,i);default:o=new FC(s,a,i,l)}o.onDestroy=()=>r.delete(i.id),r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(D(bg),D(Yd),D(zd),D(gL))},n.\u0275prov=P({token:n,factory:n.\u0275fac}),n})();class PC{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(NC[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(bL(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(bL(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const o=NC[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=NC[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(ui.DashCase|ui.Important)?e.style.setProperty(t,i,r&ui.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&ui.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,yL(i)):this.eventManager.addEventListener(e,t,yL(i))}}function bL(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class JJ extends PC{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=_L(r.id,r.styles);for(const s of o){const a=document.createElement("style");a.textContent=s,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class FC extends PC{constructor(e,t,i,r,o=i.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=_L(o,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class wL extends FC{constructor(e,t,i,r,o){const s=r+"-"+i.id;super(e,t,i,o,s),this.contentAttr=function QJ(n){return"_ngcontent-%COMP%".replace(OC,n)}(s),this.hostAttr=function XJ(n){return"_nghost-%COMP%".replace(OC,n)}(s)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let eee=(()=>{class n extends hL{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(D(Ae))},n.\u0275prov=P({token:n,factory:n.\u0275fac}),n})();const CL=["alt","control","meta","shift"],tee={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nee={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let iee=(()=>{class n extends hL{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Eo().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),CL.forEach(c=>{const u=i.indexOf(c);u>-1&&(i.splice(u,1),s+=c+".")}),s+=o,0!=i.length||0===o.length)return null;const l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(t,i){let r=tee[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),CL.forEach(s=>{s!==r&&(0,nee[s])(t)&&(o+=s+".")}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(D(Ae))},n.\u0275prov=P({token:n,factory:n.\u0275fac}),n})();const xL=[{provide:tC,useValue:oL},{provide:aF,useValue:function ree(){RC.makeCurrent()},multi:!0},{provide:Ae,useFactory:function see(){return function O6(n){zw=n}(document),document},deps:[]}],aee=yF(PX,"browser",xL),DL=new k(""),SL=[{provide:eg,useClass:class qJ{addToWindow(e){ut.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new Error("Could not find testability for element.");return o},ut.getAllAngularTestabilities=()=>e.getAllTestabilities(),ut.getAllAngularRootElements=()=>e.getAllRootElements(),ut.frameworkStabilizers||(ut.frameworkStabilizers=[]),ut.frameworkStabilizers.push(i=>{const r=ut.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(l){s=s||l,o--,0==o&&i(s)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Eo().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:fF,useClass:oC,deps:[pe,sC,eg]},{provide:oC,useClass:oC,deps:[pe,sC,eg]}],IL=[{provide:Xw,useValue:"root"},{provide:yo,useFactory:function oee(){return new yo},deps:[]},{provide:vg,useClass:eee,multi:!0,deps:[Ae,pe,tC]},{provide:vg,useClass:iee,multi:!0,deps:[Ae]},{provide:wg,useClass:wg,deps:[bg,Yd,zd,gL]},{provide:xd,useExisting:wg},{provide:fL,useExisting:Yd},{provide:Yd,useClass:Yd,deps:[Ae]},{provide:bg,useClass:bg,deps:[vg,pe]},{provide:class fJ{},useClass:WJ,deps:[]},[]];let TL=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:zd,useValue:t.appId},{provide:dL,useExisting:zd},$J]}}}return n.\u0275fac=function(t){return new(t||n)(D(DL,12))},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({providers:[...IL,...SL],imports:[Sa,FX]}),n})(),ML=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(D(Ae))},n.\u0275prov=P({token:n,factory:function(t){let i=null;return i=t?new t:function cee(){return new ML(D(Ae))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let BC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:function(t){let i=null;return i=t?new(t||n):D(RL),i},providedIn:"root"}),n})(),RL=(()=>{class n extends BC{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case ze.NONE:return i;case ze.HTML:return Nr(i,"HTML")?Ti(i):WN(this._doc,String(i)).toString();case ze.STYLE:return Nr(i,"Style")?Ti(i):i;case ze.SCRIPT:if(Nr(i,"Script"))return Ti(i);throw new Error("unsafe value used in a script context");case ze.URL:return Nr(i,"URL")?Ti(i):Sm(String(i));case ze.RESOURCE_URL:if(Nr(i,"ResourceURL"))return Ti(i);throw new Error(`unsafe value used in a resource URL context (see ${Gp})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${Gp})`)}}bypassSecurityTrustHtml(t){return function j6(n){return new P6(n)}(t)}bypassSecurityTrustStyle(t){return function H6(n){return new F6(n)}(t)}bypassSecurityTrustScript(t){return function z6(n){return new L6(n)}(t)}bypassSecurityTrustUrl(t){return function $6(n){return new V6(n)}(t)}bypassSecurityTrustResourceUrl(t){return function q6(n){return new B6(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(D(Ae))},n.\u0275prov=P({token:n,factory:function(t){let i=null;return i=t?new t:function pee(n){return new RL(n.get(Ae))}(D(hi)),i},providedIn:"root"}),n})();function z(...n){return Ft(n,nd(n))}class Qi extends Qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const Cg=Ab(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:mee}=Array,{getPrototypeOf:gee,prototype:_ee,keys:yee}=Object;function NL(n){if(1===n.length){const e=n[0];if(mee(e))return{args:e,keys:null};if(function vee(n){return n&&"object"==typeof n&&gee(n)===_ee}(e)){const t=yee(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:bee}=Array;function UC(n){return oe(e=>function wee(n,e){return bee(e)?n(...e):n(e)}(n,e))}function OL(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function jC(...n){const e=nd(n),t=Zk(n),{args:i,keys:r}=NL(n);if(0===i.length)return Ft([],e);const o=new Je(function Cee(n,e,t=aa){return i=>{PL(e,()=>{const{length:r}=n,o=new Array(r);let s=r,a=r;for(let l=0;l<r;l++)PL(e,()=>{const c=Ft(n[l],e);let u=!1;c.subscribe(Ct(i,d=>{o[l]=d,u||(u=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,e,r?s=>OL(r,s):aa));return t?o.pipe(UC(t)):o}function PL(n,e,t){n?lo(t,n,e):e()}function Eg(...n){return function Eee(){return Pl(1)}()(Ft(n,nd(n)))}function FL(n){return new Je(e=>{Wn(n()).subscribe(e)})}function Dc(n,e){const t=Be(n)?n:()=>n,i=r=>r.error(t());return new Je(e?r=>e.schedule(i,0,r):i)}function HC(){return Pt((n,e)=>{let t=null;n._refCount++;const i=Ct(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class zC extends Je{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Vk(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new sn;const t=this.getSubject();e.add(this.source.subscribe(Ct(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=sn.EMPTY)}return e}refCount(){return HC()(this)}}function jr(n,e){return Pt((t,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();t.subscribe(Ct(i,l=>{r?.unsubscribe();let c=0;const u=o++;Wn(n(l,u)).subscribe(r=Ct(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Hr(n){return n<=0?()=>lr:Pt((e,t)=>{let i=0;e.subscribe(Ct(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function $C(...n){const e=nd(n);return Pt((t,i)=>{(e?Eg(n,t,e):Eg(n,t)).subscribe(i)})}function Xi(n,e){return Pt((t,i)=>{let r=0;t.subscribe(Ct(i,o=>n.call(e,o,r++)&&i.next(o)))})}function xg(n){return Pt((e,t)=>{let i=!1;e.subscribe(Ct(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function LL(n=xee){return Pt((e,t)=>{let i=!1;e.subscribe(Ct(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function xee(){return new Cg}function as(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Xi((r,o)=>n(r,o,i)):aa,Hr(1),t?xg(e):LL(()=>new Cg))}function ls(n,e){return Be(e)?an(n,e,1):an(n,1)}function tn(n,e,t){const i=Be(n)||e||t?{next:n,error:e,complete:t}:n;return i?Pt((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(Ct(o,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),o.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),o.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),o.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):aa}function So(n){return Pt((e,t)=>{let o,i=null,r=!1;i=e.subscribe(Ct(t,void 0,void 0,s=>{o=Wn(n(s,So(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function VL(n,e){return Pt(function Dee(n,e,t,i,r){return(o,s)=>{let a=t,l=e,c=0;o.subscribe(Ct(s,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}(n,e,arguments.length>=2,!0))}function qC(n){return n<=0?()=>lr:Pt((e,t)=>{let i=[];e.subscribe(Ct(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function BL(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Xi((r,o)=>n(r,o,i)):aa,qC(1),t?xg(e):LL(()=>new Cg))}function Dg(n){return Pt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const he="primary",Qd=Symbol("RouteTitle");class Tee{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Sc(n){return new Tee(n)}function Mee(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let o=0;o<i.length;o++){const s=i[o],a=n[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function zr(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!UL(n[r],e[r]))return!1;return!0}function UL(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}return n===e}function jL(n){return Array.prototype.concat.apply([],n)}function HL(n){return n.length>0?n[n.length-1]:null}function xn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function cs(n){return S0(n)?n:Rd(n)?Ft(Promise.resolve(n)):z(n)}const Sg=!1,kee={exact:function qL(n,e,t){if(!Ia(n.segments,e.segments)||!Ig(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!qL(n.children[i],e.children[i],t))return!1;return!0},subset:WL},zL={exact:function Ree(n,e){return zr(n,e)},subset:function Nee(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>UL(n[t],e[t]))},ignored:()=>!0};function $L(n,e,t){return kee[t.paths](n.root,e.root,t.matrixParams)&&zL[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function WL(n,e,t){return GL(n,e,e.segments,t)}function GL(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Ia(r,t)||e.hasChildren()||!Ig(r,t,i))}if(n.segments.length===t.length){if(!Ia(n.segments,t)||!Ig(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!WL(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Ia(n.segments,r)&&Ig(n.segments,r,i)&&n.children[he])&&GL(n.children[he],e,o,i)}}function Ig(n,e,t){return e.every((i,r)=>zL[t](n[r].parameters,i.parameters))}class us{constructor(e=new Ce([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sc(this.queryParams)),this._queryParamMap}toString(){return Fee.serialize(this)}}class Ce{constructor(e,t){this.segments=e,this.children=t,this.parent=null,xn(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Tg(this)}}class Xd{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Sc(this.parameters)),this._parameterMap}toString(){return QL(this)}}function Ia(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let Zd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:function(){return new WC},providedIn:"root"}),n})();class WC{parse(e){const t=new qee(e);return new us(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Jd(e.root,!0)}`,i=function Bee(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${Mg(t)}=${Mg(r)}`).join("&"):`${Mg(t)}=${Mg(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function Lee(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Fee=new WC;function Tg(n){return n.segments.map(e=>QL(e)).join("/")}function Jd(n,e){if(!n.hasChildren())return Tg(n);if(e){const t=n.children[he]?Jd(n.children[he],!1):"",i=[];return xn(n.children,(r,o)=>{o!==he&&i.push(`${o}:${Jd(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function Pee(n,e){let t=[];return xn(n.children,(i,r)=>{r===he&&(t=t.concat(e(i,r)))}),xn(n.children,(i,r)=>{r!==he&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===he?[Jd(n.children[he],!1)]:[`${r}:${Jd(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[he]?`${Tg(n)}/${t[0]}`:`${Tg(n)}/(${t.join("//")})`}}function KL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Mg(n){return KL(n).replace(/%3B/gi,";")}function GC(n){return KL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ag(n){return decodeURIComponent(n)}function YL(n){return Ag(n.replace(/\+/g,"%20"))}function QL(n){return`${GC(n.path)}${function Vee(n){return Object.keys(n).map(e=>`;${GC(e)}=${GC(n[e])}`).join("")}(n.parameters)}`}const Uee=/^[^\/()?;=#]+/;function kg(n){const e=n.match(Uee);return e?e[0]:""}const jee=/^[^=?&#]+/,zee=/^[^&#]+/;class qee{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ce([],{}):new Ce([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[he]=new Ce(e,t)),i}parseSegment(){const e=kg(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new x(4009,Sg);return this.capture(e),new Xd(Ag(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=kg(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=kg(this.remaining);r&&(i=r,this.capture(i))}e[Ag(t)]=Ag(i)}parseQueryParam(e){const t=function Hee(n){const e=n.match(jee);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const s=function $ee(n){const e=n.match(zee);return e?e[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const r=YL(t),o=YL(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=kg(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new x(4010,Sg);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=he);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[he]:new Ce([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new x(4011,Sg)}}function KC(n){return n.segments.length>0?new Ce([],{[he]:n}):n}function Rg(n){const e={};for(const i of Object.keys(n.children)){const o=Rg(n.children[i]);(o.segments.length>0||o.hasChildren())&&(e[i]=o)}return function Wee(n){if(1===n.numberOfChildren&&n.children[he]){const e=n.children[he];return new Ce(n.segments.concat(e.segments),e.children)}return n}(new Ce(n.segments,e))}function Ta(n){return n instanceof us}const YC=!1;function Gee(n,e,t,i,r){if(0===t.length)return Ic(e.root,e.root,e.root,i,r);const o=function tV(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new eV(!0,0,n);let e=0,t=!1;const i=n.reduce((r,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return xn(o.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,o]},[]);return new eV(t,e,i)}(t);return o.toRoot()?Ic(e.root,e.root,new Ce([],{}),i,r):function s(l){const c=function Yee(n,e,t,i){if(n.isAbsolute)return new Tc(e.root,!0,0);if(-1===i)return new Tc(t,t===e.root,0);return function nV(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new x(4005,YC&&"Invalid number of '../'");r=i.segments.length}return new Tc(i,!1,r-o)}(t,i+(eh(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,l),u=c.processChildren?Mc(c.segmentGroup,c.index,o.commands):QC(c.segmentGroup,c.index,o.commands);return Ic(e.root,c.segmentGroup,u,i,r)}(n.snapshot?._lastPathIndex)}function eh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function th(n){return"object"==typeof n&&null!=n&&n.outlets}function Ic(n,e,t,i,r){let s,o={};i&&xn(i,(l,c)=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=n===e?t:JL(n,e,t);const a=KC(Rg(s));return new us(a,o,r)}function JL(n,e,t){const i={};return xn(n.children,(r,o)=>{i[o]=r===e?t:JL(r,e,t)}),new Ce(n.segments,i)}class eV{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&eh(i[0]))throw new x(4003,YC&&"Root segment cannot have matrix parameters");const r=i.find(th);if(r&&r!==HL(i))throw new x(4004,YC&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Tc{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function QC(n,e,t){if(n||(n=new Ce([],{})),0===n.segments.length&&n.hasChildren())return Mc(n,e,t);const i=function Xee(n,e,t){let i=0,r=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;const s=n.segments[r],a=t[i];if(th(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!rV(l,c,s))return o;i+=2}else{if(!rV(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const o=new Ce(n.segments.slice(0,i.pathIndex),{});return o.children[he]=new Ce(n.segments.slice(i.pathIndex),n.children),Mc(o,0,r)}return i.match&&0===r.length?new Ce(n.segments,{}):i.match&&!n.hasChildren()?XC(n,e,t):i.match?Mc(n,0,r):XC(n,e,t)}function Mc(n,e,t){if(0===t.length)return new Ce(n.segments,{});{const i=function Qee(n){return th(n[0])?n[0].outlets:{[he]:n}}(t),r={};return!i[he]&&n.children[he]&&1===n.numberOfChildren&&0===n.children[he].segments.length?Mc(n.children[he],e,t):(xn(i,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=QC(n.children[s],e,o))}),xn(n.children,(o,s)=>{void 0===i[s]&&(r[s]=o)}),new Ce(n.segments,r))}}function XC(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const o=t[r];if(th(o)){const l=Zee(o.outlets);return new Ce(i,l)}if(0===r&&eh(t[0])){i.push(new Xd(n.segments[e].path,iV(t[0]))),r++;continue}const s=th(o)?o.outlets[he]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&eh(a)?(i.push(new Xd(s,iV(a))),r+=2):(i.push(new Xd(s,{})),r++)}return new Ce(i,{})}function Zee(n){const e={};return xn(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=XC(new Ce([],{}),0,t))}),e}function iV(n){const e={};return xn(n,(t,i)=>e[i]=`${t}`),e}function rV(n,e,t){return n==t.path&&zr(e,t.parameters)}const nh="imperative";class $r{constructor(e,t){this.id=e,this.url=t}}class ZC extends $r{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ma extends $r{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ng extends $r{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Og extends $r{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class JC extends $r{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Jee extends $r{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ete extends $r{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tte extends $r{constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class nte extends $r{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ite extends $r{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rte{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ote{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ste{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ate{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lte{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cte{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oV{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let hte=(()=>{class n{createUrlTree(t,i,r,o,s,a){return Gee(t||i.root,r,o,s,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:n.\u0275fac}),n})(),pte=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:function(e){return hte.\u0275fac(e)},providedIn:"root"}),n})();class sV{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=eE(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=eE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=tE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return tE(e,this._root).map(t=>t.value)}}function eE(n,e){if(n===e.value)return e;for(const t of e.children){const i=eE(n,t);if(i)return i}return null}function tE(n,e){if(n===e.value)return[e];for(const t of e.children){const i=tE(n,t);if(i.length)return i.unshift(e),i}return[]}class Io{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ac(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class aV extends sV{constructor(e,t){super(e),this.snapshot=t,nE(this,e)}toString(){return this.snapshot.toString()}}function lV(n,e){const t=function mte(n,e){const s=new Pg([],{},{},"",{},he,e,null,n.root,-1,{});return new uV("",new Io(s,[]))}(n,e),i=new Qi([new Xd("",{})]),r=new Qi({}),o=new Qi({}),s=new Qi({}),a=new Qi(""),l=new kc(i,r,s,a,o,he,e,t.root);return l.snapshot=t.root,new aV(new Io(l,[]),t)}class kc{constructor(e,t,i,r,o,s,a,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.pipe(oe(c=>c[Qd]))??z(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(oe(e=>Sc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(oe(e=>Sc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function cV(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],o=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function gte(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Pg{get title(){return this.data?.[Qd]}constructor(e,t,i,r,o,s,a,l,c,u,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Sc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class uV extends sV{constructor(e,t){super(t),this.url=e,nE(this,t)}toString(){return dV(this._root)}}function nE(n,e){e.value._routerState=n,e.children.forEach(t=>nE(n,t))}function dV(n){const e=n.children.length>0?` { ${n.children.map(dV).join(", ")} } `:"";return`${n.value}${e}`}function iE(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,zr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),zr(e.params,t.params)||n.params.next(t.params),function Aee(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!zr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),zr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function rE(n,e){const t=zr(n.params,e.params)&&function Oee(n,e){return Ia(n,e)&&n.every((t,i)=>zr(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||rE(n.parent,e.parent))}function ih(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function yte(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ih(n,i,r);return ih(n,i)})}(n,e,t);return new Io(i,r)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ih(n,a)),s}}const i=function vte(n){return new kc(new Qi(n.url),new Qi(n.params),new Qi(n.queryParams),new Qi(n.fragment),new Qi(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(o=>ih(n,o));return new Io(i,r)}}const oE="ngNavigationCancelingError";function hV(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=Ta(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=fV(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function fV(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[oE]=!0,i.cancellationCode=e,t&&(i.url=t),i}function pV(n){return mV(n)&&Ta(n.url)}function mV(n){return n&&n[oE]}class bte{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new rh,this.attachRef=null}}let rh=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new bte,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Fg=!1;let gV=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=he,this.activateEvents=new ht,this.deactivateEvents=new ht,this.attachEvents=new ht,this.detachEvents=new ht,this.parentContexts=ye(rh),this.location=ye(Bn),this.changeDetector=ye(Ea),this.environmentInjector=ye(go)}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new x(4012,Fg);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new x(4012,Fg);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new x(4012,Fg);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new x(4013,Fg);this._activatedRoute=t;const r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new wte(t,a,r.injector);if(i&&function Cte(n){return!!n.resolveComponentFactory}(i)){const c=i.resolveComponentFactory(s);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=M({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Fn]}),n})();class wte{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===kc?this.route:e===rh?this.childContexts:this.parent.get(e,t)}}let sE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=st({type:n,selectors:[["ng-component"]],standalone:!0,features:[B0],decls:1,vars:0,template:function(t,i){1&t&&bn(0,"router-outlet")},dependencies:[gV],encapsulation:2}),n})();function _V(n,e){return n.providers&&!n._injector&&(n._injector=Gm(n.providers,e,`Route: ${n.path}`)),n._injector??e}function lE(n){const e=n.children&&n.children.map(lE),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==he&&(t.component=sE),t}function Zi(n){return n.outlet||he}function yV(n,e){const t=n.filter(i=>Zi(i)===e);return t.push(...n.filter(i=>Zi(i)!==e)),t}function oh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Ite{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),iE(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Ac(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),xn(r,(o,s)=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(r===o)if(r.component){const s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Ac(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);if(i&&i.outlet){const s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Ac(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Ac(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new cte(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ate(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(iE(r),r===o)if(r.component){const s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),iE(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=oh(r.snapshot),l=a?.get(ic)??null;s.attachRef=null,s.route=r,s.resolver=l,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,i)}}class vV{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Lg{constructor(e,t){this.component=e,this.route=t}}function Tte(n,e,t){const i=n._root;return sh(i,e?e._root:null,t,[i.value])}function Rc(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function M5(n){return null!==Qp(n)}(n)?e.get(n):n:i}function sh(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=Ac(e);return n.children.forEach(s=>{(function Ate(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function kte(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ia(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ia(n.url,e.url)||!zr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rE(n,e)||!zr(n.queryParams,e.queryParams);default:return!rE(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new vV(i)):(o.data=s.data,o._resolvedData=s._resolvedData),sh(n,e,o.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Lg(a.outlet.component,s))}else s&&ah(e,a,r),r.canActivateChecks.push(new vV(i)),sh(n,null,o.component?a?a.children:null:t,i,r)})(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),xn(o,(s,a)=>ah(s,t.getContext(a),r)),r}function ah(n,e,t){const i=Ac(n),r=n.value;xn(i,(o,s)=>{ah(o,r.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Lg(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function lh(n){return"function"==typeof n}function cE(n){return n instanceof Cg||"EmptyError"===n?.name}const Vg=Symbol("INITIAL_VALUE");function Nc(){return jr(n=>jC(n.map(e=>e.pipe(Hr(1),$C(Vg)))).pipe(oe(e=>{for(const t of e)if(!0!==t){if(t===Vg)return Vg;if(!1===t||t instanceof us)return t}return!0}),Xi(e=>e!==Vg),Hr(1)))}function bV(n){return function QG(...n){return Pk(n)}(tn(e=>{if(Ta(e))throw hV(0,e)}),oe(e=>!0===e))}const uE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function wV(n,e,t,i,r){const o=dE(n,e,t);return o.matched?function Kte(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?z(r.map(s=>{const a=Rc(s,n);return cs(function Lte(n){return n&&lh(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Nc(),bV()):z(!0)}(i=_V(e,i),e,t).pipe(oe(s=>!0===s?o:{...uE})):z(o)}function dE(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...uE}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||Mee)(t,n,e);if(!r)return{...uE};const o={};xn(r.posParams,(a,l)=>{o[l]=a.path});const s=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function Bg(n,e,t,i){if(t.length>0&&function Xte(n,e,t){return t.some(i=>Ug(n,e,i)&&Zi(i)!==he)}(n,t,i)){const o=new Ce(e,function Qte(n,e,t,i){const r={};r[he]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&Zi(o)!==he){const s=new Ce([],{});s._sourceSegment=n,s._segmentIndexShift=e.length,r[Zi(o)]=s}return r}(n,e,i,new Ce(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function Zte(n,e,t){return t.some(i=>Ug(n,e,i))}(n,t,i)){const o=new Ce(n.segments,function Yte(n,e,t,i,r){const o={};for(const s of i)if(Ug(n,t,s)&&!r[Zi(s)]){const a=new Ce([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,o[Zi(s)]=a}return{...r,...o}}(n,e,t,i,n.children));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const r=new Ce(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function Ug(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function CV(n,e,t,i){return!!(Zi(n)===i||i!==he&&Ug(e,t,n))&&("**"===n.path||dE(e,n,t).matched)}function EV(n,e,t){return 0===e.length&&!n.children[t]}const jg=!1;class Hg{constructor(e){this.segmentGroup=e||null}}class xV{constructor(e){this.urlTree=e}}function ch(n){return Dc(new Hg(n))}function DV(n){return Dc(new xV(n))}class nne{constructor(e,t,i,r,o){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=o,this.allowRedirects=!0}apply(){const e=Bg(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ce(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,he).pipe(oe(o=>this.createUrlTree(Rg(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(So(o=>{if(o instanceof xV)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Hg?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,he).pipe(oe(r=>this.createUrlTree(Rg(r),e.queryParams,e.fragment))).pipe(So(r=>{throw r instanceof Hg?this.noMatchError(r):r}))}noMatchError(e){return new x(4002,jg)}createUrlTree(e,t,i){const r=KC(e);return new us(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(oe(o=>new Ce([],o))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return Ft(r).pipe(ls(o=>{const s=i.children[o],a=yV(t,o);return this.expandSegmentGroup(e,a,s,o).pipe(oe(l=>({segment:l,outlet:o})))}),VL((o,s)=>(o[s.outlet]=s.segment,o),{}),BL())}expandSegment(e,t,i,r,o,s){return Ft(i).pipe(ls(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,o,s).pipe(So(c=>{if(c instanceof Hg)return z(null);throw c}))),as(a=>!!a),So((a,l)=>{if(cE(a))return EV(t,r,o)?z(new Ce([],{})):ch(t);throw a}))}expandSegmentAgainstRoute(e,t,i,r,o,s,a){return CV(r,t,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s):ch(t):ch(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const o=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?DV(o):this.lineralizeSegments(i,o).pipe(an(s=>{const a=new Ce(s,{});return this.expandSegment(e,a,t,s,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=dE(t,r,o);if(!a)return ch(t);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?DV(d):this.lineralizeSegments(r,d).pipe(an(h=>this.expandSegment(e,t,i,h.concat(c),s,!1)))}matchSegmentAgainstRoute(e,t,i,r,o){return"**"===i.path?(e=_V(i,e),i.loadChildren?(i._loadedRoutes?z({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe(oe(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new Ce(r,{})))):z(new Ce(r,{}))):wV(t,i,r,e).pipe(jr(({matched:s,consumedSegments:a,remainingSegments:l})=>s?this.getChildConfig(e=i._injector??e,i,r).pipe(an(u=>{const d=u.injector??e,h=u.routes,{segmentGroup:f,slicedSegments:p}=Bg(t,a,l,h),g=new Ce(f.segments,f.children);if(0===p.length&&g.hasChildren())return this.expandChildren(d,h,g).pipe(oe(b=>new Ce(a,b)));if(0===h.length&&0===p.length)return z(new Ce(a,{}));const _=Zi(i)===o;return this.expandSegment(d,g,h,p,_?he:o,!0).pipe(oe(E=>new Ce(a.concat(E.segments),E.children)))})):ch(t)))}getChildConfig(e,t,i){return t.children?z({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?z({routes:t._loadedRoutes,injector:t._loadedInjector}):function Gte(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?z(!0):z(r.map(s=>{const a=Rc(s,n);return cs(function Nte(n){return n&&lh(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Nc(),bV())}(e,t,i).pipe(an(r=>r?this.configLoader.loadChildren(e,t).pipe(tn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function ene(n){return Dc(fV(jg,3))}())):z({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return z(i);if(r.numberOfChildren>1||!r.children[he])return e.redirectTo,Dc(new x(4e3,jg));r=r.children[he]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const o=this.createSegmentGroup(e,t.root,i,r);return new us(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return xn(e,(r,o)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[o]=t[a]}else i[o]=r}),i}createSegmentGroup(e,t,i,r){const o=this.createSegments(e,t.segments,i,r);let s={};return xn(t.children,(a,l)=>{s[l]=this.createSegmentGroup(e,a,i,r)}),new Ce(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new x(4001,jg);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class rne{}class ane{constructor(e,t,i,r,o,s,a){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const e=Bg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,he).pipe(oe(t=>{if(null===t)return null;const i=new Pg([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},he,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Io(i,t),o=new uV(this.url,r);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,i=cV(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return Ft(Object.keys(i.children)).pipe(ls(r=>{const o=i.children[r],s=yV(t,r);return this.processSegmentGroup(e,s,o,r)}),VL((r,o)=>r&&o?(r.push(...o),r):null),function See(n,e=!1){return Pt((t,i)=>{let r=0;t.subscribe(Ct(i,o=>{const s=n(o,r++);(s||e)&&i.next(o),!s&&i.complete()}))})}(r=>null!==r),xg(null),BL(),oe(r=>{if(null===r)return null;const o=IV(r);return function lne(n){n.sort((e,t)=>e.value.outlet===he?-1:t.value.outlet===he?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,i,r,o){return Ft(t).pipe(ls(s=>this.processSegmentAgainstRoute(s._injector??e,s,i,r,o)),as(s=>!!s),So(s=>{if(cE(s))return EV(i,r,o)?z([]):z(null);throw s}))}processSegmentAgainstRoute(e,t,i,r,o){if(t.redirectTo||!CV(t,i,r,o))return z(null);let s;if("**"===t.path){const a=r.length>0?HL(r).parameters:{},l=MV(i)+r.length;s=z({snapshot:new Pg(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,AV(t),Zi(t),t.component??t._loadedComponent??null,t,TV(i),l,kV(t)),consumedSegments:[],remainingSegments:[]})}else s=wV(i,t,r,e).pipe(oe(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=MV(i)+l.length;return{snapshot:new Pg(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,AV(t),Zi(t),t.component??t._loadedComponent??null,t,TV(i),d,kV(t)),consumedSegments:l,remainingSegments:c}}));return s.pipe(jr(a=>{if(null===a)return z(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;e=t._injector??e;const d=t._loadedInjector??e,h=function cne(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:p}=Bg(i,c,u,h.filter(_=>void 0===_.redirectTo));if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(oe(_=>null===_?null:[new Io(l,_)]));if(0===h.length&&0===p.length)return z([new Io(l,[])]);const g=Zi(t)===o;return this.processSegment(d,h,f,p,g?he:o).pipe(oe(_=>null===_?null:[new Io(l,_)]))}))}}function une(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function IV(n){const e=[],t=new Set;for(const i of n){if(!une(i)){e.push(i);continue}const r=e.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=IV(i.children);e.push(new Io(i.value,r))}return e.filter(i=>!t.has(i))}function TV(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function MV(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function AV(n){return n.data||{}}function kV(n){return n.resolve||{}}function RV(n){return"string"==typeof n.title||null===n.title}function hE(n){return jr(e=>{const t=n(e);return t?Ft(t).pipe(oe(()=>e)):z(e)})}const Oc=new k("ROUTES");let fE=(()=>{class n{constructor(t,i){this.injector=t,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=cs(t.loadComponent()).pipe(oe(OV),tn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Dg(()=>{this.componentLoaders.delete(t)})),r=new zC(i,()=>new Qe).pipe(HC());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return z({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(oe(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(t).injector,c=jL(l.get(Oc,[],ee.Self|ee.Optional)));return{routes:c.map(lE),injector:l}}),Dg(()=>{this.childrenLoaders.delete(i)})),s=new zC(o,()=>new Qe).pipe(HC());return this.childrenLoaders.set(i,s),s}loadModuleFactoryOrRoutes(t){return cs(t()).pipe(oe(OV),an(r=>r instanceof wP||Array.isArray(r)?z(r):Ft(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(D(hi),D(lF))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function OV(n){return function vne(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let $g=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Qe,this.configLoader=ye(fE),this.environmentInjector=ye(go),this.urlSerializer=ye(Zd),this.rootContexts=ye(rh),this.navigationId=0,this.afterPreactivation=()=>z(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new ote(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new rte(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t){return this.transitions=new Qi({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:nh,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Xi(i=>0!==i.id),oe(i=>({...i,extractedUrl:t.urlHandlingStrategy.extract(i.rawUrl)})),jr(i=>{let r=!1,o=!1;return z(i).pipe(tn(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),jr(s=>{const a=t.browserUrlTree.toString(),l=!t.navigated||s.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(!l&&"reload"!==(s.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const u="";return this.events.next(new Og(s.id,t.serializeUrl(i.rawUrl),u,0)),t.rawUrlTree=s.rawUrl,s.resolve(null),lr}if(t.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return PV(s.source)&&(t.browserUrlTree=s.extractedUrl),z(s).pipe(jr(u=>{const d=this.transitions?.getValue();return this.events.next(new ZC(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),d!==this.transitions?.getValue()?lr:Promise.resolve(u)}),function ine(n,e,t,i){return jr(r=>function tne(n,e,t,i,r){return new nne(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(oe(o=>({...r,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),tn(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},i.urlAfterRedirects=u.urlAfterRedirects}),function hne(n,e,t,i,r){return an(o=>function sne(n,e,t,i,r,o,s="emptyOnly"){return new ane(n,e,t,i,r,s,o).recognize().pipe(jr(a=>null===a?function one(n){return new Je(e=>e.error(n))}(new rne):z(a)))}(n,e,t,o.urlAfterRedirects,i.serialize(o.urlAfterRedirects),i,r).pipe(oe(s=>({...o,targetSnapshot:s}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),tn(u=>{if(i.targetSnapshot=u.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!u.extras.skipLocationChange){const h=t.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);t.setBrowserUrl(h,u)}t.browserUrlTree=u.urlAfterRedirects}const d=new Jee(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(l&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:u,extractedUrl:d,source:h,restoredState:f,extras:p}=s,g=new ZC(u,this.urlSerializer.serialize(d),h,f);this.events.next(g);const _=lV(d,this.rootComponentType).snapshot;return z(i={...s,targetSnapshot:_,urlAfterRedirects:d,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}{const u="";return this.events.next(new Og(s.id,t.serializeUrl(i.extractedUrl),u,1)),t.rawUrlTree=s.rawUrl,s.resolve(null),lr}}),tn(s=>{const a=new ete(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),oe(s=>i={...s,guards:Tte(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function Bte(n,e){return an(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?z({...t,guardsResult:!0}):function Ute(n,e,t,i){return Ft(n).pipe(an(r=>function Wte(n,e,t,i,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?z(o.map(a=>{const l=oh(e)??r,c=Rc(a,l);return cs(function Fte(n){return n&&lh(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,i):l.runInContext(()=>c(n,e,t,i))).pipe(as())})).pipe(Nc()):z(!0)}(r.component,r.route,t,e,i)),as(r=>!0!==r,!0))}(s,i,r,n).pipe(an(a=>a&&function Rte(n){return"boolean"==typeof n}(a)?function jte(n,e,t,i){return Ft(e).pipe(ls(r=>Eg(function zte(n,e){return null!==n&&e&&e(new ste(n)),z(!0)}(r.route.parent,i),function Hte(n,e){return null!==n&&e&&e(new lte(n)),z(!0)}(r.route,i),function qte(n,e,t){const i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function Mte(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>FL(()=>z(s.guards.map(l=>{const c=oh(s.node)??t,u=Rc(l,c);return cs(function Pte(n){return n&&lh(n.canActivateChild)}(u)?u.canActivateChild(i,n):c.runInContext(()=>u(i,n))).pipe(as())})).pipe(Nc())));return z(o).pipe(Nc())}(n,r.path,t),function $te(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return z(!0);const r=i.map(o=>FL(()=>{const s=oh(e)??t,a=Rc(o,s);return cs(function Ote(n){return n&&lh(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(as())}));return z(r).pipe(Nc())}(n,r.route,t))),as(r=>!0!==r,!0))}(i,o,n,e):z(a)),oe(a=>({...t,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),tn(s=>{if(i.guardsResult=s.guardsResult,Ta(s.guardsResult))throw hV(0,s.guardsResult);const a=new tte(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Xi(s=>!!s.guardsResult||(t.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),hE(s=>{if(s.guards.canActivateChecks.length)return z(s).pipe(tn(a=>{const l=new nte(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),jr(a=>{let l=!1;return z(a).pipe(function fne(n,e){return an(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return z(t);let o=0;return Ft(r).pipe(ls(s=>function pne(n,e,t,i){const r=n.routeConfig,o=n._resolve;return void 0!==r?.title&&!RV(r)&&(o[Qd]=r.title),function mne(n,e,t,i){const r=function gne(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return z({});const o={};return Ft(r).pipe(an(s=>function _ne(n,e,t,i){const r=oh(e)??i,o=Rc(n,r);return cs(o.resolve?o.resolve(e,t):r.runInContext(()=>o(e,t)))}(n[s],e,t,i).pipe(as(),tn(a=>{o[s]=a}))),qC(1),function Iee(n){return oe(()=>n)}(o),So(s=>cE(s)?lr:Dc(s)))}(o,n,e,i).pipe(oe(s=>(n._resolvedData=s,n.data=cV(n,t).resolve,r&&RV(r)&&(n.data[Qd]=r.title),null)))}(s.route,i,n,e)),tn(()=>o++),qC(1),an(s=>o===r.length?z(t):lr))})}(t.paramsInheritanceStrategy,this.environmentInjector),tn({next:()=>l=!0,complete:()=>{l||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),tn(a=>{const l=new ite(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),hE(s=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(tn(u=>{l.component=u}),oe(()=>{})));for(const u of l.children)c.push(...a(u));return c};return jC(a(s.targetSnapshot.root)).pipe(xg(),Hr(1))}),hE(()=>this.afterPreactivation()),oe(s=>{const a=function _te(n,e,t){const i=ih(n,e._root,t?t._root:void 0);return new aV(i,e)}(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return i={...s,targetRouterState:a}}),tn(s=>{t.currentUrlTree=s.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),t.routerState=s.targetRouterState,"deferred"===t.urlUpdateStrategy&&(s.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,s),t.browserUrlTree=s.urlAfterRedirects)}),((n,e,t)=>oe(i=>(new Ite(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s)),tn({next:s=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Ma(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{r=!0}}),Dg(()=>{r||o||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),So(s=>{if(o=!0,mV(s)){pV(s)||(t.navigated=!0,t.restoreHistory(i,!0));const a=new Ng(i.id,this.urlSerializer.serialize(i.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),pV(s)){const l=t.urlHandlingStrategy.merge(s.url,t.rawUrlTree),c={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||PV(i.source)};t.scheduleNavigation(l,nh,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{t.restoreHistory(i,!0);const a=new JC(i.id,this.urlSerializer.serialize(i.extractedUrl),s,i.targetSnapshot??void 0);this.events.next(a);try{i.resolve(t.errorHandler(s))}catch(l){i.reject(l)}}return lr}))}))}cancelNavigationTransition(t,i,r){const o=new Ng(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function PV(n){return n!==nh}let FV=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===he);return i}getResolvedTitleForRoute(t){return t.data[Qd]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:function(){return ye(bne)},providedIn:"root"}),n})(),bne=(()=>{class n extends FV{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(D(ML))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:function(){return ye(Ene)},providedIn:"root"}),n})();class Cne{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Ene=(()=>{class n extends Cne{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Fe(n)))(i||n)}}(),n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qg=new k("",{providedIn:"root",factory:()=>({})});let Dne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:function(){return ye(Sne)},providedIn:"root"}),n})(),Sne=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ine(n){throw n}function Tne(n,e,t){return e.parse("/")}const Mne={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ane={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let mi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=ye(nX),this.isNgZoneEnabled=!1,this.options=ye(qg,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Ine,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Tne,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=ye(Dne),this.routeReuseStrategy=ye(wne),this.urlCreationStrategy=ye(pte),this.titleStrategy=ye(FV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=jL(ye(Oc,{optional:!0})??[]),this.navigationTransitions=ye($g),this.urlSerializer=ye(Zd),this.location=ye(rg),this.isNgZoneEnabled=ye(pe)instanceof pe&&pe.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new us,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=lV(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),nh,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(o.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(lE),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:s;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...o};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}return null!==u&&(u=this.removeEmptyProps(u)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,t,u,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Ta(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,nh,null,i)}navigate(t,i={skipLocationChange:!1}){return function kne(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new x(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...Mne}:!1===i?{...Ane}:i,Ta(t))return $L(this.currentUrlTree,t,r);const o=this.parseUrl(t);return $L(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const o=t[r];return null!=o&&(i[r]=o),i},{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c,u;return s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,l=h}),u="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),o={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",o):this.location.go(r,"",o)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===r?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class LV{}let One=(()=>{class n{constructor(t,i,r,o,s){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Xi(t=>t instanceof Ma),ls(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=Gm(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?r.push(this.preloadConfig(s,o)):(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ft(r).pipe(Pl())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):z(null);const o=r.pipe(an(s=>null===s?z(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return i.loadComponent&&!i._loadedComponent?Ft([o,this.loader.loadComponent(i)]).pipe(Pl()):o})}}return n.\u0275fac=function(t){return new(t||n)(D(mi),D(lF),D(go),D(LV),D(fE))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gE=new k("");let VV=(()=>{class n{constructor(t,i,r,o,s={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ZC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ma&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof oV&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new oV(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){!function DO(){throw new Error("invalid")}()},n.\u0275prov=P({token:n,factory:n.\u0275fac}),n})();var Ai=(()=>((Ai=Ai||{})[Ai.COMPLETE=0]="COMPLETE",Ai[Ai.FAILED=1]="FAILED",Ai[Ai.REDIRECTING=2]="REDIRECTING",Ai))();const Pc=!1;function ds(n,e){return{\u0275kind:n,\u0275providers:e}}const _E=new k("",{providedIn:"root",factory:()=>!1});function UV(){const n=ye(hi);return e=>{const t=n.get(Ec);if(e!==t.components[0])return;const i=n.get(mi),r=n.get(jV);1===n.get(yE)&&i.initialNavigation(),n.get(HV,null,ee.Optional)?.setUpPreloading(),n.get(gE,null,ee.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const jV=new k(Pc?"bootstrap done indicator":"",{factory:()=>new Qe}),yE=new k(Pc?"initial navigation":"",{providedIn:"root",factory:()=>1});function Bne(){let n=[];return n=Pc?[{provide:Tm,multi:!0,useFactory:()=>{const e=ye(mi);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function ute(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],ds(1,n)}const HV=new k(Pc?"router preloader":"");function Une(n){return ds(0,[{provide:HV,useExisting:One},{provide:LV,useExisting:n}])}const uh=!1,zV=new k(uh?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),jne=[rg,{provide:Zd,useClass:WC},mi,rh,{provide:kc,useFactory:function BV(n){return n.routerState.root},deps:[mi]},fE,uh?{provide:_E,useValue:!0}:[]];function Hne(){return new gF("Router",mi)}let $V=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[jne,uh&&i?.enableTracing?Bne().\u0275providers:[],{provide:Oc,multi:!0,useValue:t},{provide:zV,useFactory:Wne,deps:[[mi,new Rr,new ma]]},{provide:qg,useValue:i||{}},i?.useHash?{provide:Da,useClass:zX}:{provide:Da,useClass:BF},{provide:gE,useFactory:()=>{const n=ye(uJ),e=ye(pe),t=ye(qg),i=ye($g),r=ye(Zd);return t.scrollOffset&&n.setOffset(t.scrollOffset),new VV(r,i,n,e,t)}},i?.preloadingStrategy?Une(i.preloadingStrategy).\u0275providers:[],{provide:gF,multi:!0,useFactory:Hne},i?.initialNavigation?Gne(i):[],[{provide:qV,useFactory:UV},{provide:mF,multi:!0,useExisting:qV}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Oc,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(D(zV,8))},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({imports:[sE]}),n})();function Wne(n){if(uh&&n)throw new x(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Gne(n){return["disabled"===n.initialNavigation?ds(3,[{provide:Xm,multi:!0,useFactory:()=>{const e=ye(mi);return()=>{e.setUpLocationChangeListener()}}},{provide:yE,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ds(2,[{provide:yE,useValue:0},{provide:Xm,multi:!0,deps:[hi],useFactory:e=>{const t=e.get(jX,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(mi),o=e.get(jV);(function Pne(n,e){n.events.pipe(Xi(t=>t instanceof Ma||t instanceof Ng||t instanceof JC||t instanceof Og),oe(t=>t instanceof Ma||t instanceof Og?Ai.COMPLETE:t instanceof Ng&&(0===t.code||1===t.code)?Ai.REDIRECTING:Ai.FAILED),Xi(t=>t!==Ai.REDIRECTING),Hr(1)).subscribe(()=>{e()})})(r,()=>{i(!0)}),e.get($g).afterPreactivation=()=>(i(!0),o.closed?z(void 0):o),r.initialNavigation()}))}}]).\u0275providers:[]]}const qV=new k(uh?"Router Initializer":"");function WV(...n){const e=Zk(n),{args:t,keys:i}=NL(n),r=new Je(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let l=s,c=s;for(let u=0;u<s;u++){let d=!1;Wn(t[u]).subscribe(Ct(o,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(i?OL(i,a):a),o.complete())}))}});return e?r.pipe(UC(e)):r}let GV=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(y(_o),y(Me))},n.\u0275dir=M({type:n}),n})(),Aa=(()=>{class n extends GV{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Fe(n)))(i||n)}}(),n.\u0275dir=M({type:n,features:[K]}),n})();const qr=new k("NgValueAccessor"),Qne={provide:qr,useExisting:ot(()=>Fc),multi:!0},Zne=new k("CompositionEventMode");let Fc=(()=>{class n extends GV{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Xne(){const n=Eo()?Eo().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(y(_o),y(Me),y(Zne,8))},n.\u0275dir=M({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&Tt("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[de([Qne]),K]}),n})();const Jne=!1;function hs(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function YV(n){return null!=n&&"number"==typeof n.length}const Un=new k("NgValidators"),fs=new k("NgAsyncValidators"),eie=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class QV{static min(e){return function XV(n){return e=>{if(hs(e.value)||hs(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function ZV(n){return e=>{if(hs(e.value)||hs(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function JV(n){return hs(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function eB(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function tB(n){return hs(n.value)||eie.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function nB(n){return e=>hs(e.value)||!YV(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function iB(n){return e=>YV(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function rB(n){if(!n)return Wg;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(hs(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return uB(e)}static composeAsync(e){return dB(e)}}function Wg(n){return null}function oB(n){return null!=n}function sB(n){const e=Rd(n)?Ft(n):n;if(Jne&&!S0(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new x(-1101,t)}return e}function aB(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function lB(n,e){return e.map(t=>t(n))}function cB(n){return n.map(e=>function tie(n){return!n.validate}(e)?e:t=>e.validate(t))}function uB(n){if(!n)return null;const e=n.filter(oB);return 0==e.length?null:function(t){return aB(lB(t,e))}}function vE(n){return null!=n?uB(cB(n)):null}function dB(n){if(!n)return null;const e=n.filter(oB);return 0==e.length?null:function(t){return WV(lB(t,e).map(sB)).pipe(oe(aB))}}function bE(n){return null!=n?dB(cB(n)):null}function hB(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function fB(n){return n._rawValidators}function pB(n){return n._rawAsyncValidators}function wE(n){return n?Array.isArray(n)?n:[n]:[]}function Gg(n,e){return Array.isArray(n)?n.includes(e):n===e}function mB(n,e){const t=wE(e);return wE(n).forEach(r=>{Gg(t,r)||t.push(r)}),t}function gB(n,e){return wE(e).filter(t=>!Gg(n,t))}class _B{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=vE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=bE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ei extends _B{get formDirective(){return null}get path(){return null}}class To extends _B{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yB{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Kg=(()=>{class n extends yB{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(y(To,2))},n.\u0275dir=M({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&wn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[K]}),n})(),vB=(()=>{class n extends yB{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(y(ei,10))},n.\u0275dir=M({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&wn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[K]}),n})();function bB(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const xE=!1,dh="VALID",Qg="INVALID",Lc="PENDING",hh="DISABLED";function DE(n){return(Xg(n)?n.validators:n)||null}function SE(n,e){return(Xg(e)?e.asyncValidators:n)||null}function Xg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function wB(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new x(1e3,xE?function oie(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!i[t])throw new x(1001,xE?function sie(n,e){return`Cannot find form control ${bB(n,e)}`}(e,t):"")}function CB(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new x(1002,xE?function aie(n,e){return`Must supply a value for form control ${bB(n,e)}`}(e,r):"")})}class Zg{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===dh}get invalid(){return this.status===Qg}get pending(){return this.status==Lc}get disabled(){return this.status===hh}get enabled(){return this.status!==hh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(mB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(mB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(gB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(gB(e,this._rawAsyncValidators))}hasValidator(e){return Gg(this._rawValidators,e)}hasAsyncValidator(e){return Gg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Lc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=hh,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=dh,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===dh||this.status===Lc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?hh:dh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Lc,this._hasOwnPendingAsyncValidator=!0;const t=sB(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ht,this.statusChanges=new ht}_calculateStatus(){return this._allControlsDisabled()?hh:this.errors?Qg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Lc)?Lc:this._anyControlsHaveStatus(Qg)?Qg:dh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Xg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function lie(n){return Array.isArray(n)?vE(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function cie(n){return Array.isArray(n)?bE(n):n||null}(this._rawAsyncValidators)}}class fh extends Zg{constructor(e,t,i){super(DE(t),SE(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){CB(this,!0,e),Object.keys(e).forEach(i=>{wB(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class EB extends fh{}const ka=new k("CallSetDisabledState",{providedIn:"root",factory:()=>ph}),ph="always";function Jg(n,e){return[...e.path,n]}function mh(n,e,t=ph){IE(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function die(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&xB(n,e)})}(n,e),function fie(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function hie(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&xB(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function uie(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function e_(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),n_(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function t_(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function IE(n,e){const t=fB(n);null!==e.validator?n.setValidators(hB(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=pB(n);null!==e.asyncValidator?n.setAsyncValidators(hB(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();t_(e._rawValidators,r),t_(e._rawAsyncValidators,r)}function n_(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=fB(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const r=pB(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}const i=()=>{};return t_(e._rawValidators,i),t_(e._rawAsyncValidators,i),t}function xB(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function DB(n,e){IE(n,e)}function ME(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function SB(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function AE(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(o=>{o.constructor===Fc?t=o:function gie(n){return Object.getPrototypeOf(n.constructor)===Aa}(o)?i=o:r=o}),r||i||t||null}const yie={provide:ei,useExisting:ot(()=>i_)},gh=(()=>Promise.resolve())();let i_=(()=>{class n extends ei{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ht,this.form=new fh({},vE(t),bE(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){gh.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),mh(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){gh.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){gh.then(()=>{const i=this._findContainer(t.path),r=new fh({});DB(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){gh.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){gh.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,SB(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(y(Un,10),y(fs,10),y(ka,8))},n.\u0275dir=M({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&Tt("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[de([yie]),K]}),n})();function IB(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function TB(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const _h=class extends Zg{constructor(e=null,t,i){super(DE(t),SE(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Xg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=TB(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){IB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){IB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){TB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},wie={provide:To,useExisting:ot(()=>r_)},kB=(()=>Promise.resolve())();let r_=(()=>{class n extends To{constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new _h,this._registered=!1,this.update=new ht,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=AE(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),ME(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){mh(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){kB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&function xc(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(i);kB.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Jg(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(y(ei,9),y(Un,10),y(fs,10),y(qr,10),y(Ea,8),y(ka,8))},n.\u0275dir=M({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[de([wie]),K,Fn]}),n})(),RB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=M({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),OB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({}),n})();const kE=new k("NgModelWithFormControlWarning"),Iie={provide:ei,useExisting:ot(()=>yh)};let yh=(()=>{class n extends ei{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ht,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(n_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return mh(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){e_(t.control||null,t,!1),function _ie(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,SB(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(e_(i||null,t),(n=>n instanceof _h)(r)&&(mh(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);DB(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function pie(n,e){return n_(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){IE(this.form,this),this._oldForm&&n_(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(y(Un,10),y(fs,10),y(ka,8))},n.\u0275dir=M({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&Tt("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[de([Iie]),K,Fn]}),n})();const Aie={provide:To,useExisting:ot(()=>OE)};let OE=(()=>{class n extends To{set isDisabled(t){}constructor(t,i,r,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new ht,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=AE(0,o)}ngOnChanges(t){this._added||this._setUpControl(),ME(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Jg(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(y(ei,13),y(Un,10),y(fs,10),y(qr,10),y(kE,8))},n.\u0275dir=M({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[de([Aie]),K,Fn]}),n})(),QB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({imports:[OB]}),n})();class XB extends Zg{constructor(e,t,i){super(DE(t),SE(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){CB(this,!1,e),e.forEach((i,r)=>{wB(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function ZB(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let qie=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,i=null){const r=this._reduceControls(t);let o={};return ZB(i)?o=i:null!==i&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new fh(r,o)}record(t,i=null){const r=this._reduceControls(t);return new EB(r,i)}control(t,i,r){let o={};return this.useNonNullable?(ZB(i)?o=i:(o.validators=i,o.asyncValidators=r),new _h(t,{...o,nonNullable:!0})):new _h(t,i,r)}array(t,i,r){const o=t.map(s=>this._createControl(s));return new XB(o,i,r)}_reduceControls(t){const i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){return t instanceof _h||t instanceof Zg?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wie=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ka,useValue:t.callSetDisabledState??ph}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({imports:[QB]}),n})(),Gie=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:kE,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:ka,useValue:t.callSetDisabledState??ph}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({imports:[QB]}),n})();const VE={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},F=function(n,e){if(!n)throw Vc(e)},Vc=function(n){return new Error("Firebase Database ("+VE.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)},JB=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=63&r|128):55296==(64512&r)&&i+1<n.length&&56320==(64512&n.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&n.charCodeAt(++i)),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=63&r|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=63&r|128)}return e},BE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const o=n[r],s=r+1<n.length,a=s?n[r+1]:0,l=r+2<n.length,c=l?n[r+2]:0;let h=(15&a)<<2|c>>6,f=63&c;l||(f=64,s||(h=64)),i.push(t[o>>2],t[(3&o)<<4|a>>4],t[h],t[f])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(JB(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[t++];e[i++]=String.fromCharCode((31&r)<<6|63&o)}else if(r>239&&r<365){const l=((7&r)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(1023&l))}else{const o=n[t++],s=n[t++];e[i++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const o=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const c=r<n.length?t[n.charAt(r)]:64;++r;const d=r<n.length?t[n.charAt(r)]:64;if(++r,null==o||null==a||null==c||null==d)throw new Yie;i.push(o<<2|a>>4),64!==c&&(i.push(a<<4&240|c>>2),64!==d&&i.push(c<<6&192|d))}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Yie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const e2=function(n){const e=JB(n);return BE.encodeByteArray(e,!0)},o_=function(n){return e2(n).replace(/\./g,"")},s_=function(n){try{return BE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vh(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Xie(t)||(n[t]=vh(n[t],e[t]));return n}function Xie(n){return"__proto__"!==n}const a_=()=>{try{return function Zie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&s_(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},rre=()=>{var n;return null===(n=a_())||void 0===n?void 0:n.config};class l_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,i))}}}function t2(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[o_(JSON.stringify({alg:"none",type:"JWT"})),o_(JSON.stringify(s)),""].join(".")}function ft(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function UE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function jE(){var n;const e=null===(n=a_())||void 0===n?void 0:n.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function n2(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function c_(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function r2(){const n=ft();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Mo(){return!0===VE.NODE_CLIENT||!0===VE.NODE_ADMIN}function bh(){try{return"object"==typeof indexedDB}catch{return!1}}class ti extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Na.prototype.create)}}class Na{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],s=o?function ure(n,e){return n.replace(dre,(t,i)=>{const r=e[i];return null!=r?String(r):`<${i}?>`})}(o,i):"Error";return new ti(r,`${this.serviceName}: ${s} (${r}).`,i)}}const dre=/\{\$([^}]+)}/g;function wh(n){return JSON.parse(n)}function Dn(n){return JSON.stringify(n)}const u_=function(n){let e={},t={},i={},r="";try{const o=n.split(".");e=wh(s_(o[0])||""),t=wh(s_(o[1])||""),r=o[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:r}};function vr(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Bc(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function HE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function d_(n,e,t){const i={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=e.call(t,n[r],r,n));return i}function zE(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const o=n[r],s=e[r];if(o2(o)&&o2(s)){if(!zE(o,s))return!1}else if(o!==s)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function o2(n){return null!==n&&"object"==typeof n}function Oa(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Uc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Ch(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class pre{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)i[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)i[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const h=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=4294967295&(h<<1|h>>>31)}let c,u,r=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],l=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(c=a^o&(s^a),u=1518500249):(c=o^s^a,u=1859775393):d<60?(c=o&s|a&(o|s),u=2400959708):(c=o^s^a,u=3395469782);const h=(r<<5|r>>>27)+c+l+u+i[d]&4294967295;l=a,a=s,s=4294967295&(o<<30|o>>>2),o=r,r=h}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const i=t-this.blockSize;let r=0;const o=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(o[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(o),s=0;break}}else for(;r<t;)if(o[s]=e[r],++s,++r,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e}}function s2(n,e){const t=new mre(n,e);return t.subscribe.bind(t)}class mre{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(void 0===e&&void 0===t&&void 0===i)throw new Error("Missing Observer.");r=function gre(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:i},void 0===r.next&&(r.next=$E),void 0===r.error&&(r.error=$E),void 0===r.complete&&(r.complete=$E);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $E(){}const f_=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};function Y(n){return n&&n._delegate?n._delegate:n}function a2(n,e,t,i,r,o,s){try{var a=n[o](s),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function m(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var o=n.apply(e,t);function s(l){a2(o,i,r,s,a,"next",l)}function a(l){a2(o,i,r,s,a,"throw",l)}s(void 0)})}}class br{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Pa="[DEFAULT]";class Ere{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new l_;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),r=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Dre(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Pa})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return m(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Pa){return this.instances.has(e)}getOptions(e=Pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,s]of this.instancesDeferred.entries())i===this.normalizeInstanceIdentifier(o)&&s.resolve(r);return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),o=null!==(i=this.onInitCallbacks.get(r))&&void 0!==i?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const s=this.instances.get(r);return s&&e(s,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Pa?void 0:n),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}var n;return i||null}normalizeInstanceIdentifier(e=Pa){return this.component?this.component.multipleInstances?e:Pa:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Sre{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ere(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const qE=[];var ke=(()=>{return(n=ke||(ke={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",ke;var n})();const l2={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},Ire=ke.INFO,Tre={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},Mre=(n,e,...t)=>{if(e<n.logLevel)return;const i=(new Date).toISOString(),r=Tre[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${n.name}:`,...t)};class Eh{constructor(e){this.name=e,this._logLevel=Ire,this._logHandler=Mre,this._userLogHandler=null,qE.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?l2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const Rre=(n,e)=>e.some(t=>n instanceof t);let c2,u2;const d2=new WeakMap,WE=new WeakMap,h2=new WeakMap,GE=new WeakMap,KE=new WeakMap;let YE={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return WE.get(n);if("objectStoreNames"===e)return n.objectStoreNames||h2.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ps(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Bre(n){return"function"==typeof n?function Vre(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ore(){return u2||(u2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(QE(this),e),ps(d2.get(this))}:function(...e){return ps(n.apply(QE(this),e))}:function(e,...t){const i=n.call(QE(this),e,...t);return h2.set(i,e.sort?e.sort():[e]),ps(i)}}(n):(n instanceof IDBTransaction&&function Fre(n){if(WE.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),r()},s=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});WE.set(n,e)}(n),Rre(n,function Nre(){return c2||(c2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,YE):n)}function ps(n){if(n instanceof IDBRequest)return function Pre(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(ps(n.result)),r()},s=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&d2.set(t,n)}).catch(()=>{}),KE.set(e,n),e}(n);if(GE.has(n))return GE.get(n);const e=Bre(n);return e!==n&&(GE.set(n,e),KE.set(e,n)),e}const QE=n=>KE.get(n),jre=["get","getKey","getAll","getAllKeys","count"],Hre=["put","add","delete","clear"],XE=new Map;function f2(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(XE.get(e))return XE.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=Hre.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!jre.includes(t))return;const o=function(){var s=m(function*(a,...l){const c=this.transaction(a,r?"readwrite":"readonly");let u=c.store;return i&&(u=u.index(l.shift())),(yield Promise.all([u[t](...l),r&&c.done]))[0]});return function(l){return s.apply(this,arguments)}}();return XE.set(e,o),o}!function Lre(n){YE=n(YE)}(n=>({...n,get:(e,t,i)=>f2(e,t)||n.get(e,t,i),has:(e,t)=>!!f2(e,t)||n.has(e,t)}));class zre{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function $re(n){return"VERSION"===n.getComponent()?.type}(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}return null}).filter(t=>t).join(" ")}}const ZE="@firebase/app",Fa=new Eh("@firebase/app"),ms="[DEFAULT]",goe={[ZE]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},gs=new Map,xh=new Map;function p_(n,e){try{n.container.addComponent(e)}catch(t){Fa.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function m2(n,e){n.container.addOrOverwriteComponent(e)}function Ao(n){const e=n.name;if(xh.has(e))return Fa.debug(`There were multiple attempts to register component ${e}.`),!1;xh.set(e,n);for(const t of gs.values())p_(t,n);return!0}function JE(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _oe(n,e,t=ms){JE(n,e).clearInstance(t)}function yoe(){xh.clear()}const ko=new Na("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class boe{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new br("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ko.create("app-deleted",{appName:this._name})}}const _s="9.19.1";function m_(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:ms,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!=typeof r||!r)throw ko.create("bad-app-name",{appName:String(r)});if(t||(t=rre()),!t)throw ko.create("no-options");const o=gs.get(r);if(o){if(zE(t,o.options)&&zE(i,o.config))return o;throw ko.create("duplicate-app",{appName:r})}const s=new Sre(r);for(const l of xh.values())s.addComponent(l);const a=new boe(t,i,s);return gs.set(r,a),a}function g2(n=ms){const e=gs.get(n);if(!e&&n===ms)return m_();if(!e)throw ko.create("no-app",{appName:n});return e}function woe(){return Array.from(gs.values())}function _2(n){return ex.apply(this,arguments)}function ex(){return(ex=m(function*(n){const e=n.name;gs.has(e)&&(gs.delete(e),yield Promise.all(n.container.getProviders().map(t=>t.delete())),n.isDeleted=!0)})).apply(this,arguments)}function ki(n,e,t){var i;let r=null!==(i=goe[n])&&void 0!==i?i:n;t&&(r+=`-${t}`);const o=r.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${r}" with version "${e}":`];return o&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Fa.warn(a.join(" "))}Ao(new br(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function y2(n,e){if(null!==n&&"function"!=typeof n)throw ko.create("invalid-log-argument");!function kre(n,e){for(const t of qE){let i=null;e&&e.level&&(i=l2[e.level]),t.userLogHandler=null===n?null:(r,o,...s)=>{const a=s.map(l=>{if(null==l)return null;if("string"==typeof l)return l;if("number"==typeof l||"boolean"==typeof l)return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");o>=(i??r.logLevel)&&n({level:ke[o].toLowerCase(),message:a,args:s,type:r.name})}}}(n,e)}function v2(n){!function Are(n){qE.forEach(e=>{e.setLogLevel(n)})}(n)}const Coe="firebase-heartbeat-database",Eoe=1,Dh="firebase-heartbeat-store";let tx=null;function b2(){return tx||(tx=function Ure(n,e,{blocked:t,upgrade:i,blocking:r,terminated:o}={}){const s=indexedDB.open(n,e),a=ps(s);return i&&s.addEventListener("upgradeneeded",l=>{i(ps(s.result),l.oldVersion,l.newVersion,ps(s.transaction))}),t&&s.addEventListener("blocked",()=>t()),a.then(l=>{o&&l.addEventListener("close",()=>o()),r&&l.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}(Coe,Eoe,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Dh)}}).catch(n=>{throw ko.create("idb-open",{originalErrorMessage:n.message})})),tx}function nx(){return(nx=m(function*(n){try{return(yield b2()).transaction(Dh).objectStore(Dh).get(C2(n))}catch(e){if(e instanceof ti)Fa.warn(e.message);else{const t=ko.create("idb-get",{originalErrorMessage:e?.message});Fa.warn(t.message)}}})).apply(this,arguments)}function w2(n,e){return ix.apply(this,arguments)}function ix(){return(ix=m(function*(n,e){try{const i=(yield b2()).transaction(Dh,"readwrite");return yield i.objectStore(Dh).put(e,C2(n)),i.done}catch(t){if(t instanceof ti)Fa.warn(t.message);else{const i=ko.create("idb-set",{originalErrorMessage:t?.message});Fa.warn(i.message)}}})).apply(this,arguments)}function C2(n){return`${n.name}!${n.options.appId}`}class Ioe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Moe(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){var e=this;return m(function*(){const i=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=E2();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==r&&!e._heartbeatsCache.heartbeats.some(o=>o.date===r))return e._heartbeatsCache.heartbeats.push({date:r,agent:i}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(o=>{const s=new Date(o.date).valueOf();return Date.now()-s<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return m(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=E2(),{heartbeatsToSend:i,unsentEntries:r}=function Toe(n,e=1024){const t=[];let i=n.slice();for(const r of n){const o=t.find(s=>s.agent===r.agent);if(o){if(o.dates.push(r.date),x2(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),x2(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}(e._heartbeatsCache.heartbeats),o=o_(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(e._heartbeatsCache.heartbeats=r,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o})()}}function E2(){return(new Date).toISOString().substring(0,10)}class Moe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(function*(){return!!bh()&&function lre(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e((null===(o=r.error)||void 0===o?void 0:o.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return m(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function xoe(n){return nx.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return m(function*(){var i;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return w2(t.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return m(function*(){var i;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return w2(t.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function x2(n){return o_(JSON.stringify({version:2,heartbeats:n})).length}!function Aoe(n){Ao(new br("platform-logger",e=>new zre(e),"PRIVATE")),Ao(new br("heartbeat",e=>new Ioe(e),"PRIVATE")),ki(ZE,"0.9.7",n),ki(ZE,"0.9.7","esm2017"),ki("fire-js","")}("");class koe{constructor(e,t){this._delegate=e,this.firebase=t,p_(e,new br("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),_2(this._delegate)))}_getService(e,t=ms){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&"EXPLICIT"===(null===(i=r.getComponent())||void 0===i?void 0:i.instantiationMode)&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=ms){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){p_(this._delegate,e)}_addOrOverwriteComponent(e){m2(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const D2=new Na("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Ooe=function S2(){const n=function Noe(n){const e={},t={__esModule:!0,initializeApp:function o(c,u={}){const d=m_(c,u);if(vr(e,d.name))return e[d.name];const h=new n(d,t);return e[d.name]=h,h},app:r,registerVersion:ki,setLogLevel:v2,onLog:y2,apps:null,SDK_VERSION:_s,INTERNAL:{registerComponent:function a(c){const u=c.name,d=u.replace("-compat","");if(Ao(c)&&"PUBLIC"===c.type){const h=(f=r())=>{if("function"!=typeof f[d])throw D2.create("invalid-app-argument",{appName:u});return f[d]()};void 0!==c.serviceProps&&vh(h,c.serviceProps),t[d]=h,n.prototype[d]=function(...f){return this._getService.bind(this,u).apply(this,c.multipleInstances?f:[])}}return"PUBLIC"===c.type?t[d]:null},removeApp:function i(c){delete e[c]},useAsService:function l(c,u){return"serverAuth"===u?null:u},modularAPIs:ed}};function r(c){if(!vr(e,c=c||ms))throw D2.create("no-app",{appName:c});return e[c]}return t.default=t,Object.defineProperty(t,"apps",{get:function s(){return Object.keys(e).map(c=>e[c])}}),r.App=n,t}(koe);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:S2,extendNamespace:function e(t){vh(n,t)},createSubscribe:s2,ErrorFactory:Na,deepExtend:vh}),n}(),I2=new Eh("@firebase/app-compat");if(function sre(){return"object"==typeof self&&self.self===self}()&&void 0!==self.firebase){I2.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&I2.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ys=Ooe;!function Loe(n){ki("@firebase/app-compat","0.2.7",n)}(),ys.registerVersion("firebase","9.19.1","app-compat");const Sh={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},jc_EMAIL_SIGNIN="EMAIL_SIGNIN",jc_PASSWORD_RESET="PASSWORD_RESET",jc_RECOVER_EMAIL="RECOVER_EMAIL",jc_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",jc_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",jc_VERIFY_EMAIL="VERIFY_EMAIL";const joe=function Uoe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Hoe=function T2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},M2=new Na("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),A2=new Eh("@firebase/auth");function g_(n,...e){A2.logLevel<=ke.ERROR&&A2.error(`Auth (${_s}): ${n}`,...e)}function ln(n,...e){throw rx(n,...e)}function Sn(n,...e){return rx(n,...e)}function k2(n,e,t){const i=Object.assign(Object.assign({},Hoe()),{[e]:t});return new Na("auth","Firebase",i).create(e,{appName:n.name})}function Hc(n,e,t){if(!(e instanceof t))throw t.name!==e.constructor.name&&ln(n,"argument-error"),k2(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rx(n,...e){if("string"!=typeof n){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return M2.create(n,...e)}function R(n,e,...t){if(!n)throw rx(e,...t)}function Wr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw g_(e),new Error(e)}function wr(n,e){n||Wr(e)}const R2=new Map;function Ri(n){wr(n instanceof Function,"Expected a class definition");let e=R2.get(n);return e?(wr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,R2.set(n,e),e)}function Ih(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function ox(){return"http:"===N2()||"https:"===N2()}function N2(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class Th{constructor(e,t){this.shortDelay=e,this.longDelay=t,wr(t>e,"Short delay should be less than long delay!"),this.isMobile=UE()||c_()}get(){return function qoe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ox()||n2()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function sx(n,e){wr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class O2{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Goe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Koe=new Th(3e4,6e4);function At(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function jt(n,e,t,i){return ax.apply(this,arguments)}function ax(){return(ax=m(function*(n,e,t,i,r={}){return P2(n,r,m(function*(){let o={},s={};i&&("GET"===e?s=i:o={body:JSON.stringify(i)});const a=Oa(Object.assign({key:n.config.apiKey},s)).slice(1),l=yield n._getAdditionalHeaders();return l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode),O2.fetch()(F2(n,n.config.apiHost,t,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},o))}))})).apply(this,arguments)}function P2(n,e,t){return lx.apply(this,arguments)}function lx(){return(lx=m(function*(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},Goe),e);try{const r=new Yoe(n),o=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw Mh(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[l,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===l)throw Mh(n,"credential-already-in-use",s);if("EMAIL_EXISTS"===l)throw Mh(n,"email-already-in-use",s);if("USER_DISABLED"===l)throw Mh(n,"user-disabled",s);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw k2(n,u,c);ln(n,u)}}catch(r){if(r instanceof ti)throw r;ln(n,"network-request-failed",{message:String(r)})}})).apply(this,arguments)}function Ro(n,e,t,i){return cx.apply(this,arguments)}function cx(){return(cx=m(function*(n,e,t,i,r={}){const o=yield jt(n,e,t,i,r);return"mfaPendingCredential"in o&&ln(n,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function F2(n,e,t,i){const r=`${e}${t}?${i}`;return n.config.emulator?sx(n.config,r):`${n.config.apiScheme}://${r}`}class Yoe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Sn(this.auth,"network-request-failed")),Koe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mh(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=Sn(n,e,i);return r.customData._tokenResponse=t,r}function ux(){return(ux=m(function*(n,e){return jt(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function dx(){return(dx=m(function*(n,e){return jt(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function hx(){return(hx=m(function*(n,e){return jt(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Ah(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function fx(){return(fx=m(function*(n,e=!1){const t=Y(n),i=yield t.getIdToken(e),r=__(i);R(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const o="object"==typeof r.firebase?r.firebase:void 0,s=o?.sign_in_provider;return{claims:r,token:i,authTime:Ah(px(r.auth_time)),issuedAtTime:Ah(px(r.iat)),expirationTime:Ah(px(r.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function px(n){return 1e3*Number(n)}function __(n){const[e,t,i]=n.split(".");if(void 0===e||void 0===t||void 0===i)return g_("JWT malformed, contained fewer than 3 sections"),null;try{const r=s_(t);return r?JSON.parse(r):(g_("Failed to decode base64 JWT payload"),null)}catch(r){return g_("Caught error parsing JWT payload as JSON",r?.toString()),null}}function No(n,e){return mx.apply(this,arguments)}function mx(){return(mx=m(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(i){throw i instanceof ti&&function tse({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})).apply(this,arguments)}class nse{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),i}{this.errorBackoff=3e4;const r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout(m(function*(){yield t.iteration()}),i)}iteration(){var e=this;return m(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class L2{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ah(this.lastLoginAt),this.creationTime=Ah(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function kh(n){return gx.apply(this,arguments)}function gx(){return gx=m(function*(n){var e;const t=n.auth,i=yield n.getIdToken(),r=yield No(n,function Zoe(n,e){return hx.apply(this,arguments)}(t,{idToken:i}));R(r?.users.length,t,"internal-error");const o=r.users[0];n._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?function ose(n){return n.map(e=>{var{providerId:t}=e,i=Bb(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}(o.providerUserInfo):[],a=function rse(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}(n.providerData,s),u=!!n.isAnonymous&&!(n.email&&o.passwordHash||a?.length),d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new L2(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(n,d)}),gx.apply(this,arguments)}function _x(){return(_x=m(function*(n){const e=Y(n);yield kh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function yx(){return(yx=m(function*(n,e){const t=yield P2(n,{},m(function*(){const i=Oa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,s=F2(n,r,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",O2.fetch()(s,{method:"POST",headers:a,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class Rh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){R(e.idToken,"internal-error"),R(typeof e.idToken<"u","internal-error"),R(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function ese(n){const e=__(n);return R(e,"internal-error"),R(typeof e.exp<"u","internal-error"),R(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var i=this;return m(function*(){return R(!i.accessToken||i.refreshToken,e,"user-token-expired"),t||!i.accessToken||i.isExpired?i.refreshToken?(yield i.refresh(e,i.refreshToken),i.accessToken):null:i.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var i=this;return m(function*(){const{accessToken:r,refreshToken:o,expiresIn:s}=yield function sse(n,e){return yx.apply(this,arguments)}(e,t);i.updateTokensAndExpiration(r,o,Number(s))})()}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*i}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:o}=t,s=new Rh;return i&&(R("string"==typeof i,"internal-error",{appName:e}),s.refreshToken=i),r&&(R("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),o&&(R("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rh,this.toJSON())}_performRefresh(){return Wr("not implemented")}}function vs(n,e){R("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class La{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,o=Bb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nse(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new L2(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var t=this;return m(function*(){const i=yield No(t,t.stsTokenManager.getToken(t.auth,e));return R(i,t.auth,"internal-error"),t.accessToken!==i&&(t.accessToken=i,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),i})()}getIdTokenResult(e){return function Joe(n){return fx.apply(this,arguments)}(this,e)}reload(){return function ise(n){return _x.apply(this,arguments)}(this)}_assign(e){this!==e&&(R(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new La(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){R(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var i=this;return m(function*(){let r=!1;e.idToken&&e.idToken!==i.stsTokenManager.accessToken&&(i.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield kh(i)),yield i.auth._persistUserIfCurrent(i),r&&i.auth._notifyListenersIfCurrent(i)})()}delete(){var e=this;return m(function*(){const t=yield e.getIdToken();return yield No(e,function Qoe(n,e){return ux.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,o,s,a,l,c,u;const d=null!==(i=t.displayName)&&void 0!==i?i:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,g=null!==(a=t.tenantId)&&void 0!==a?a:void 0,_=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,v=null!==(c=t.createdAt)&&void 0!==c?c:void 0,E=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:b,emailVerified:N,isAnonymous:W,providerData:H,stsTokenManager:Le}=t;R(b&&Le,e,"internal-error");const Xt=Rh.fromJSON(this.name,Le);R("string"==typeof b,e,"internal-error"),vs(d,e.name),vs(h,e.name),R("boolean"==typeof N,e,"internal-error"),R("boolean"==typeof W,e,"internal-error"),vs(f,e.name),vs(p,e.name),vs(g,e.name),vs(_,e.name),vs(v,e.name),vs(E,e.name);const ji=new La({uid:b,auth:e,email:h,emailVerified:N,displayName:d,isAnonymous:W,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:Xt,createdAt:v,lastLoginAt:E});return H&&Array.isArray(H)&&(ji.providerData=H.map(Ir=>Object.assign({},Ir))),_&&(ji._redirectEventId=_),ji}static _fromIdTokenResponse(e,t,i=!1){return m(function*(){const r=new Rh;r.updateFromServerResponse(t);const o=new La({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield kh(o),o})()}}const zc=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(function*(){return!0})()}_set(t,i){var r=this;return m(function*(){r.storage[t]=i})()}_get(t){var i=this;return m(function*(){const r=i.storage[t];return void 0===r?null:r})()}_remove(t){var i=this;return m(function*(){delete i.storage[t]})()}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})();function Va(n,e,t){return`firebase:${n}:${e}:${t}`}class $c{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Va(this.userKey,r.apiKey,o),this.fullPersistenceKey=Va("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return m(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?La._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return m(function*(){if(t.persistence===e)return;const i=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,i?t.setCurrentUser(i):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return m(function*(){if(!t.length)return new $c(Ri(zc),e,i);const r=(yield Promise.all(t.map(function(){var c=m(function*(u){if(yield u._isAvailable())return u});return function(u){return c.apply(this,arguments)}}()))).filter(c=>c);let o=r[0]||Ri(zc);const s=Va(i,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=yield c._get(s);if(u){const d=La._fromJSON(e,u);c!==o&&(a=d),o=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return o._shouldAllowMigration&&l.length?(o=l[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(function(){var c=m(function*(u){if(u!==o)try{yield u._remove(s)}catch{}});return function(u){return c.apply(this,arguments)}}())),new $c(o,e,i)):new $c(o,e,i)})()}}function V2(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(j2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(B2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(H2(e))return"Blackberry";if(z2(e))return"Webos";if(vx(e))return"Safari";if((e.includes("chrome/")||U2(e))&&!e.includes("edge/"))return"Chrome";if(Nh(e))return"Android";{const i=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===i?.length)return i[1]}return"Other"}function B2(n=ft()){return/firefox\//i.test(n)}function vx(n=ft()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function U2(n=ft()){return/crios\//i.test(n)}function j2(n=ft()){return/iemobile/i.test(n)}function Nh(n=ft()){return/android/i.test(n)}function H2(n=ft()){return/blackberry/i.test(n)}function z2(n=ft()){return/webos/i.test(n)}function qc(n=ft()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $2(n=ft()){return qc(n)||Nh(n)||z2(n)||H2(n)||/windows phone/i.test(n)||j2(n)}function q2(n,e=[]){let t;switch(n){case"Browser":t=V2(ft());break;case"Worker":t=`${V2(ft())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${_s}/${i}`}class dse{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((s,a)=>{try{s(e(o))}catch(l){a(l)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return m(function*(){if(t.auth.currentUser===e)return;const i=[];try{for(const r of t.queue)yield r(e),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const o of i)try{o()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})()}}class hse{constructor(e,t,i){this.app=e,this.heartbeatServiceProvider=t,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W2(this),this.idTokenSubscription=new W2(this),this.beforeStateQueue=new dse(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=M2,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var i=this;return t&&(this._popupRedirectResolver=Ri(t)),this._initializationPromise=this.queue(m(function*(){var r,o;if(!i._deleted&&(i.persistenceManager=yield $c.create(i,e),!i._deleted)){if(null!==(r=i._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{yield i._popupRedirectResolver._initialize(i)}catch{}yield i.initializeCurrentUser(t),i.lastNotifiedUid=(null===(o=i.currentUser)||void 0===o?void 0:o.uid)||null,!i._deleted&&(i._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return m(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return m(function*(){var i;const r=yield t.assertedPersistence.getCurrentUser();let o=r,s=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId,l=o?._redirectEventId,c=yield t.tryRedirectSignIn(e);(!a||a===l)&&c?.user&&(o=c.user,s=!0)}if(!o)return t.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield t.beforeStateQueue.runMiddleware(o)}catch(a){o=r,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return o?t.reloadAndSetCurrentUserOrClear(o):t.directlySetCurrentUser(null)}return R(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===o._redirectEventId?t.directlySetCurrentUser(o):t.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var t=this;return m(function*(){let i=null;try{i=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return i})()}reloadAndSetCurrentUserOrClear(e){var t=this;return m(function*(){try{yield kh(e)}catch(i){if("auth/network-request-failed"!==i?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Woe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return m(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return m(function*(){const i=e?Y(e):null;return i&&R(i.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(i&&i._clone(t))})()}_updateCurrentUser(e,t=!1){var i=this;return m(function*(){if(!i._deleted)return e&&R(i.tenantId===e.tenantId,i,"tenant-id-mismatch"),t||(yield i.beforeStateQueue.runMiddleware(e)),i.queue(m(function*(){yield i.directlySetCurrentUser(e),i.notifyAuthListeners()}))})()}signOut(){var e=this;return m(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(m(function*(){yield t.assertedPersistence.setPersistence(Ri(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Na("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var i=this;return m(function*(){const r=yield i.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return m(function*(){if(!t.redirectPersistenceManager){const i=e&&Ri(e)||t._popupRedirectResolver;R(i,t,"argument-error"),t.redirectPersistenceManager=yield $c.create(t,[Ri(i._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return m(function*(){var i,r;return t._isInitialized&&(yield t.queue(m(function*(){}))),(null===(i=t._currentUser)||void 0===i?void 0:i._redirectEventId)===e?t._currentUser:(null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return m(function*(){if(e===t.currentUser)return t.queue(m(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const o="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return R(s,this,"internal-error"),s.then(()=>o(this.currentUser)),"function"==typeof t?e.addObserver(t,i,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return m(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return R(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=q2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return m(function*(){var t;const i={"X-Client-Version":e.clientVersion};e.app.options.appId&&(i["X-Firebase-gmpid"]=e.app.options.appId);const r=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return r&&(i["X-Firebase-Client"]=r),i})()}}function cn(n){return Y(n)}class W2{constructor(e){this.auth=e,this.observer=null,this.addObserver=s2(t=>this.observer=t)}get next(){return R(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function K2(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Y2(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class Wc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wr("not implemented")}_getIdTokenResponse(e){return Wr("not implemented")}_linkToIdToken(e,t){return Wr("not implemented")}_getReauthenticationResolver(e){return Wr("not implemented")}}function Q2(n,e){return bx.apply(this,arguments)}function bx(){return(bx=m(function*(n,e){return jt(n,"POST","/v1/accounts:resetPassword",At(n,e))})).apply(this,arguments)}function X2(n,e){return wx.apply(this,arguments)}function wx(){return(wx=m(function*(n,e){return jt(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function Cx(){return(Cx=m(function*(n,e){return jt(n,"POST","/v1/accounts:update",At(n,e))})).apply(this,arguments)}function Ex(){return(Ex=m(function*(n,e){return Ro(n,"POST","/v1/accounts:signInWithPassword",At(n,e))})).apply(this,arguments)}function y_(n,e){return xx.apply(this,arguments)}function xx(){return(xx=m(function*(n,e){return jt(n,"POST","/v1/accounts:sendOobCode",At(n,e))})).apply(this,arguments)}function Dx(){return(Dx=m(function*(n,e){return y_(n,e)})).apply(this,arguments)}function Sx(){return(Sx=m(function*(n,e){return y_(n,e)})).apply(this,arguments)}function Ix(){return(Ix=m(function*(n,e){return y_(n,e)})).apply(this,arguments)}function Tx(){return(Tx=m(function*(n,e){return y_(n,e)})).apply(this,arguments)}function Mx(){return(Mx=m(function*(n,e){return Ro(n,"POST","/v1/accounts:signInWithEmailLink",At(n,e))})).apply(this,arguments)}function Ax(){return(Ax=m(function*(n,e){return Ro(n,"POST","/v1/accounts:signInWithEmailLink",At(n,e))})).apply(this,arguments)}class Oh extends Wc{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Oh(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Oh(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return m(function*(){switch(t.signInMethod){case"password":return function gse(n,e){return Ex.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function wse(n,e){return Mx.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:ln(e,"internal-error")}})()}_linkToIdToken(e,t){var i=this;return m(function*(){switch(i.signInMethod){case"password":return X2(e,{idToken:t,returnSecureToken:!0,email:i._email,password:i._password});case"emailLink":return function Cse(n,e){return Ax.apply(this,arguments)}(e,{idToken:t,email:i._email,oobCode:i._password});default:ln(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Oo(n,e){return kx.apply(this,arguments)}function kx(){return(kx=m(function*(n,e){return Ro(n,"POST","/v1/accounts:signInWithIdp",At(n,e))})).apply(this,arguments)}class Gr extends Wc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Gr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ln("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,o=Bb(t,["providerId","signInMethod"]);if(!i||!r)return null;const s=new Gr(i,r);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){return Oo(e,this.buildRequest())}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Oo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oo(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Oa(t)}return e}}function Rx(){return(Rx=m(function*(n,e){return jt(n,"POST","/v1/accounts:sendVerificationCode",At(n,e))})).apply(this,arguments)}function Nx(){return(Nx=m(function*(n,e){return Ro(n,"POST","/v1/accounts:signInWithPhoneNumber",At(n,e))})).apply(this,arguments)}function Ox(){return(Ox=m(function*(n,e){const t=yield Ro(n,"POST","/v1/accounts:signInWithPhoneNumber",At(n,e));if(t.temporaryProof)throw Mh(n,"account-exists-with-different-credential",t);return t})).apply(this,arguments)}const Ise={USER_NOT_FOUND:"user-not-found"};function Px(){return(Px=m(function*(n,e){return Ro(n,"POST","/v1/accounts:signInWithPhoneNumber",At(n,Object.assign(Object.assign({},e),{operation:"REAUTH"})),Ise)})).apply(this,arguments)}class Ba extends Wc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ba({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ba({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return function Dse(n,e){return Nx.apply(this,arguments)}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return function Sse(n,e){return Ox.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return function Tse(n,e){return Px.apply(this,arguments)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:o}=e;return i||t||r||o?new Ba({verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:o}):null}}class Ph{constructor(e){var t,i,r,o,s,a;const l=Uc(Ch(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(i=l.oobCode)&&void 0!==i?i:null,d=function Mse(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);R(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(o=l.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(s=l.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function Ase(n){const e=Uc(Ch(n)).link,t=e?Uc(Ch(e)).deep_link_id:null,i=Uc(Ch(n)).deep_link_id;return(i?Uc(Ch(i)).link:null)||i||t||e||n}(e);try{return new Ph(t)}catch{return null}}}let Fx=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return Oh._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const r=Ph.parseLink(i);return R(r,"argument-error"),Oh._fromEmailAndCode(t,r.code,r.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class Po{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Gc extends Po{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Kc extends Gc{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return R("providerId"in t&&"signInMethod"in t,"argument-error"),Gr._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return R(e.idToken||e.accessToken,"argument-error"),Gr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Kc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Kc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:o,nonce:s,providerId:a}=e;if(!i&&!r&&!t&&!o||!a)return null;try{return new Kc(a)._credential({idToken:t,accessToken:i,nonce:s,pendingToken:o})}catch{return null}}}let Z2=(()=>{class n extends Gc{constructor(){super("facebook.com")}static credential(t){return Gr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch{return null}}}return n.FACEBOOK_SIGN_IN_METHOD="facebook.com",n.PROVIDER_ID="facebook.com",n})(),J2=(()=>{class n extends Gc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return Gr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return n.credential(i,r)}catch{return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})(),eU=(()=>{class n extends Gc{constructor(){super("github.com")}static credential(t){return Gr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch{return null}}}return n.GITHUB_SIGN_IN_METHOD="github.com",n.PROVIDER_ID="github.com",n})();class Yc extends Wc{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Oo(e,this.buildRequest())}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Oo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oo(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:i,signInMethod:r,pendingToken:o}=t;return i&&r&&o&&i===r?new Yc(i,o):null}static _create(e,t){return new Yc(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class v_ extends Po{constructor(e){R(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return v_.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return v_.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Yc.fromJSON(e);return R(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:i}=e;if(!t||!i)return null;try{return Yc._create(i,t)}catch{return null}}}let tU=(()=>{class n extends Gc{constructor(){super("twitter.com")}static credential(t,i){return Gr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:r}=t;if(!i||!r)return null;try{return n.credential(i,r)}catch{return null}}}return n.TWITTER_SIGN_IN_METHOD="twitter.com",n.PROVIDER_ID="twitter.com",n})();function nU(n,e){return Lx.apply(this,arguments)}function Lx(){return(Lx=m(function*(n,e){return Ro(n,"POST","/v1/accounts:signUp",At(n,e))})).apply(this,arguments)}class Ji{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return m(function*(){const o=yield La._fromIdTokenResponse(e,i,r),s=iU(i);return new Ji({user:o,providerId:s,_tokenResponse:i,operationType:t})})()}static _forOperation(e,t,i){return m(function*(){yield e._updateTokensIfNecessary(i,!0);const r=iU(i);return new Ji({user:e,providerId:r,_tokenResponse:i,operationType:t})})()}}function iU(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}function Vx(){return(Vx=m(function*(n){var e;const t=cn(n);if(yield t._initializationPromise,null!==(e=t.currentUser)&&void 0!==e&&e.isAnonymous)return new Ji({user:t.currentUser,providerId:null,operationType:"signIn"});const i=yield nU(t,{returnSecureToken:!0}),r=yield Ji._fromIdTokenResponse(t,"signIn",i,!0);return yield t._updateCurrentUser(r.user),r})).apply(this,arguments)}class b_ extends ti{constructor(e,t,i,r){var o;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,b_.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new b_(e,t,i,r)}}function rU(n,e,t,i){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?b_._fromErrorAndOperation(n,o,e,i):o})}function oU(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}function Bx(){return Bx=m(function*(n,e){const t=Y(n);yield w_(!0,t,e);const{providerUserInfo:i}=yield function Xoe(n,e){return dx.apply(this,arguments)}(t.auth,{idToken:yield t.getIdToken(),deleteProvider:[e]}),r=oU(i||[]);return t.providerData=t.providerData.filter(o=>r.has(o.providerId)),r.has("phone")||(t.phoneNumber=null),yield t.auth._persistUserIfCurrent(t),t}),Bx.apply(this,arguments)}function Ux(n,e){return jx.apply(this,arguments)}function jx(){return(jx=m(function*(n,e,t=!1){const i=yield No(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ji._forOperation(n,"link",i)})).apply(this,arguments)}function w_(n,e,t){return Hx.apply(this,arguments)}function Hx(){return(Hx=m(function*(n,e,t){yield kh(e);const r=!1===n?"provider-already-linked":"no-such-provider";R(oU(e.providerData).has(t)===n,e.auth,r)})).apply(this,arguments)}function sU(n,e){return zx.apply(this,arguments)}function zx(){return(zx=m(function*(n,e,t=!1){const{auth:i}=n,r="reauthenticate";try{const o=yield No(n,rU(i,r,e,n),t);R(o.idToken,i,"internal-error");const s=__(o.idToken);R(s,i,"internal-error");const{sub:a}=s;return R(n.uid===a,i,"user-mismatch"),Ji._forOperation(n,r,o)}catch(o){throw"auth/user-not-found"===o?.code&&ln(i,"user-mismatch"),o}})).apply(this,arguments)}function aU(n,e){return $x.apply(this,arguments)}function $x(){return($x=m(function*(n,e,t=!1){const i="signIn",r=yield rU(n,i,e),o=yield Ji._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(o.user)),o})).apply(this,arguments)}function C_(n,e){return qx.apply(this,arguments)}function qx(){return(qx=m(function*(n,e){return aU(cn(n),e)})).apply(this,arguments)}function lU(n,e){return Wx.apply(this,arguments)}function Wx(){return(Wx=m(function*(n,e){const t=Y(n);return yield w_(!1,t,e.providerId),Ux(t,e)})).apply(this,arguments)}function cU(n,e){return Gx.apply(this,arguments)}function Gx(){return(Gx=m(function*(n,e){return sU(Y(n),e)})).apply(this,arguments)}function Kx(){return(Kx=m(function*(n,e){return Ro(n,"POST","/v1/accounts:signInWithCustomToken",At(n,e))})).apply(this,arguments)}function Yx(){return Yx=m(function*(n,e){const t=cn(n),i=yield function Pse(n,e){return Kx.apply(this,arguments)}(t,{token:e,returnSecureToken:!0}),r=yield Ji._fromIdTokenResponse(t,"signIn",i);return yield t._updateCurrentUser(r.user),r}),Yx.apply(this,arguments)}class Fh{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Qx._fromServerResponse(e,t):"totpInfo"in t?Xx._fromServerResponse(e,t):ln(e,"internal-error")}}class Qx extends Fh{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Qx(t)}}class Xx extends Fh{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Xx(t)}}function E_(n,e,t){var i;R((null===(i=t.url)||void 0===i?void 0:i.length)>0,n,"invalid-continue-uri"),R(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(R(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(R(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function Zx(){return Zx=m(function*(n,e,t){const i=Y(n),r={requestType:"PASSWORD_RESET",email:e};t&&E_(i,r,t),yield function yse(n,e){return Sx.apply(this,arguments)}(i,r)}),Zx.apply(this,arguments)}function Jx(){return(Jx=m(function*(n,e,t){yield Q2(Y(n),{oobCode:e,newPassword:t})})).apply(this,arguments)}function eD(){return eD=m(function*(n,e){yield function mse(n,e){return Cx.apply(this,arguments)}(Y(n),{oobCode:e})}),eD.apply(this,arguments)}function uU(n,e){return tD.apply(this,arguments)}function tD(){return(tD=m(function*(n,e){const t=Y(n),i=yield Q2(t,{oobCode:e}),r=i.requestType;switch(R(r,t,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":R(i.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":R(i.mfaInfo,t,"internal-error");default:R(i.email,t,"internal-error")}let o=null;return i.mfaInfo&&(o=Fh._fromServerResponse(cn(t),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:r}})).apply(this,arguments)}function nD(){return(nD=m(function*(n,e){const{data:t}=yield uU(Y(n),e);return t.email})).apply(this,arguments)}function iD(){return(iD=m(function*(n,e,t){const i=cn(n),r=yield nU(i,{returnSecureToken:!0,email:e,password:t}),o=yield Ji._fromIdTokenResponse(i,"signIn",r);return yield i._updateCurrentUser(o.user),o})).apply(this,arguments)}function rD(){return rD=m(function*(n,e,t){const i=Y(n),r={requestType:"EMAIL_SIGNIN",email:e};R(t.handleCodeInApp,i,"argument-error"),t&&E_(i,r,t),yield function vse(n,e){return Ix.apply(this,arguments)}(i,r)}),rD.apply(this,arguments)}function oD(){return(oD=m(function*(n,e,t){const i=Y(n),r=Fx.credentialWithLink(e,t||Ih());return R(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),C_(i,r)})).apply(this,arguments)}function sD(){return(sD=m(function*(n,e){return jt(n,"POST","/v1/accounts:createAuthUri",At(n,e))})).apply(this,arguments)}function aD(){return aD=m(function*(n,e){const i={identifier:e,continueUri:ox()?Ih():"http://localhost"},{signinMethods:r}=yield function Wse(n,e){return sD.apply(this,arguments)}(Y(n),i);return r||[]}),aD.apply(this,arguments)}function lD(){return lD=m(function*(n,e){const t=Y(n),r={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&E_(t.auth,r,e);const{email:o}=yield function _se(n,e){return Dx.apply(this,arguments)}(t.auth,r);o!==n.email&&(yield n.reload())}),lD.apply(this,arguments)}function cD(){return cD=m(function*(n,e,t){const i=Y(n),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield n.getIdToken(),newEmail:e};t&&E_(i.auth,o,t);const{email:s}=yield function bse(n,e){return Tx.apply(this,arguments)}(i.auth,o);s!==n.email&&(yield n.reload())}),cD.apply(this,arguments)}function uD(){return(uD=m(function*(n,e){return jt(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function dD(){return dD=m(function*(n,{displayName:e,photoURL:t}){if(void 0===e&&void 0===t)return;const i=Y(n),o={idToken:yield i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},s=yield No(i,function Qse(n,e){return uD.apply(this,arguments)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const a=i.providerData.find(({providerId:l})=>"password"===l);a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),yield i._updateTokensIfNecessary(s)}),dD.apply(this,arguments)}function dU(n,e,t){return hD.apply(this,arguments)}function hD(){return(hD=m(function*(n,e,t){const{auth:i}=n,o={idToken:yield n.getIdToken(),returnSecureToken:!0};e&&(o.email=e),t&&(o.password=t);const s=yield No(n,X2(i,o));yield n._updateTokensIfNecessary(s,!0)})).apply(this,arguments)}class Qc{constructor(e,t,i={}){this.isNewUser=e,this.providerId=t,this.profile=i}}class hU extends Qc{constructor(e,t,i,r){super(e,t,i),this.username=r}}class tae extends Qc{constructor(e,t){super(e,"facebook.com",t)}}class nae extends hU{constructor(e,t){super(e,"github.com",t,"string"==typeof t?.login?t?.login:null)}}class iae extends Qc{constructor(e,t){super(e,"google.com",t)}}class rae extends hU{constructor(e,t,i){super(e,"twitter.com",t,i)}}function oae(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:function eae(n){var e,t;if(!n)return null;const{providerId:i}=n,r=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},o=n.isNewUser||"identitytoolkit#SignupNewUserResponse"===n.kind;if(!i&&n?.idToken){const s=null===(t=null===(e=__(n.idToken))||void 0===e?void 0:e.firebase)||void 0===t?void 0:t.sign_in_provider;if(s)return new Qc(o,"anonymous"!==s&&"custom"!==s?s:null)}if(!i)return null;switch(i){case"facebook.com":return new tae(o,r);case"github.com":return new nae(o,r);case"google.com":return new iae(o,r);case"twitter.com":return new rae(o,r,n.screenName||null);case"custom":case"anonymous":return new Qc(o,null);default:return new Qc(o,i,r)}}(t)}class Ua{constructor(e,t,i){this.type=e,this.credential=t,this.auth=i}static _fromIdtoken(e,t){return new Ua("enroll",e,t)}static _fromMfaPendingCredential(e){return new Ua("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,i;if(e?.multiFactorSession){if(null!==(t=e.multiFactorSession)&&void 0!==t&&t.pendingCredential)return Ua._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null!==(i=e.multiFactorSession)&&void 0!==i&&i.idToken)return Ua._fromIdtoken(e.multiFactorSession.idToken)}return null}}class pD{constructor(e,t,i){this.session=e,this.hints=t,this.signInResolver=i}static _fromError(e,t){const i=cn(e),r=t.customData._serverResponse,o=(r.mfaInfo||[]).map(a=>Fh._fromServerResponse(i,a));R(r.mfaPendingCredential,i,"internal-error");const s=Ua._fromMfaPendingCredential(r.mfaPendingCredential);return new pD(s,o,function(){var a=m(function*(l){const c=yield l._process(i,s);delete r.mfaInfo,delete r.mfaPendingCredential;const u=Object.assign(Object.assign({},r),{idToken:c.idToken,refreshToken:c.refreshToken});switch(t.operationType){case"signIn":const d=yield Ji._fromIdTokenResponse(i,t.operationType,u);return yield i._updateCurrentUser(d.user),d;case"reauthenticate":return R(t.user,i,"internal-error"),Ji._forOperation(t.user,t.operationType,u);default:ln(i,"internal-error")}});return function(l){return a.apply(this,arguments)}}())}resolveSignIn(e){var t=this;return m(function*(){return t.signInResolver(e)})()}}class mD{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(i=>Fh._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new mD(e)}getSession(){var e=this;return m(function*(){return Ua._fromIdtoken(yield e.user.getIdToken(),e.user.auth)})()}enroll(e,t){var i=this;return m(function*(){const r=e,o=yield i.getSession(),s=yield No(i.user,r._process(i.user.auth,o,t));return yield i.user._updateTokensIfNecessary(s),i.user.reload()})()}unenroll(e){var t=this;return m(function*(){const i="string"==typeof e?e:e.uid,r=yield t.user.getIdToken();try{const o=yield No(t.user,function hae(n,e){return jt(n,"POST","/v2/accounts/mfaEnrollment:withdraw",At(n,e))}(t.user.auth,{idToken:r,mfaEnrollmentId:i}));t.enrolledFactors=t.enrolledFactors.filter(({uid:s})=>s!==i),yield t.user._updateTokensIfNecessary(o),yield t.user.reload()}catch(o){throw o}})()}}const gD=new WeakMap,x_="__sak";class fU{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(x_,"1"),this.storage.removeItem(x_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const D_=(()=>{class n extends fU{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function pae(){const n=ft();return vx(n)||qc(n)}()&&function use(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=$2(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),o=this.localCache[i];r!==o&&t(i,o,r)}}onStorageEvent(t,i=!1){if(!t.key)return void this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});const r=t.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(r);if(t.newValue!==a)null!==t.newValue?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!i)return}const o=()=>{const a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);!function cse(){return r2()&&10===document.documentMode}()||s===t.newValue||t.newValue===t.oldValue?o():setTimeout(o,10)}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,i){var r=()=>super._set,o=this;return m(function*(){yield r().call(o,t,i),o.localCache[t]=JSON.stringify(i)})()}_get(t){var i=()=>super._get,r=this;return m(function*(){const o=yield i().call(r,t);return r.localCache[t]=JSON.stringify(o),o})()}_remove(t){var i=()=>super._remove,r=this;return m(function*(){yield i().call(r,t),delete r.localCache[t]})()}}return n.type="LOCAL",n})(),bs=(()=>{class n extends fU{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})();let yae=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(o=>o.isListeningto(t));if(i)return i;const r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){var i=this;return m(function*(){const r=t,{eventId:o,eventType:s,data:a}=r.data,l=i.handlersMap[s];if(!l?.size)return;r.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const c=Array.from(l).map(function(){var d=m(function*(h){return h(r.origin,a)});return function(h){return d.apply(this,arguments)}}()),u=yield function _ae(n){return Promise.all(n.map(function(){var e=m(function*(t){try{return{fulfilled:!0,value:yield t}}catch(i){return{fulfilled:!1,reason:i}}});return function(t){return e.apply(this,arguments)}}()))}(c);r.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:u})})()}_subscribe(t,i){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function Lh(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(10*Math.random());return n+t}class vae{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){var r=this;return m(function*(){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let s,a;return new Promise((l,c)=>{const u=Lh("",20);o.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:o,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(f.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"))}}},r.handlers.add(a),o.port1.addEventListener("message",a.onMessage),r.target.postMessage({eventType:e,eventId:u,data:t},[o.port2])}).finally(()=>{a&&r.removeMessageHandler(a)})})()}}function nn(){return window}function _D(){return typeof nn().WorkerGlobalScope<"u"&&"function"==typeof nn().importScripts}function yD(){return(yD=m(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const pU="firebaseLocalStorageDb",xae=1,S_="firebaseLocalStorage",mU="fbase_key";class Vh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function I_(n,e){return n.transaction([S_],e?"readwrite":"readonly").objectStore(S_)}function vD(){const n=indexedDB.open(pU,xae);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(S_,{keyPath:mU})}catch(r){t(r)}}),n.addEventListener("success",m(function*(){const i=n.result;i.objectStoreNames.contains(S_)?e(i):(i.close(),yield function Dae(){const n=indexedDB.deleteDatabase(pU);return new Vh(n).toPromise()}(),e(yield vD()))}))})}function gU(n,e,t){return bD.apply(this,arguments)}function bD(){return(bD=m(function*(n,e,t){const i=I_(n,!0).put({[mU]:e,value:t});return new Vh(i).toPromise()})).apply(this,arguments)}function wD(){return(wD=m(function*(n,e){const t=I_(n,!1).get(e),i=yield new Vh(t).toPromise();return void 0===i?null:i.value})).apply(this,arguments)}function _U(n,e){const t=I_(n,!0).delete(e);return new Vh(t).toPromise()}const Xc=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return m(function*(){return t.db||(t.db=yield vD()),t.db})()}_withRetries(t){var i=this;return m(function*(){let r=0;for(;;)try{const o=yield i._openDb();return yield t(o)}catch(o){if(r++>3)throw o;i.db&&(i.db.close(),i.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return m(function*(){return _D()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return m(function*(){t.receiver=yae._getInstance(function Eae(){return _D()?self:null}()),t.receiver._subscribe("keyChanged",function(){var i=m(function*(r,o){return{keyProcessed:(yield t._poll()).includes(o.key)}});return function(r,o){return i.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var i=m(function*(r,o){return["keyChanged"]});return function(r,o){return i.apply(this,arguments)}}())})()}initializeSender(){var t=this;return m(function*(){var i,r;if(t.activeServiceWorker=yield function wae(){return yD.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new vae(t.activeServiceWorker);const o=yield t.sender._send("ping",{},800);o&&null!==(i=o[0])&&void 0!==i&&i.fulfilled&&null!==(r=o[0])&&void 0!==r&&r.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var i=this;return m(function*(){if(i.sender&&i.activeServiceWorker&&function Cae(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===i.activeServiceWorker)try{yield i.sender._send("keyChanged",{key:t},i.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return m(function*(){try{if(!indexedDB)return!1;const t=yield vD();return yield gU(t,x_,"1"),yield _U(t,x_),!0}catch{}return!1})()}_withPendingWrite(t){var i=this;return m(function*(){i.pendingWrites++;try{yield t()}finally{i.pendingWrites--}})()}_set(t,i){var r=this;return m(function*(){return r._withPendingWrite(m(function*(){return yield r._withRetries(o=>gU(o,t,i)),r.localCache[t]=i,r.notifyServiceWorker(t)}))})()}_get(t){var i=this;return m(function*(){const r=yield i._withRetries(o=>function Sae(n,e){return wD.apply(this,arguments)}(o,t));return i.localCache[t]=r,r})()}_remove(t){var i=this;return m(function*(){return i._withPendingWrite(m(function*(){return yield i._withRetries(r=>_U(r,t)),delete i.localCache[t],i.notifyServiceWorker(t)}))})()}_poll(){var t=this;return m(function*(){const i=yield t._withRetries(s=>{const a=I_(s,!1).getAll();return new Vh(a).toPromise()});if(!i)return[];if(0!==t.pendingWrites)return[];const r=[],o=new Set;for(const{fbase_key:s,value:a}of i)o.add(s),JSON.stringify(t.localCache[s])!==JSON.stringify(a)&&(t.notifyListeners(s,a),r.push(s));for(const s of Object.keys(t.localCache))t.localCache[s]&&!o.has(s)&&(t.notifyListeners(s,null),r.push(s));return r})()}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(i)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(m(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function CD(){return(CD=m(function*(n){return(yield jt(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function yU(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const o=Sn("internal-error");o.customData=r,t(o)},i.type="text/javascript",i.charset="UTF-8",function Nae(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(i)})}function vU(n){return`__${n}${Math.floor(1e6*Math.random())}`}const T_=1e12;class Fae{constructor(e){this.auth=e,this.counter=T_,this._widgets=new Map}render(e,t){const i=this.counter;return this._widgets.set(i,new Lae(e,this.auth.name,t||{})),this.counter++,i}reset(e){var t;const i=e||T_;null===(t=this._widgets.get(i))||void 0===t||t.delete(),this._widgets.delete(i)}getResponse(e){var t;return(null===(t=this._widgets.get(e||T_))||void 0===t?void 0:t.getResponse())||""}execute(e){var t=this;return m(function*(){var i;return null===(i=t._widgets.get(e||T_))||void 0===i||i.execute(),""})()}}class Lae{constructor(e,t,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;R(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Vae(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<n;i++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ED=vU("rcb"),Bae=new Th(3e4,6e4);class jae{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(e=nn().grecaptcha)||void 0===e||!e.render)}load(e,t=""){return R(function Hae(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(nn().grecaptcha):new Promise((i,r)=>{const o=nn().setTimeout(()=>{r(Sn(e,"network-request-failed"))},Bae.get());nn()[ED]=()=>{nn().clearTimeout(o),delete nn()[ED];const a=nn().grecaptcha;if(!a)return void r(Sn(e,"internal-error"));const l=a.render;a.render=(c,u)=>{const d=l(c,u);return this.counter++,d},this.hostLanguage=t,i(a)},yU(`https://www.google.com/recaptcha/api.js??${Oa({onload:ED,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(o),r(Sn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!(null===(t=nn().grecaptcha)||void 0===t||!t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class zae{load(e){return m(function*(){return new Fae(e)})()}clearedOneInstance(){}}const bU="recaptcha",$ae={theme:"light",type:"image"};class qae{constructor(e,t=Object.assign({},$ae),i){this.parameters=t,this.type=bU,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=cn(i),this.isInvisible="invisible"===this.parameters.size,R(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;R(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new zae:new jae,this.validateStartingState()}verify(){var e=this;return m(function*(){e.assertNotDestroyed();const t=yield e.render(),i=e.getAssertedRecaptcha();return i.getResponse(t)||new Promise(o=>{const s=a=>{a&&(e.tokenChangeListeners.delete(s),o(a))};e.tokenChangeListeners.add(s),e.isInvisible&&i.execute(t)})})()}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){R(!this.parameters.sitekey,this.auth,"argument-error"),R(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),R(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(i=>i(t)),"function"==typeof e)e(t);else if("string"==typeof e){const i=nn()[e];"function"==typeof i&&i(t)}}}assertNotDestroyed(){R(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var e=this;return m(function*(){if(yield e.init(),!e.widgetId){let t=e.container;if(!e.isInvisible){const i=document.createElement("div");t.appendChild(i),t=i}e.widgetId=e.getAssertedRecaptcha().render(t,e.parameters)}return e.widgetId})()}init(){var e=this;return m(function*(){R(ox()&&!_D(),e.auth,"internal-error"),yield function Wae(){let n=null;return new Promise(e=>{"complete"!==document.readyState?(n=()=>e(),window.addEventListener("load",n)):e()}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}(),e.recaptcha=yield e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);const t=yield function Rae(n){return CD.apply(this,arguments)}(e.auth);R(t,e.auth,"internal-error"),e.parameters.sitekey=t})()}getAssertedRecaptcha(){return R(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class xD{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Ba._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}function DD(){return(DD=m(function*(n,e,t){const i=cn(n),r=yield M_(i,e,Y(t));return new xD(r,o=>C_(i,o))})).apply(this,arguments)}function SD(){return(SD=m(function*(n,e,t){const i=Y(n);yield w_(!1,i,"phone");const r=yield M_(i.auth,e,Y(t));return new xD(r,o=>lU(i,o))})).apply(this,arguments)}function ID(){return(ID=m(function*(n,e,t){const i=Y(n),r=yield M_(i.auth,e,Y(t));return new xD(r,o=>cU(i,o))})).apply(this,arguments)}function M_(n,e,t){return TD.apply(this,arguments)}function TD(){return TD=m(function*(n,e,t){var i;const r=yield t.verify();try{let o;if(R("string"==typeof r,n,"argument-error"),R(t.type===bU,n,"argument-error"),o="string"==typeof e?{phoneNumber:e}:e,"session"in o){const s=o.session;if("phoneNumber"in o)return R("enroll"===s.type,n,"internal-error"),(yield function cae(n,e){return jt(n,"POST","/v2/accounts/mfaEnrollment:start",At(n,e))}(n,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{R("signin"===s.type,n,"internal-error");const a=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid;return R(a,n,"missing-multi-factor-info"),(yield function Mae(n,e){return jt(n,"POST","/v2/accounts/mfaSignIn:start",At(n,e))}(n,{mfaPendingCredential:s.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:s}=yield function xse(n,e){return Rx.apply(this,arguments)}(n,{phoneNumber:o.phoneNumber,recaptchaToken:r});return s}}finally{t._reset()}}),TD.apply(this,arguments)}function MD(){return(MD=m(function*(n,e){yield Ux(Y(n),e)})).apply(this,arguments)}let Bh=(()=>{class n{constructor(t){this.providerId=n.PROVIDER_ID,this.auth=cn(t)}verifyPhoneNumber(t,i){return M_(this.auth,t,Y(i))}static credential(t,i){return Ba._fromVerification(t,i)}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:i,temporaryProof:r}=t;return i&&r?Ba._fromTokenResponse(i,r):null}}return n.PROVIDER_ID="phone",n.PHONE_SIGN_IN_METHOD="phone",n})();function ja(n,e){return e?Ri(e):(R(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class AD extends Wc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Xae(n){return aU(n.auth,new AD(n),n.bypassAuthState)}function Zae(n){const{auth:e,user:t}=n;return R(t,e,"internal-error"),sU(t,new AD(n),n.bypassAuthState)}function Jae(n){return kD.apply(this,arguments)}function kD(){return(kD=m(function*(n){const{auth:e,user:t}=n;return R(t,e,"internal-error"),Ux(t,new AD(n),n.bypassAuthState)})).apply(this,arguments)}class wU{constructor(e,t,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=m(function*(i,r){e.pendingPromise={resolve:i,reject:r};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(i,r){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return m(function*(){const{urlResponse:i,sessionId:r,postBody:o,tenantId:s,error:a,type:l}=e;if(a)return void t.reject(a);const c={auth:t.auth,requestUri:i,sessionId:r,tenantId:s||void 0,postBody:o||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(l)(c))}catch(u){t.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Xae;case"linkViaPopup":case"linkViaRedirect":return Jae;case"reauthViaPopup":case"reauthViaRedirect":return Zae;default:ln(this.auth,"internal-error")}}resolve(e){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ele=new Th(2e3,1e4);function RD(){return(RD=m(function*(n,e,t){const i=cn(n);Hc(n,e,Po);const r=ja(i,t);return new PD(i,"signInViaPopup",e,r).executeNotNull()})).apply(this,arguments)}function ND(){return(ND=m(function*(n,e,t){const i=Y(n);Hc(i.auth,e,Po);const r=ja(i.auth,t);return new PD(i.auth,"reauthViaPopup",e,r,i).executeNotNull()})).apply(this,arguments)}function OD(){return(OD=m(function*(n,e,t){const i=Y(n);Hc(i.auth,e,Po);const r=ja(i.auth,t);return new PD(i.auth,"linkViaPopup",e,r,i).executeNotNull()})).apply(this,arguments)}let PD=(()=>{class n extends wU{constructor(t,i,r,o,s){super(t,i,o,s),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){var t=this;return m(function*(){const i=yield t.execute();return R(i,t.auth,"internal-error"),i})()}onExecution(){var t=this;return m(function*(){wr(1===t.filter.length,"Popup operations only handle one event");const i=Lh();t.authWindow=yield t.resolver._openPopup(t.auth,t.provider,t.filter[0],i),t.authWindow.associatedEvent=i,t.resolver._originValidation(t.auth).catch(r=>{t.reject(r)}),t.resolver._isIframeWebStorageSupported(t.auth,r=>{r||t.reject(Sn(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation()})()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){const t=()=>{var i,r;this.pollId=null!==(r=null===(i=this.authWindow)||void 0===i?void 0:i.window)&&void 0!==r&&r.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Sn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(t,ele.get())};t()}}return n.currentPopupAction=null,n})();const rle="pendingRedirect",Uh=new Map;class ole extends wU{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){var e=()=>super.execute,t=this;return m(function*(){let i=Uh.get(t.auth._key());if(!i){try{const o=(yield function sle(n,e){return FD.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;i=()=>Promise.resolve(o)}catch(r){i=()=>Promise.reject(r)}Uh.set(t.auth._key(),i)}return t.bypassAuthState||Uh.set(t.auth._key(),()=>Promise.resolve(null)),i()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,i=this;return m(function*(){if("signInViaRedirect"===e.type)return t().call(i,e);if("unknown"!==e.type){if(e.eventId){const r=yield i.auth._redirectUserForId(e.eventId);if(r)return i.user=r,t().call(i,e);i.resolve(null)}}else i.resolve(null)})()}onExecution(){return m(function*(){})()}cleanUp(){}}function FD(){return(FD=m(function*(n,e){const t=EU(e),i=CU(n);if(!(yield i._isAvailable()))return!1;const r="true"===(yield i._get(t));return yield i._remove(t),r})).apply(this,arguments)}function LD(n,e){return VD.apply(this,arguments)}function VD(){return(VD=m(function*(n,e){return CU(n)._set(EU(e),"true")})).apply(this,arguments)}function BD(n,e){Uh.set(n._key(),e)}function CU(n){return Ri(n._redirectPersistence)}function EU(n){return Va(rle,n.config.apiKey,n.name)}function lle(n,e,t){return function cle(n,e,t){return UD.apply(this,arguments)}(n,e,t)}function UD(){return(UD=m(function*(n,e,t){const i=cn(n);Hc(n,e,Po),yield i._initializationPromise;const r=ja(i,t);return yield LD(r,i),r._openRedirect(i,e,"signInViaRedirect")})).apply(this,arguments)}function ule(n,e,t){return function dle(n,e,t){return jD.apply(this,arguments)}(n,e,t)}function jD(){return(jD=m(function*(n,e,t){const i=Y(n);Hc(i.auth,e,Po),yield i.auth._initializationPromise;const r=ja(i.auth,t);yield LD(r,i.auth);const o=yield xU(i);return r._openRedirect(i.auth,e,"reauthViaRedirect",o)})).apply(this,arguments)}function hle(n,e,t){return function fle(n,e,t){return HD.apply(this,arguments)}(n,e,t)}function HD(){return(HD=m(function*(n,e,t){const i=Y(n);Hc(i.auth,e,Po),yield i.auth._initializationPromise;const r=ja(i.auth,t);yield w_(!1,i,e.providerId),yield LD(r,i.auth);const o=yield xU(i);return r._openRedirect(i.auth,e,"linkViaRedirect",o)})).apply(this,arguments)}function zD(){return(zD=m(function*(n,e){return yield cn(n)._initializationPromise,A_(n,e,!1)})).apply(this,arguments)}function A_(n,e){return $D.apply(this,arguments)}function $D(){return($D=m(function*(n,e,t=!1){const i=cn(n),r=ja(i,e),s=yield new ole(i,r,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield i._persistUserIfCurrent(s.user),yield i._setRedirectUser(null,e)),s})).apply(this,arguments)}function xU(n){return qD.apply(this,arguments)}function qD(){return(qD=m(function*(n){const e=Lh(`${n.uid}:::`);return n._redirectEventId=e,yield n.auth._setRedirectUser(n),yield n.auth._persistUserIfCurrent(n),e})).apply(this,arguments)}class DU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function gle(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IU(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!IU(e)){const r=(null===(i=e.error.code)||void 0===i?void 0:i.split("auth/")[1])||"internal-error";t.onError(Sn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(SU(e))}saveEventToCache(e){this.cachedEventUids.add(SU(e)),this.lastProcessedEventTime=Date.now()}}function SU(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function IU({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function TU(n){return WD.apply(this,arguments)}function WD(){return(WD=m(function*(n,e={}){return jt(n,"GET","/v1/projects",e)})).apply(this,arguments)}const _le=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yle=/^https?/;function GD(){return(GD=m(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield TU(n);for(const t of e)try{if(ble(t))return}catch{}ln(n,"unauthorized-domain")})).apply(this,arguments)}function ble(n){const e=Ih(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return""===s.hostname&&""===i?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&s.hostname===i}if(!yle.test(t))return!1;if(_le.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const wle=new Th(3e4,6e4);function MU(){const n=nn().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let k_=null;const xle=new Th(5e3,15e3),Dle="__/auth/iframe",Sle="emulator/auth/iframe",Ile={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tle=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mle(n){const e=n.config;R(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?sx(e,Sle):`https://${n.config.authDomain}/${Dle}`,i={apiKey:e.apiKey,appName:n.name,v:_s},r=Tle.get(n.config.apiHost);r&&(i.eid=r);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${Oa(i).slice(1)}`}function KD(){return KD=m(function*(n){const e=yield function Ele(n){return k_=k_||function Cle(n){return new Promise((e,t)=>{var i,r,o;function s(){MU(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{MU(),t(Sn(n,"network-request-failed"))},timeout:wle.get()})}if(null!==(r=null===(i=nn().gapi)||void 0===i?void 0:i.iframes)&&void 0!==r&&r.Iframe)e(gapi.iframes.getContext());else{if(null===(o=nn().gapi)||void 0===o||!o.load){const a=vU("iframefcb");return nn()[a]=()=>{gapi.load?s():t(Sn(n,"network-request-failed"))},yU(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>t(l))}s()}}).catch(e=>{throw k_=null,e})}(n),k_}(n),t=nn().gapi;return R(t,n,"internal-error"),e.open({where:document.body,url:Mle(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ile,dontclear:!0},i=>new Promise(function(){var r=m(function*(o,s){yield i.restyle({setHideOnLeave:!1});const a=Sn(n,"network-request-failed"),l=nn().setTimeout(()=>{s(a)},xle.get());function c(){nn().clearTimeout(l),o(i)}i.ping(c).then(c,()=>{s(a)})});return function(o,s){return r.apply(this,arguments)}}()))}),KD.apply(this,arguments)}const kle={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Rle=500,Nle=600,Ole="_blank",Ple="http://localhost";class AU{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Vle="__/auth/handler",Ble="emulator/auth/handler";function YD(n,e,t,i,r,o){R(n.config.authDomain,n,"auth-domain-config-required"),R(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:_s,eventId:r};if(e instanceof Po){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",HE(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,c]of Object.entries(o||{}))s[l]=c}if(e instanceof Gc){const l=e.getScopes().filter(c=>""!==c);l.length>0&&(s.scopes=l.join(","))}n.tenantId&&(s.tid=n.tenantId);const a=s;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];return`${function Ule({config:n}){return n.emulator?sx(n,Ble):`https://${n.authDomain}/${Vle}`}(n)}?${Oa(a).slice(1)}`}const QD="webStorageSupport",kU=class jle{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bs,this._completeRedirectFn=A_,this._overrideRedirectResult=BD}_openPopup(e,t,i,r){var o=this;return m(function*(){var s;wr(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=YD(e,t,i,Ih(),r);return function Fle(n,e,t,i=Rle,r=Nle){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},kle),{width:i.toString(),height:r.toString(),top:o,left:s}),c=ft().toLowerCase();t&&(a=U2(c)?Ole:t),B2(c)&&(e=e||Ple,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(function lse(n=ft()){var e;return qc(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function Lle(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}(e||"",a),new AU(null);const d=window.open(e||"",a,u);R(d,n,"popup-blocked");try{d.focus()}catch{}return new AU(d)}(e,a,Lh())})()}_openRedirect(e,t,i,r){var o=this;return m(function*(){return yield o._originValidation(e),function bae(n){nn().location.href=n}(YD(e,t,i,Ih(),r)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(wr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){var t=this;return m(function*(){const i=yield function Ale(n){return KD.apply(this,arguments)}(e),r=new DU(e);return i.register("authEvent",o=>(R(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=i,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(QD,{type:QD},r=>{var o;const s=null===(o=r?.[0])||void 0===o?void 0:o[QD];void 0!==s&&t(!!s),ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function vle(n){return GD.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $2()||vx()||qc()}};class Hle{constructor(e){this.factorId=e}_process(e,t,i){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,i);case"signin":return this._finalizeSignIn(e,t.credential);default:return Wr("unexpected MultiFactorSessionType")}}}class XD extends Hle{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new XD(e)}_finalizeEnroll(e,t,i){return function uae(n,e){return jt(n,"POST","/v2/accounts/mfaEnrollment:finalize",At(n,e))}(e,{idToken:t,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function Aae(n,e){return jt(n,"POST","/v2/accounts/mfaSignIn:finalize",At(n,e))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let zle=(()=>{class n{constructor(){}static assertion(t){return XD._fromCredential(t)}}return n.FACTOR_ID="phone",n})();var NU="@firebase/auth";class $le{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return m(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){R(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ha(){return window}a_(),function Wle(n){Ao(new br("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:o,authDomain:s}=i.options;return((a,l)=>{R(o&&!o.includes(":"),"invalid-api-key",{appName:a.name}),R(!s?.includes(":"),"argument-error",{appName:a.name});const c={apiKey:o,authDomain:s,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:q2(n)},u=new hse(a,l,c);return function $oe(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ri);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}(u,t),u})(i,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ao(new br("auth-internal",e=>{const t=cn(e.getProvider("auth").getImmediate());return new $le(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ki(NU,"0.22.0",function qle(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),ki(NU,"0.22.0","esm2017")}("Browser");const Qle=2e3;function JD(){return JD=m(function*(n,e,t){var i;const{BuildInfo:r}=Ha();wr(e.sessionId,"AuthEvent did not contain a session ID");const o=yield function nce(n){return nS.apply(this,arguments)}(e.sessionId),s={};return qc()?s.ibi=r.packageName:Nh()?s.apn=r.packageName:ln(n,"operation-not-supported-in-this-environment"),r.displayName&&(s.appDisplayName=r.displayName),s.sessionId=o,YD(n,t,e.type,void 0,null!==(i=e.eventId)&&void 0!==i?i:void 0,s)}),JD.apply(this,arguments)}function eS(){return eS=m(function*(n){const{BuildInfo:e}=Ha(),t={};qc()?t.iosBundleId=e.packageName:Nh()?t.androidPackageName=e.packageName:ln(n,"operation-not-supported-in-this-environment"),yield TU(n,t)}),eS.apply(this,arguments)}function tS(){return tS=m(function*(n,e,t){const{cordova:i}=Ha();let r=()=>{};try{yield new Promise((o,s)=>{let a=null;function l(){var d;o();const h=null===(d=i.plugins.browsertab)||void 0===d?void 0:d.close;"function"==typeof h&&h(),"function"==typeof t?.close&&t.close()}function c(){a||(a=window.setTimeout(()=>{s(Sn(n,"redirect-cancelled-by-user"))},Qle))}function u(){"visible"===document?.visibilityState&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),Nh()&&document.addEventListener("visibilitychange",u,!1),r=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}})}finally{r()}}),tS.apply(this,arguments)}function nS(){return nS=m(function*(n){const e=function ice(n){if(wr(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let i=0;i<n.length;i++)t[i]=n.charCodeAt(i);return t}(n),t=yield crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(r=>r.toString(16).padStart(2,"0")).join("")}),nS.apply(this,arguments)}const rce=20;class oce extends DU{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}initialized(){var e=this;return m(function*(){yield e.initPromise})()}}function FU(n){return iS.apply(this,arguments)}function iS(){return iS=m(function*(n){const e=yield rS()._get(oS(n));return e&&(yield rS()._remove(oS(n))),e}),iS.apply(this,arguments)}function cce(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<rce;t++){const i=Math.floor(Math.random()*e.length);n.push(e.charAt(i))}return n.join("")}function rS(){return Ri(D_)}function oS(n){return Va("authEvent",n.config.apiKey,n.name)}function N_(n){if(!n?.includes("?"))return{};const[e,...t]=n.split("?");return Uc(t.join("?"))}const pce=class fce{constructor(){this._redirectPersistence=bs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=A_,this._overrideRedirectResult=BD}_initialize(e){var t=this;return m(function*(){const i=e._key();let r=t.eventManagers.get(i);return r||(r=new oce(e),t.eventManagers.set(i,r),t.attachCallbackListeners(e,r)),r})()}_openPopup(e){ln(e,"operation-not-supported-in-this-environment")}_openRedirect(e,t,i,r){var o=this;return m(function*(){!function tce(n){var e,t,i,r,o,s,a,l,c,u;const d=Ha();R("function"==typeof(null===(e=d?.universalLinks)||void 0===e?void 0:e.subscribe),n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),R(typeof(null===(t=d?.BuildInfo)||void 0===t?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),R("function"==typeof(null===(o=null===(r=null===(i=d?.cordova)||void 0===i?void 0:i.plugins)||void 0===r?void 0:r.browsertab)||void 0===o?void 0:o.openUrl),n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),R("function"==typeof(null===(l=null===(a=null===(s=d?.cordova)||void 0===s?void 0:s.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),R("function"==typeof(null===(u=null===(c=d?.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const s=yield o._initialize(e);yield s.initialized(),s.resetRedirect(),function ale(){Uh.clear()}(),yield o._originValidation(e);const a=function sce(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:cce(),postBody:null,tenantId:n.tenantId,error:Sn(n,"no-auth-event")}}(e,i,r);yield function ace(n,e){return rS()._set(oS(n),e)}(e,a);const l=yield function Xle(n,e,t){return JD.apply(this,arguments)}(e,a,t),c=yield function Jle(n){const{cordova:e}=Ha();return new Promise(t=>{e.plugins.browsertab.isAvailable(i=>{let r=null;i?e.plugins.browsertab.openUrl(n):r=e.InAppBrowser.open(n,function ase(n=ft()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}()?"_blank":"_system","location=yes"),t(r)})})}(l);return function ece(n,e,t){return tS.apply(this,arguments)}(e,s,c)})()}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function Zle(n){return eS.apply(this,arguments)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:i,handleOpenURL:r,BuildInfo:o}=Ha(),s=setTimeout(m(function*(){yield FU(e),t.onEvent(LU())}),500),a=function(){var u=m(function*(d){clearTimeout(s);const h=yield FU(e);let f=null;h&&d?.url&&(f=function lce(n,e){var t,i;const r=function dce(n){const e=N_(n),t=e.link?decodeURIComponent(e.link):void 0,i=N_(t).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return N_(r).link||r||i||t||n}(e);if(r.includes("/__/auth/callback")){const o=N_(r),s=o.firebaseError?function uce(n){try{return JSON.parse(n)}catch{return null}}(decodeURIComponent(o.firebaseError)):null,a=null===(i=null===(t=s?.code)||void 0===t?void 0:t.split("auth/"))||void 0===i?void 0:i[1],l=a?Sn(a):null;return l?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:r,postBody:null}}return null}(h,d.url)),t.onEvent(f||LU())});return function(h){return u.apply(this,arguments)}}();typeof i<"u"&&"function"==typeof i.subscribe&&i.subscribe(null,a);const l=r,c=`${o.packageName.toLowerCase()}://`;Ha().handleOpenURL=function(){var u=m(function*(d){if(d.toLowerCase().startsWith(c)&&a({url:d}),"function"==typeof l)try{l(d)}catch(h){console.error(h)}});return function(d){return u.apply(this,arguments)}}()}};function LU(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Sn("no-auth-event")}}const yce=1e3;function jh(){var n;return(null===(n=self?.location)||void 0===n?void 0:n.protocol)||null}function VU(n=ft()){return!("file:"!==jh()&&"ionic:"!==jh()&&"capacitor:"!==jh()||!n.toLowerCase().match(/iphone|ipad|ipod|android/))}function BU(){try{const n=self.localStorage,e=Lh();if(n)return n.setItem(e,"1"),n.removeItem(e),!function Ece(n=ft()){return function wce(){return r2()&&11===document?.documentMode}()||function Cce(n=ft()){return/Edge\/\d+/.test(n)}(n)}()||bh()}catch{return sS()&&bh()}return!1}function sS(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function aS(){return(function vce(){return"http:"===jh()||"https:"===jh()}()||n2()||VU())&&!function bce(){return c_()||jE()}()&&BU()&&!sS()}function UU(){return VU()&&typeof document<"u"}function lS(){return lS=m(function*(){return!!UU()&&new Promise(n=>{const e=setTimeout(()=>{n(!1)},yce);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})})}),lS.apply(this,arguments)}const Ni={LOCAL:"local",NONE:"none",SESSION:"session"},Hh=R,jU="persistence";function cS(n){return uS.apply(this,arguments)}function uS(){return uS=m(function*(n){yield n._initializationPromise;const e=HU(),t=Va(jU,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}),uS.apply(this,arguments)}function HU(){var n;try{return(null===(n=function Dce(){return typeof window<"u"?window:null}())||void 0===n?void 0:n.sessionStorage)||null}catch{return null}}const Tce=R;class ws{constructor(){this.browserResolver=Ri(kU),this.cordovaResolver=Ri(pce),this.underlyingResolver=null,this._redirectPersistence=bs,this._completeRedirectFn=A_,this._overrideRedirectResult=BD}_initialize(e){var t=this;return m(function*(){return yield t.selectUnderlyingResolver(),t.assertedUnderlyingResolver._initialize(e)})()}_openPopup(e,t,i,r){var o=this;return m(function*(){return yield o.selectUnderlyingResolver(),o.assertedUnderlyingResolver._openPopup(e,t,i,r)})()}_openRedirect(e,t,i,r){var o=this;return m(function*(){return yield o.selectUnderlyingResolver(),o.assertedUnderlyingResolver._openRedirect(e,t,i,r)})()}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return UU()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Tce(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var e=this;return m(function*(){if(e.underlyingResolver)return;const t=yield function xce(){return lS.apply(this,arguments)}();e.underlyingResolver=t?e.cordovaResolver:e.browserResolver})()}}function zU(n){return n.unwrap()}function Ace(n){return $U(n)}function $U(n){const{_tokenResponse:e}=n instanceof ti?n.customData:n;if(!e)return null;if(!(n instanceof ti)&&"temporaryProof"in e&&"phoneNumber"in e)return Bh.credentialFromResult(n);const t=e.providerId;if(!t||t===Sh.PASSWORD)return null;let i;switch(t){case Sh.GOOGLE:i=J2;break;case Sh.FACEBOOK:i=Z2;break;case Sh.GITHUB:i=eU;break;case Sh.TWITTER:i=tU;break;default:const{oauthIdToken:r,oauthAccessToken:o,oauthTokenSecret:s,pendingToken:a,nonce:l}=e;return o||s||r||a?a?t.startsWith("saml.")?Yc._create(t,a):Gr._fromParams({providerId:t,signInMethod:t,pendingToken:a,idToken:r,accessToken:o}):new Kc(t).credential({idToken:r,accessToken:o,rawNonce:l}):null}return n instanceof ti?i.credentialFromError(n):i.credentialFromResult(n)}function gi(n,e){return e.catch(t=>{throw t instanceof ti&&function kce(n,e){var t;const i=null===(t=e.customData)||void 0===t?void 0:t._tokenResponse;if("auth/multi-factor-auth-required"===e?.code)e.resolver=new Rce(n,function lae(n,e){var t;const i=Y(n),r=e;return R(e.customData.operationType,i,"argument-error"),R(null===(t=r.customData._serverResponse)||void 0===t?void 0:t.mfaPendingCredential,i,"argument-error"),pD._fromError(i,r)}(n,e));else if(i){const r=$U(e),o=e;r&&(o.credential=r,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}(n,t),t}).then(t=>{const r=t.user;return{operationType:t.operationType,credential:Ace(t),additionalUserInfo:oae(t),user:Fo.getOrCreate(r)}})}function dS(n,e){return hS.apply(this,arguments)}function hS(){return hS=m(function*(n,e){const t=yield e;return{verificationId:t.verificationId,confirm:i=>gi(n,t.confirm(i))}}),hS.apply(this,arguments)}class Rce{constructor(e,t){this.resolver=t,this.auth=function Mce(n){return n.wrapped()}(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return gi(zU(this.auth),this.resolver.resolveSignIn(e))}}class Fo{constructor(e){this._delegate=e,this.multiFactor=function fae(n){const e=Y(n);return gD.has(e)||gD.set(e,mD._fromUser(e)),gD.get(e)}(e)}static getOrCreate(e){return Fo.USER_MAP.has(e)||Fo.USER_MAP.set(e,new Fo(e)),Fo.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}linkWithCredential(e){var t=this;return m(function*(){return gi(t.auth,lU(t._delegate,e))})()}linkWithPhoneNumber(e,t){var i=this;return m(function*(){return dS(i.auth,function Kae(n,e,t){return SD.apply(this,arguments)}(i._delegate,e,t))})()}linkWithPopup(e){var t=this;return m(function*(){return gi(t.auth,function ile(n,e,t){return OD.apply(this,arguments)}(t._delegate,e,ws))})()}linkWithRedirect(e){var t=this;return m(function*(){return yield cS(cn(t.auth)),hle(t._delegate,e,ws)})()}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}reauthenticateWithCredential(e){var t=this;return m(function*(){return gi(t.auth,cU(t._delegate,e))})()}reauthenticateWithPhoneNumber(e,t){return dS(this.auth,function Yae(n,e,t){return ID.apply(this,arguments)}(this._delegate,e,t))}reauthenticateWithPopup(e){return gi(this.auth,function nle(n,e,t){return ND.apply(this,arguments)}(this._delegate,e,ws))}reauthenticateWithRedirect(e){var t=this;return m(function*(){return yield cS(cn(t.auth)),ule(t._delegate,e,ws)})()}sendEmailVerification(e){return function Kse(n,e){return lD.apply(this,arguments)}(this._delegate,e)}unlink(e){var t=this;return m(function*(){return yield function Ose(n,e){return Bx.apply(this,arguments)}(t._delegate,e),t})()}updateEmail(e){return function Zse(n,e){return dU(Y(n),e,null)}(this._delegate,e)}updatePassword(e){return function Jse(n,e){return dU(Y(n),null,e)}(this._delegate,e)}updatePhoneNumber(e){return function Qae(n,e){return MD.apply(this,arguments)}(this._delegate,e)}updateProfile(e){return function Xse(n,e){return dD.apply(this,arguments)}(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return function Yse(n,e,t){return cD.apply(this,arguments)}(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Fo.USER_MAP=new WeakMap;const zh=R;let qU=(()=>{class n{constructor(t,i){if(this.app=t,i.isInitialized())return this._delegate=i.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:r}=t.options;zh(r,"invalid-api-key",{appName:t.name}),zh(r,"invalid-api-key",{appName:t.name});const o=typeof window<"u"?ws:void 0;this._delegate=i.initialize({options:{persistence:Nce(r,t.name),popupRedirectResolver:o}}),this._delegate._updateErrorMap(joe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Fo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(t){this._delegate.languageCode=t}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(t){this._delegate.tenantId=t}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(t,i){!function G2(n,e,t){const i=cn(n);R(i._canInitEmulator,i,"emulator-config-failed"),R(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!t?.disableWarnings,o=K2(e),{host:s,port:a}=function fse(n){const e=K2(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:Y2(i.substr(o.length+1))}}{const[o,s]=i.split(":");return{host:o,port:Y2(s)}}}(e);i.config.emulator={url:`${o}//${s}${null===a?"":`:${a}`}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function pse(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(this._delegate,t,i)}applyActionCode(t){return function Bse(n,e){return eD.apply(this,arguments)}(this._delegate,t)}checkActionCode(t){return uU(this._delegate,t)}confirmPasswordReset(t,i){return function Vse(n,e,t){return Jx.apply(this,arguments)}(this._delegate,t,i)}createUserWithEmailAndPassword(t,i){var r=this;return m(function*(){return gi(r._delegate,function jse(n,e,t){return iD.apply(this,arguments)}(r._delegate,t,i))})()}fetchProvidersForEmail(t){return this.fetchSignInMethodsForEmail(t)}fetchSignInMethodsForEmail(t){return function Gse(n,e){return aD.apply(this,arguments)}(this._delegate,t)}isSignInWithEmailLink(t){return function $se(n,e){return"EMAIL_SIGNIN"===Ph.parseLink(e)?.operation}(0,t)}getRedirectResult(){var t=this;return m(function*(){zh(aS(),t._delegate,"operation-not-supported-in-this-environment");const i=yield function ple(n,e){return zD.apply(this,arguments)}(t._delegate,ws);return i?gi(t._delegate,Promise.resolve(i)):{credential:null,user:null}})()}addFrameworkForLogging(t){!function mce(n,e){cn(n)._logFramework(e)}(this._delegate,t)}onAuthStateChanged(t,i,r){const{next:o,error:s,complete:a}=WU(t,i,r);return this._delegate.onAuthStateChanged(o,s,a)}onIdTokenChanged(t,i,r){const{next:o,error:s,complete:a}=WU(t,i,r);return this._delegate.onIdTokenChanged(o,s,a)}sendSignInLinkToEmail(t,i){return function zse(n,e,t){return rD.apply(this,arguments)}(this._delegate,t,i)}sendPasswordResetEmail(t,i){return function Lse(n,e,t){return Zx.apply(this,arguments)}(this._delegate,t,i||void 0)}setPersistence(t){var i=this;return m(function*(){let r;switch(function Sce(n,e){Hh(Object.values(Ni).includes(e),n,"invalid-persistence-type"),c_()?Hh(e!==Ni.SESSION,n,"unsupported-persistence-type"):jE()?Hh(e===Ni.NONE,n,"unsupported-persistence-type"):sS()?Hh(e===Ni.NONE||e===Ni.LOCAL&&bh(),n,"unsupported-persistence-type"):Hh(e===Ni.NONE||BU(),n,"unsupported-persistence-type")}(i._delegate,t),t){case Ni.SESSION:r=bs;break;case Ni.LOCAL:r=(yield Ri(Xc)._isAvailable())?Xc:D_;break;case Ni.NONE:r=zc;break;default:return ln("argument-error",{appName:i._delegate.name})}return i._delegate.setPersistence(r)})()}signInAndRetrieveDataWithCredential(t){return this.signInWithCredential(t)}signInAnonymously(){return gi(this._delegate,function Nse(n){return Vx.apply(this,arguments)}(this._delegate))}signInWithCredential(t){return gi(this._delegate,C_(this._delegate,t))}signInWithCustomToken(t){return gi(this._delegate,function Fse(n,e){return Yx.apply(this,arguments)}(this._delegate,t))}signInWithEmailAndPassword(t,i){return gi(this._delegate,function Hse(n,e,t){return C_(Y(n),Fx.credential(e,t))}(this._delegate,t,i))}signInWithEmailLink(t,i){return gi(this._delegate,function qse(n,e,t){return oD.apply(this,arguments)}(this._delegate,t,i))}signInWithPhoneNumber(t,i){return dS(this._delegate,function Gae(n,e,t){return DD.apply(this,arguments)}(this._delegate,t,i))}signInWithPopup(t){var i=this;return m(function*(){return zh(aS(),i._delegate,"operation-not-supported-in-this-environment"),gi(i._delegate,function tle(n,e,t){return RD.apply(this,arguments)}(i._delegate,t,ws))})()}signInWithRedirect(t){var i=this;return m(function*(){return zh(aS(),i._delegate,"operation-not-supported-in-this-environment"),yield cS(i._delegate),lle(i._delegate,t,ws)})()}updateCurrentUser(t){return this._delegate.updateCurrentUser(t)}verifyPasswordResetCode(t){return function Use(n,e){return nD.apply(this,arguments)}(this._delegate,t)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return n.Persistence=Ni,n})();function WU(n,e,t){let i=n;"function"!=typeof n&&({next:i,error:e,complete:t}=n);const r=i;return{next:s=>r(s&&Fo.getOrCreate(s)),error:e,complete:t}}function Nce(n,e){const t=function Ice(n,e){const t=HU();if(!t)return[];const i=Va(jU,n,e);switch(t.getItem(i)){case Ni.NONE:return[zc];case Ni.LOCAL:return[Xc,bs];case Ni.SESSION:return[bs];default:return[]}}(n,e);if(typeof self<"u"&&!t.includes(Xc)&&t.push(Xc),typeof window<"u")for(const i of[D_,bs])t.includes(i)||t.push(i);return t.includes(zc)||t.push(zc),t}class fS{constructor(){this.providerId="phone",this._delegate=new Bh(zU(ys.auth()))}static credential(e,t){return Bh.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}fS.PHONE_SIGN_IN_METHOD=Bh.PHONE_SIGN_IN_METHOD,fS.PROVIDER_ID=Bh.PROVIDER_ID;const Oce=R;class Pce{constructor(e,t,i=ys.app()){var r;Oce(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new qae(e,t,i.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Lce(n){n.INTERNAL.registerComponent(new br("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new qU(t,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:jc_EMAIL_SIGNIN,PASSWORD_RESET:jc_PASSWORD_RESET,RECOVER_EMAIL:jc_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:jc_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:jc_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:jc_VERIFY_EMAIL}},EmailAuthProvider:Fx,FacebookAuthProvider:Z2,GithubAuthProvider:eU,GoogleAuthProvider:J2,OAuthProvider:Kc,SAMLAuthProvider:v_,PhoneAuthProvider:fS,PhoneMultiFactorGenerator:zle,RecaptchaVerifier:Pce,TwitterAuthProvider:tU,Auth:qU,AuthCredential:Wc,Error:ti}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion("@firebase/auth-compat","0.3.7")}(ys);var $,Vce=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Lo={},pS=pS||{},se=Vce||self;function O_(){}function P_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function $h(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var mS="closure_uid_"+(1e9*Math.random()>>>0),Uce=0;function jce(n,e,t){return n.call.apply(n.bind,arguments)}function Hce(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function jn(n,e,t){return(jn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?jce:Hce).apply(null,arguments)}function F_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function In(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(i,r,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[r].apply(i,s)}}function Cs(){this.s=this.s,this.o=this.o}Cs.prototype.s=!1,Cs.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Bce(n){Object.prototype.hasOwnProperty.call(n,mS)&&n[mS]||(n[mS]=++Uce)}(this)},Cs.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const GU=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function gS(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function KU(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(P_(i)){const r=n.length||0,o=i.length||0;n.length=r+o;for(let s=0;s<o;s++)n[r+s]=i[s]}else n.push(i)}}function Hn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Hn.prototype.h=function(){this.defaultPrevented=!0};var $ce=function(){if(!se.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{se.addEventListener("test",O_,e),se.removeEventListener("test",O_,e)}catch{}return n}();function L_(n){return/^[\s\xa0]*$/.test(n)}var YU=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function _S(n,e){return n<e?-1:n>e?1:0}function V_(){var n=se.navigator;return n&&(n=n.userAgent)?n:""}function Kr(n){return-1!=V_().indexOf(n)}function yS(n){return yS[" "](n),n}yS[" "]=O_;var B_,Wce=Kr("Opera"),Zc=Kr("Trident")||Kr("MSIE"),QU=Kr("Edge"),vS=QU||Zc,XU=Kr("Gecko")&&!(-1!=V_().toLowerCase().indexOf("webkit")&&!Kr("Edge"))&&!(Kr("Trident")||Kr("MSIE"))&&!Kr("Edge"),Gce=-1!=V_().toLowerCase().indexOf("webkit")&&!Kr("Edge");function ZU(){var n=se.document;return n?n.documentMode:void 0}e:{var bS="",wS=function(){var n=V_();return XU?/rv:([^\);]+)(\)|;)/.exec(n):QU?/Edge\/([\d\.]+)/.exec(n):Zc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Gce?/WebKit\/(\S+)/.exec(n):Wce?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(wS&&(bS=wS?wS[1]:""),Zc){var CS=ZU();if(null!=CS&&CS>parseFloat(bS)){B_=String(CS);break e}}B_=bS}var Kce={};var Qce=se.document&&Zc&&(ZU()||parseInt(B_,10))||void 0;function qh(n,e){if(Hn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(XU){e:{try{yS(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Xce[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&qh.X.h.call(this)}}In(qh,Hn);var Xce={2:"touch",3:"pen",4:"mouse"};qh.prototype.h=function(){qh.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Wh="closure_listenable_"+(1e6*Math.random()|0),Zce=0;function Jce(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ha=r,this.key=++Zce,this.ba=this.ea=!1}function U_(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function xS(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function ej(n){const e={};for(const t in n)e[t]=n[t];return e}const tj="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nj(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let o=0;o<tj.length;o++)t=tj[o],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function j_(n){this.src=n,this.g={},this.h=0}function DS(n,e){var t=e.type;if(t in n.g){var o,i=n.g[t],r=GU(i,e);(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(U_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function SS(n,e,t,i){for(var r=0;r<n.length;++r){var o=n[r];if(!o.ba&&o.listener==e&&o.capture==!!t&&o.ha==i)return r}return-1}j_.prototype.add=function(n,e,t,i,r){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var s=SS(n,e,i,r);return-1<s?(e=n[s],t||(e.ea=!1)):((e=new Jce(e,this.src,o,!!i,r)).ea=t,n.push(e)),e};var IS="closure_lm_"+(1e6*Math.random()|0),TS={};function ij(n,e,t,i,r){if(i&&i.once)return oj(n,e,t,i,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ij(n,e[o],t,i,r);return null}return t=RS(t),n&&n[Wh]?n.N(e,t,$h(i)?!!i.capture:!!i,r):rj(n,e,t,!1,i,r)}function rj(n,e,t,i,r,o){if(!e)throw Error("Invalid event type");var s=$h(r)?!!r.capture:!!r,a=AS(n);if(a||(n[IS]=a=new j_(n)),(t=a.add(e,t,i,s,o)).proxy)return t;if(i=function eue(){const e=tue;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)$ce||(r=s),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(aj(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function oj(n,e,t,i,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)oj(n,e[o],t,i,r);return null}return t=RS(t),n&&n[Wh]?n.O(e,t,$h(i)?!!i.capture:!!i,r):rj(n,e,t,!0,i,r)}function sj(n,e,t,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)sj(n,e[o],t,i,r);else i=$h(i)?!!i.capture:!!i,t=RS(t),n&&n[Wh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=SS(o=n.g[e],t,i,r))&&(U_(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=AS(n))&&(e=n.g[e.toString()],n=-1,e&&(n=SS(e,t,i,r)),(t=-1<n?e[n]:null)&&MS(t))}function MS(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Wh])DS(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(aj(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=AS(e))?(DS(t,n),0==t.h&&(t.src=null,e[IS]=null)):U_(n)}}}function aj(n){return n in TS?TS[n]:TS[n]="on"+n}function tue(n,e){if(n.ba)n=!0;else{e=new qh(e,this);var t=n.listener,i=n.ha||n.src;n.ea&&MS(n),n=t.call(i,e)}return n}function AS(n){return(n=n[IS])instanceof j_?n:null}var kS="__closure_events_fn_"+(1e9*Math.random()>>>0);function RS(n){return"function"==typeof n?n:(n[kS]||(n[kS]=function(e){return n.handleEvent(e)}),n[kS])}function un(){Cs.call(this),this.i=new j_(this),this.P=this,this.I=null}function Tn(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new Hn(e,n);else if(e instanceof Hn)e.target=e.target||n;else{var r=e;nj(e=new Hn(i,n),r)}if(r=!0,t)for(var o=t.length-1;0<=o;o--){var s=e.g=t[o];r=H_(s,i,!0,e)&&r}if(r=H_(s=e.g=n,i,!0,e)&&r,r=H_(s,i,!1,e)&&r,t)for(o=0;o<t.length;o++)r=H_(s=e.g=t[o],i,!1,e)&&r}function H_(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ba&&s.capture==t){var a=s.listener,l=s.ha||s.src;s.ea&&DS(n.i,s),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}In(un,Cs),un.prototype[Wh]=!0,un.prototype.removeEventListener=function(n,e,t,i){sj(this,n,e,t,i)},un.prototype.M=function(){if(un.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)U_(t[i]);delete n.g[e],n.h--}}this.I=null},un.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},un.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var NS=se.JSON.stringify;function nue(){var n=uj;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var OS,lj=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new rue,n=>n.reset());class rue{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function oue(n){se.setTimeout(()=>{throw n},0)}function cj(n,e){OS||function sue(){var n=se.Promise.resolve(void 0);OS=function(){n.then(aue)}}(),PS||(OS(),PS=!0),uj.add(n,e)}var PS=!1,uj=new class iue{constructor(){this.h=this.g=null}add(e,t){const i=lj.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function aue(){for(var n;n=nue();){try{n.h.call(n.g)}catch(t){oue(t)}var e=lj;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}PS=!1}function z_(n,e){un.call(this),this.h=n||1,this.g=e||se,this.j=jn(this.lb,this),this.l=Date.now()}function FS(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function LS(n,e,t){if("function"==typeof n)t&&(n=jn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=jn(n.handleEvent,n)}return 2147483647<Number(e)?-1:se.setTimeout(n,e||0)}function dj(n){n.g=LS(()=>{n.g=null,n.i&&(n.i=!1,dj(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}In(z_,un),($=z_.prototype).ca=!1,$.R=null,$.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Tn(this,"tick"),this.ca&&(FS(this),this.start()))}},$.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},$.M=function(){z_.X.M.call(this),FS(this),delete this.g};class lue extends Cs{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:dj(this)}M(){super.M(),this.g&&(se.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gh(n){Cs.call(this),this.h=n,this.g={}}In(Gh,Cs);var hj=[];function fj(n,e,t,i){Array.isArray(t)||(t&&(hj[0]=t.toString()),t=hj);for(var r=0;r<t.length;r++){var o=ij(e,t[r],i||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function pj(n){xS(n.g,function(e,t){this.g.hasOwnProperty(t)&&MS(e)},n),n.g={}}function $_(){this.g=!0}function Jc(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function hue(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<r.length;s++)r[s]=""}}}return NS(t)}catch{return e}}(n,t)+(i?" "+i:"")})}Gh.prototype.M=function(){Gh.X.M.call(this),pj(this)},Gh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$_.prototype.Aa=function(){this.g=!1},$_.prototype.info=function(){};var za={},mj=null;function q_(){return mj=mj||new un}function gj(n){Hn.call(this,za.Pa,n)}function Kh(n){const e=q_();Tn(e,new gj(e))}function _j(n,e){Hn.call(this,za.STAT_EVENT,n),this.stat=e}function ni(n){const e=q_();Tn(e,new _j(e,n))}function yj(n,e){Hn.call(this,za.Qa,n),this.size=e}function Yh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return se.setTimeout(function(){n()},e)}za.Pa="serverreachability",In(gj,Hn),za.STAT_EVENT="statevent",In(_j,Hn),za.Qa="timingevent",In(yj,Hn);var W_={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},vj={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function VS(){}function wj(){}VS.prototype.h=null;var jS,Qh={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function BS(){Hn.call(this,"d")}function US(){Hn.call(this,"c")}function G_(){}function Xh(n,e,t,i){this.l=n,this.j=e,this.m=t,this.U=i||1,this.S=new Gh(this),this.O=fue,this.T=new z_(n=vS?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Cj}function Cj(){this.i=null,this.g="",this.h=!1}In(BS,Hn),In(US,Hn),In(G_,VS),G_.prototype.g=function(){return new XMLHttpRequest},G_.prototype.i=function(){return{}},jS=new G_;var fue=45e3,HS={},K_={};function zS(n,e,t){n.K=1,n.v=Z_(Vo(e)),n.s=t,n.P=!0,Ej(n,null)}function Ej(n,e){n.F=Date.now(),Zh(n),n.A=Vo(n.v);var t=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),Nj(t.i,"t",i),n.C=0,t=n.l.H,n.h=new Cj,n.g=iH(n.l,t?e:null,!n.s),0<n.N&&(n.L=new lue(jn(n.La,n,n.g),n.N)),fj(n.S,n.g,"readystatechange",n.ib),e=n.H?ej(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Kh(),function cue(n,e,t,i,r,o){n.info(function(){if(n.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&"type"==d[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+s})}(n.j,n.u,n.A,n.m,n.U,n.s)}function xj(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Dj(n,e,t){let r,i=!0;for(;!n.I&&n.C<t.length;){if(r=pue(n,t),r==K_){4==e&&(n.o=4,ni(14),i=!1),Jc(n.j,n.m,null,"[Incomplete Response]");break}if(r==HS){n.o=4,ni(15),Jc(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}Jc(n.j,n.m,r,null),$S(n,r)}xj(n)&&r!=K_&&r!=HS&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ni(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),ZS(e),e.K=!0,ni(11))):(Jc(n.j,n.m,t,"[Invalid Chunked Response]"),$a(n),Jh(n))}function pue(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?K_:(t=Number(e.substring(t,i)),isNaN(t)?HS:(i+=1)+t>e.length?K_:(e=e.substr(i,t),n.C=i+t,e))}function Zh(n){n.V=Date.now()+n.O,Sj(n,n.O)}function Sj(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Yh(jn(n.gb,n),e)}function Y_(n){n.B&&(se.clearTimeout(n.B),n.B=null)}function Jh(n){0==n.l.G||n.I||Jj(n.l,n)}function $a(n){Y_(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,FS(n.T),pj(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function $S(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||qS(t.h,n)))if(!n.J&&qS(t.h,n)&&3==t.G){try{var i=t.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;ry(t),ny(t)}XS(t),ni(18)}}else t.Ba=r[1],0<t.Ba-t.T&&37500>r[2]&&t.L&&0==t.A&&!t.v&&(t.v=Yh(jn(t.cb,t),6e3));if(1>=Fj(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Wa(t,11)}else if((n.J||t.g==n)&&ry(t),!L_(e))for(r=t.Fa.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(t.T=c[0],c=c[1],2==t.G)if("c"==c[0]){t.I=c[1],t.ka=c[2];const u=c[3];null!=u&&(t.ma=u,t.j.info("VER="+t.ma));const d=c[4];null!=d&&(t.Ca=d,t.j.info("SVER="+t.Ca));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(t.J=i=1.5*h,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const f=n.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var o=i.h;o.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(WS(o,o.h),o.h=null))}if(i.D){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(i.za=g,yt(i.F,i.D,g))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var s=n;if((i=t).sa=nH(i,i.H?i.ka:null,i.V),s.J){Lj(i.h,s);var a=s,l=i.J;l&&a.setTimeout(l),a.B&&(Y_(a),Zh(a)),i.g=s}else Xj(i);0<t.i.length&&iy(t)}else"stop"!=c[0]&&"close"!=c[0]||Wa(t,7);else 3==t.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Wa(t,7):QS(t):"noop"!=c[0]&&t.l&&t.l.wa(c),t.A=0)}Kh()}catch{}}function Ij(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(P_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function gue(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(P_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function mue(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(P_(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],t&&t[o],n)}($=Xh.prototype).setTimeout=function(n){this.O=n},$.ib=function(n){n=n.target;const e=this.L;e&&3==Bo(n)?e.l():this.La(n)},$.La=function(n){try{if(n==this.g)e:{const u=Bo(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>u)&&(3!=u||vS||this.g&&(this.h.h||this.g.fa()||qj(this.g)))){this.I||4!=u||7==e||Kh(),Y_(this);var t=this.g.aa();this.Y=t;t:if(xj(this)){var i=qj(this.g);n="";var r=i.length,o=4==Bo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){$a(this),Jh(this);var s="";break t}this.h.i=new se.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:o&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=200==t,function uue(n,e,t,i,r,o,s){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.U,u,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L_(a)){var c=a;break t}}c=null}if(!(t=c)){this.i=!1,this.o=3,ni(12),$a(this),Jh(this);break e}Jc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,$S(this,t)}this.P?(Dj(this,u,s),vS&&this.i&&3==u&&(fj(this.S,this.T,"tick",this.hb),this.T.start())):(Jc(this.j,this.m,s,null),$S(this,s)),4==u&&$a(this),this.i&&!this.I&&(4==u?Jj(this.l,this):(this.i=!1,Zh(this)))}else 400==t&&0<s.indexOf("Unknown SID")?(this.o=3,ni(12)):(this.o=0,ni(13)),$a(this),Jh(this)}}}catch{}},$.hb=function(){if(this.g){var n=Bo(this.g),e=this.g.fa();this.C<e.length&&(Y_(this),Dj(this,n,e),this.i&&4!=n&&Zh(this))}},$.cancel=function(){this.I=!0,$a(this)},$.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function due(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Kh(),ni(17)),$a(this),this.o=2,Jh(this)):Sj(this,this.V-n)};var Tj=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qa(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof qa){this.h=void 0!==e?e:n.h,Q_(this,n.j),this.s=n.s,this.g=n.g,X_(this,n.m),this.l=n.l,e=n.i;var t=new nf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Mj(this,t),this.o=n.o}else n&&(t=String(n).match(Tj))?(this.h=!!e,Q_(this,t[1]||"",!0),this.s=ef(t[2]||""),this.g=ef(t[3]||"",!0),X_(this,t[4]),this.l=ef(t[5]||"",!0),Mj(this,t[6]||"",!0),this.o=ef(t[7]||"")):(this.h=!!e,this.i=new nf(null,this.h))}function Vo(n){return new qa(n)}function Q_(n,e,t){n.j=t?ef(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function X_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Mj(n,e,t){e instanceof nf?(n.i=e,function Eue(n,e){e&&!n.j&&(Es(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(kj(this,i),Nj(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=tf(e,wue)),n.i=new nf(e,n.h))}function yt(n,e,t){n.i.set(e,t)}function Z_(n){return yt(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ef(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function tf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,yue),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function yue(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}qa.prototype.toString=function(){var n=[],e=this.j;e&&n.push(tf(e,Aj,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(tf(e,Aj,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(tf(t,"/"==t.charAt(0)?bue:vue,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",tf(t,Cue)),n.join("")};var Aj=/[#\/\?@]/g,vue=/[#\?:]/g,bue=/[#\?]/g,wue=/[#\?@]/g,Cue=/#/g;function nf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Es(n){n.g||(n.g=new Map,n.h=0,n.i&&function _ue(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var o=n[t].substring(0,i);r=n[t].substring(i+1)}else o=n[t];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function kj(n,e){Es(n),e=eu(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Rj(n,e){return Es(n),e=eu(n,e),n.g.has(e)}function Nj(n,e,t){kj(n,e),0<t.length&&(n.i=null,n.g.set(eu(n,e),gS(t)),n.h+=t.length)}function eu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Oj(n){this.l=n||Due,n=se.PerformanceNavigationTiming?0<(n=se.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(se.g&&se.g.Ga&&se.g.Ga()&&se.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}($=nf.prototype).add=function(n,e){Es(this),this.i=null,n=eu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},$.forEach=function(n,e){Es(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},$.oa=function(){Es(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let o=0;o<r.length;o++)t.push(e[i])}return t},$.W=function(n){Es(this);let e=[];if("string"==typeof n)Rj(this,n)&&(e=e.concat(this.g.get(eu(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},$.set=function(n,e){return Es(this),this.i=null,Rj(this,n=eu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},$.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},$.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const o=encodeURIComponent(String(i)),s=this.W(i);for(i=0;i<s.length;i++){var r=o;""!==s[i]&&(r+="="+encodeURIComponent(String(s[i]))),n.push(r)}}return this.i=n.join("&")};var Due=10;function Pj(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Fj(n){return n.h?1:n.g?n.g.size:0}function qS(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function WS(n,e){n.g?n.g.add(e):n.h=e}function Lj(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Vj(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return gS(n.i)}function GS(){}function Sue(){this.g=new GS}function Iue(n,e,t){const i=t||"";try{Ij(n,function(r,o){let s=r;$h(r)&&(s=NS(r)),e.push(i+o+"="+encodeURIComponent(s))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function J_(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function rf(n){this.l=n.ac||null,this.j=n.jb||!1}function ey(n,e){un.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=KS,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Oj.prototype.cancel=function(){if(this.i=Vj(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},GS.prototype.stringify=function(n){return se.JSON.stringify(n,void 0)},GS.prototype.parse=function(n){return se.JSON.parse(n,void 0)},In(rf,VS),rf.prototype.g=function(){return new ey(this.l,this.j)},rf.prototype.i=function(n){return function(){return n}}({}),In(ey,un);var KS=0;function Bj(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function sf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,af(n)}function af(n){n.onreadystatechange&&n.onreadystatechange.call(n)}($=ey.prototype).open=function(n,e){if(this.readyState!=KS)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,af(this)},$.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||se).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},$.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sf(this)),this.readyState=KS},$.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,af(this)),this.g&&(this.readyState=3,af(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof se.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bj(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},$.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?sf(this):af(this),3==this.readyState&&Bj(this)}},$.Va=function(n){this.g&&(this.response=this.responseText=n,sf(this))},$.Ua=function(n){this.g&&(this.response=n,sf(this))},$.ga=function(){this.g&&sf(this)},$.setRequestHeader=function(n,e){this.v.append(n,e)},$.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},$.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ey.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Mue=se.JSON.parse;function kt(n){un.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Uj,this.K=this.L=!1}In(kt,un);var Uj="",Aue=/^https?$/i,kue=["POST","PUT"];function jj(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Hj(n),ty(n)}function Hj(n){n.D||(n.D=!0,Tn(n,"complete"),Tn(n,"error"))}function zj(n){if(n.h&&typeof pS<"u"&&(!n.C[1]||4!=Bo(n)||2!=n.aa()))if(n.v&&4==Bo(n))LS(n.Ha,0,n);else if(Tn(n,"readystatechange"),4==Bo(n)){n.h=!1;try{const a=n.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===a){var r=String(n.H).match(Tj)[1]||null;if(!r&&se.self&&se.self.location){var o=se.self.location.protocol;r=o.substr(0,o.length-1)}i=!Aue.test(r?r.toLowerCase():"")}t=i}if(t)Tn(n,"complete"),Tn(n,"success");else{n.m=6;try{var s=2<Bo(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.aa()+"]",Hj(n)}}finally{ty(n)}}}function ty(n,e){if(n.g){$j(n);const t=n.g,i=n.C[0]?O_:null;n.g=null,n.C=null,e||Tn(n,"ready");try{t.onreadystatechange=i}catch{}}}function $j(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(se.clearTimeout(n.A),n.A=null)}function Bo(n){return n.g?n.g.readyState:0}function qj(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Uj:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Wj(n){let e="";return xS(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function YS(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=Wj(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):yt(n,e,t))}function lf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Gj(n){this.Ca=0,this.i=[],this.j=new $_,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=lf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=lf("baseRetryDelayMs",5e3,n),this.bb=lf("retryDelaySeedMs",1e4,n),this.$a=lf("forwardChannelMaxRetries",2,n),this.ta=lf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Oj(n&&n.concurrentRequestLimit),this.Fa=new Sue,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function QS(n){if(Kj(n),3==n.G){var e=n.U++,t=Vo(n.F);yt(t,"SID",n.I),yt(t,"RID",e),yt(t,"TYPE","terminate"),cf(n,t),(e=new Xh(n,n.j,e,void 0)).K=2,e.v=Z_(Vo(t)),t=!1,se.navigator&&se.navigator.sendBeacon&&(t=se.navigator.sendBeacon(e.v.toString(),"")),!t&&se.Image&&((new Image).src=e.v,t=!0),t||(e.g=iH(e.l,null),e.g.da(e.v)),e.F=Date.now(),Zh(e)}tH(n)}function ny(n){n.g&&(ZS(n),n.g.cancel(),n.g=null)}function Kj(n){ny(n),n.u&&(se.clearTimeout(n.u),n.u=null),ry(n),n.h.cancel(),n.m&&("number"==typeof n.m&&se.clearTimeout(n.m),n.m=null)}function iy(n){Pj(n.h)||n.m||(n.m=!0,cj(n.Ja,n),n.C=0)}function Yj(n,e){var t;t=e?e.m:n.U++;const i=Vo(n.F);yt(i,"SID",n.I),yt(i,"RID",t),yt(i,"AID",n.T),cf(n,i),n.o&&n.s&&YS(i,n.o,n.s),t=new Xh(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Qj(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),WS(n.h,t),zS(t,i,e)}function cf(n,e){n.ia&&xS(n.ia,function(t,i){yt(e,i,t)}),n.l&&Ij({},function(t,i){yt(e,i,t)})}function Qj(n,e,t){t=Math.min(n.i.length,t);var i=n.l?jn(n.l.Ra,n.l,n):null;e:{var r=n.i;let o=-1;for(;;){const s=["count="+t];-1==o?0<t?(o=r[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let l=0;l<t;l++){let c=r[l].h;const u=r[l].g;if(c-=o,0>c)o=Math.max(0,r[l].h-100),a=!1;else try{Iue(u,s,"req"+c+"_")}catch{i&&i(u)}}if(a){i=s.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,i}function Xj(n){n.g||n.u||(n.Z=1,cj(n.Ia,n),n.A=0)}function XS(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Yh(jn(n.Ia,n),eH(n,n.A)),n.A++,0))}function ZS(n){null!=n.B&&(se.clearTimeout(n.B),n.B=null)}function Zj(n){n.g=new Xh(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Vo(n.sa);yt(e,"RID","rpc"),yt(e,"SID",n.I),yt(e,"CI",n.L?"0":"1"),yt(e,"AID",n.T),yt(e,"TYPE","xmlhttp"),cf(n,e),n.o&&n.s&&YS(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Z_(Vo(e)),t.s=null,t.P=!0,Ej(t,n)}function ry(n){null!=n.v&&(se.clearTimeout(n.v),n.v=null)}function Jj(n,e){var t=null;if(n.g==e){ry(n),ZS(n),n.g=null;var i=2}else{if(!qS(n.h,e))return;t=e.D,Lj(n.h,e),i=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var r=n.C;Tn(i=q_(),new yj(i,t)),iy(n)}else Xj(n);else if(3==(r=e.o)||0==r&&0<n.pa||!(1==i&&function Nue(n,e){return!(Fj(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Yh(jn(n.Ja,n,e),eH(n,n.C)),n.C++,0)))}(n,e)||2==i&&XS(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),r){case 1:Wa(n,5);break;case 4:Wa(n,10);break;case 3:Wa(n,6);break;default:Wa(n,2)}}function eH(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Wa(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var i=jn(n.kb,n);t||(t=new qa("//www.google.com/images/cleardot.gif"),se.location&&"http"==se.location.protocol||Q_(t,"https"),Z_(t)),function Tue(n,e){const t=new $_;if(se.Image){const i=new Image;i.onload=F_(J_,t,i,"TestLoadImage: loaded",!0,e),i.onerror=F_(J_,t,i,"TestLoadImage: error",!1,e),i.onabort=F_(J_,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=F_(J_,t,i,"TestLoadImage: timeout",!1,e),se.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else ni(2);n.G=0,n.l&&n.l.va(e),tH(n),Kj(n)}function tH(n){if(n.G=0,n.la=[],n.l){const e=Vj(n.h);(0!=e.length||0!=n.i.length)&&(KU(n.la,e),KU(n.la,n.i),n.h.i.length=0,gS(n.i),n.i.length=0),n.l.ua()}}function nH(n,e,t){var i=t instanceof qa?Vo(t):new qa(t,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),X_(i,i.m);else{var r=se.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new qa(null,void 0);i&&Q_(o,i),e&&(o.g=e),r&&X_(o,r),t&&(o.l=t),i=o}return e=n.za,(t=n.D)&&e&&yt(i,t,e),yt(i,"VER",n.ma),cf(n,i),i}function iH(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new kt(t&&n.Da&&!n.ra?new rf({jb:!0}):n.ra)).Ka(n.H),e}function rH(){}function oy(){if(Zc&&!(10<=Number(Qce)))throw Error("Environmental error: no available transport.")}function Oi(n,e){un.call(this),this.g=new Gj(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!L_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!L_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new tu(this)}function oH(n){BS.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function sH(){US.call(this),this.status=1}function tu(n){this.g=n}($=kt.prototype).Ka=function(n){this.L=n},$.da=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():jS.g(),this.C=function bj(n){return n.h||(n.h=n.i())}(this.u?this.u:jS),this.g.onreadystatechange=jn(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(o){return void jj(this,o)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const o of i.keys())t.set(o,i.get(o))}i=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),r=se.FormData&&n instanceof se.FormData,!(0<=GU(kue,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of t)this.g.setRequestHeader(o,s);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$j(this),0<this.B&&((this.K=function Rue(n){return Zc&&function Yce(){return function qce(n){var e=Kce;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=YU(String(B_)).split("."),t=YU("9").split("."),i=Math.max(e.length,t.length);for(let s=0;0==n&&s<i;s++){var r=e[s]||"",o=t[s]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==r[0].length&&0==o[0].length)break;n=_S(0==r[1].length?0:parseInt(r[1],10),0==o[1].length?0:parseInt(o[1],10))||_S(0==r[2].length,0==o[2].length)||_S(r[2],o[2]),r=r[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=jn(this.qa,this)):this.A=LS(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){jj(this,o)}},$.qa=function(){typeof pS<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tn(this,"timeout"),this.abort(8))},$.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Tn(this,"complete"),Tn(this,"abort"),ty(this))},$.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ty(this,!0)),kt.X.M.call(this)},$.Ha=function(){this.s||(this.F||this.v||this.l?zj(this):this.fb())},$.fb=function(){zj(this)},$.aa=function(){try{return 2<Bo(this)?this.g.status:-1}catch{return-1}},$.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},$.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Mue(e)}},$.Ea=function(){return this.m},$.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},($=Gj.prototype).ma=8,$.G=1,$.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const r=new Xh(this,this.j,n,void 0);let o=this.s;if(this.S&&(o?(o=ej(o),nj(o,this.S)):o=this.S),null!==this.o||this.N||(r.H=o,o=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var i=this.i[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Qj(this,r,e),yt(t=Vo(this.F),"RID",n),yt(t,"CVER",22),this.D&&yt(t,"X-HTTP-Session-Id",this.D),cf(this,t),o&&(this.N?e="headers="+encodeURIComponent(String(Wj(o)))+"&"+e:this.o&&YS(t,this.o,o)),WS(this.h,r),this.Ya&&yt(t,"TYPE","init"),this.O?(yt(t,"$req",e),yt(t,"SID","null"),r.Z=!0,zS(r,t,null)):zS(r,t,e),this.G=2}}else 3==this.G&&(n?Yj(this,n):0==this.i.length||Pj(this.h)||Yj(this))},$.Ia=function(){if(this.u=null,Zj(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Yh(jn(this.eb,this),n)}},$.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ni(10),ny(this),Zj(this))},$.cb=function(){null!=this.v&&(this.v=null,ny(this),XS(this),ni(19))},$.kb=function(n){n?(this.j.info("Successfully pinged google.com"),ni(2)):(this.j.info("Failed to ping google.com"),ni(1))},($=rH.prototype).xa=function(){},$.wa=function(){},$.va=function(){},$.ua=function(){},$.Ra=function(){},oy.prototype.g=function(n,e){return new Oi(n,e)},In(Oi,un),Oi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;ni(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=nH(n,null,n.V),iy(n)},Oi.prototype.close=function(){QS(this.g)},Oi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=NS(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&iy(e)},Oi.prototype.M=function(){this.g.l=null,delete this.j,QS(this.g),delete this.g,Oi.X.M.call(this)},In(oH,BS),In(sH,US),In(tu,rH),tu.prototype.xa=function(){Tn(this.g,"a")},tu.prototype.wa=function(n){Tn(this.g,new oH(n))},tu.prototype.va=function(n){Tn(this.g,new sH)},tu.prototype.ua=function(){Tn(this.g,"b")},oy.prototype.createWebChannel=oy.prototype.g,Oi.prototype.send=Oi.prototype.u,Oi.prototype.open=Oi.prototype.m,Oi.prototype.close=Oi.prototype.close,W_.NO_ERROR=0,W_.TIMEOUT=8,W_.HTTP_ERROR=6,vj.COMPLETE="complete",wj.EventType=Qh,Qh.OPEN="a",Qh.CLOSE="b",Qh.ERROR="c",Qh.MESSAGE="d",un.prototype.listen=un.prototype.N,kt.prototype.listenOnce=kt.prototype.O,kt.prototype.getLastError=kt.prototype.Oa,kt.prototype.getLastErrorCode=kt.prototype.Ea,kt.prototype.getStatus=kt.prototype.aa,kt.prototype.getResponseJson=kt.prototype.Sa,kt.prototype.getResponseText=kt.prototype.fa,kt.prototype.send=kt.prototype.da,kt.prototype.setWithCredentials=kt.prototype.Ka;var Oue=Lo.createWebChannelTransport=function(){return new oy},Pue=Lo.getStatEventTarget=function(){return q_()},JS=Lo.ErrorCode=W_,Fue=Lo.EventType=vj,Lue=Lo.Event=za,aH=Lo.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Vue=Lo.FetchXmlHttpFactory=rf,sy=Lo.WebChannel=wj,Bue=Lo.XhrIo=kt;const lH="@firebase/firestore";class dn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");let nu="9.19.0";const xs=new Eh("@firebase/firestore");function eI(){return xs.logLevel}function T(n,...e){if(xs.logLevel<=ke.DEBUG){const t=e.map(tI);xs.debug(`Firestore (${nu}): ${n}`,...t)}}function Ht(n,...e){if(xs.logLevel<=ke.ERROR){const t=e.map(tI);xs.error(`Firestore (${nu}): ${n}`,...t)}}function Yr(n,...e){if(xs.logLevel<=ke.WARN){const t=e.map(tI);xs.warn(`Firestore (${nu}): ${n}`,...t)}}function tI(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function U(n="Unexpected state"){const e=`FIRESTORE (${nu}) INTERNAL ASSERTION FAILED: `+n;throw Ht(e),new Error(e)}function q(n,e){n||U()}function L(n,e){return n}const C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class S extends ti{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class rn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class cH{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Hue{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(dn.UNAUTHENTICATED))}shutdown(){}}class zue{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $ue{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const o=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let s=new rn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new rn,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(m(function*(){yield c.promise,yield o(i.currentUser)}))},l=c=>{T("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(T("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rn)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(T("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(q("string"==typeof i.accessToken),new cH(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return q(null===e||"string"==typeof e),new dn(e)}}class que{constructor(e,t,i){this.h=e,this.l=t,this.m=i,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Wue{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new que(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uH{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gue{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const i=o=>{null!=o.error&&T("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.T;return this.T=o.token,T("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{T("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?r(o):T("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(q("string"==typeof t.token),this.T=t.token,new uH(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Kue(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class dH{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=Kue(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%e.length))}return i}}function ae(n,e){return n<e?-1:n>e?1:0}function iu(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function hH(n){return n+"\0"}class vt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new S(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new S(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new S(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new S(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new vt(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class G{constructor(e){this.timestamp=e}static fromTimestamp(e){return new G(e)}static min(){return new G(new vt(0,0))}static max(){return new G(new vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class uf{constructor(e,t,i){void 0===t?t=0:t>e.length&&U(),void 0===i?i=e.length-t:i>e.length-t&&U(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===uf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof uf?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const o=e.get(r),s=t.get(r);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ne extends uf{construct(e,t,i){return new Ne(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new S(C.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new Ne(t)}static emptyPath(){return new Ne([])}}const Yue=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends uf{construct(e,t,i){return new Rt(e,t,i)}static isValidIdentifier(e){return Yue.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Rt(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const o=()=>{if(0===i.length)throw new S(C.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let s=!1;for(;r<e.length;){const a=e[r];if("\\"===a){if(r+1===e.length)throw new S(C.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new S(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else"`"===a?(s=!s,r++):"."!==a||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new S(C.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rt(t)}static emptyPath(){return new Rt([])}}class O{constructor(e){this.path=e}static fromPath(e){return new O(Ne.fromString(e))}static fromName(e){return new O(Ne.fromString(e).popFirst(5))}static empty(){return new O(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ne.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ne.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new O(new Ne(e.slice()))}}class ay{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function nI(n){return n.fields.find(e=>2===e.kind)}function Ga(n){return n.fields.filter(e=>2!==e.kind)}ay.UNKNOWN_ID=-1;class ly{constructor(e,t){this.fieldPath=e,this.kind=t}}class df{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new df(0,Pi.min())}}function fH(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=G.fromTimestamp(1e9===i?new vt(t+1,0):new vt(t,i));return new Pi(r,O.empty(),e)}function pH(n){return new Pi(n.readTime,n.key,-1)}class Pi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Pi(G.min(),O.empty(),-1)}static max(){return new Pi(G.max(),O.empty(),-1)}}function iI(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=O.comparator(n.documentKey,e.documentKey),0!==t?t:ae(n.largestBatchId,e.largestBatchId))}const mH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gH{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ds(n){return rI.apply(this,arguments)}function rI(){return rI=m(function*(n){if(n.code!==C.FAILED_PRECONDITION||n.message!==mH)throw n;T("LocalStore","Unexpectedly lost primary lease")}),rI.apply(this,arguments)}class w{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&U(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new w((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof w?t:w.resolve(t)}catch(t){return w.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):w.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):w.reject(t)}static resolve(e){return new w((t,i)=>{t(e)})}static reject(e){return new w((t,i)=>{i(e)})}static waitFor(e){return new w((t,i)=>{let r=0,o=0,s=!1;e.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&t()},l=>i(l))}),s=!0,o===r&&t()})}static or(e){let t=w.resolve(!1);for(const i of e)t=t.next(r=>r?w.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,o)=>{i.push(t.call(this,r,o))}),this.waitFor(i)}static mapArray(e,t){return new w((i,r)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;t(e[c]).next(u=>{s[c]=u,++a,a===o&&i(s)},u=>r(u))}})}static doWhile(e,t){return new w((i,r)=>{const o=()=>{!0===e()?t().next(()=>{o()},r):i()};o()})}}class cy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new rn,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new hf(e,t.error)):this.R.resolve()},this.transaction.onerror=i=>{const r=oI(i.target.error);this.R.reject(new hf(e,r))}}static open(e,t,i,r){try{return new cy(t,e.transaction(r,i))}catch(o){throw new hf(t,o)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(T("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Jue(t)}}class Cr{constructor(e,t,i){this.name=e,this.version=t,this.V=i,12.2===Cr.S(ft())&&Ht("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return T("SimpleDb","Removing database:",e),Ka(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!bh())return!1;if(Cr.C())return!0;const e=ft(),t=Cr.S(e),i=0<t&&t<10,r=Cr.N(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static O(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}$(e){var t=this;return m(function*(){return t.db||(T("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=s=>{i(s.target.result)},o.onblocked=()=>{r(new hf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;r("VersionError"===a.name?new S(C.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new S(C.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new hf(e,a))},o.onupgradeneeded=s=>{T("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',s.oldVersion),t.V.M(s.target.result,o.transaction,s.oldVersion,t.version).next(()=>{T("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=i=>t.F(i)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var o=this;return m(function*(){const s="readonly"===t;let a=0;for(;;){++a;try{o.db=yield o.$(e);const l=cy.open(o.db,e,s?"readonly":"readwrite",i),c=r(l).next(u=>(l.P(),u)).catch(u=>(l.abort(u),w.reject(u))).toPromise();return c.catch(()=>{}),yield l.v,c}catch(l){const c=l,u="FirebaseError"!==c.name&&a<3;if(T("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),o.close(),!u)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Zue{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Ka(this.L.delete())}}class hf extends S{constructor(e,t){super(C.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ss(n){return"IndexedDbTransactionError"===n.name}class Jue{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(T("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(T("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Ka(i)}add(e){return T("SimpleDb","ADD",this.store.name,e,e),Ka(this.store.add(e))}get(e){return Ka(this.store.get(e)).next(t=>(void 0===t&&(t=null),T("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return T("SimpleDb","DELETE",this.store.name,e),Ka(this.store.delete(e))}count(){return T("SimpleDb","COUNT",this.store.name),Ka(this.store.count())}j(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),o=[];return this.W(r,(s,a)=>{o.push(a)}).next(()=>o)}{const r=this.store.getAll(i.range);return new w((o,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{o(a.target.result)}})}}H(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new w((r,o)=>{i.onerror=s=>{o(s.target.error)},i.onsuccess=s=>{r(s.target.result)}})}J(e,t){T("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const r=this.cursor(i);return this.W(r,(o,s,a)=>a.delete())}Z(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.W(r,t)}X(e){const t=this.cursor({});return new w((i,r)=>{t.onerror=o=>{const s=oI(o.target.error);r(s)},t.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():i()}):i()}})}W(e,t){const i=[];return new w((r,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void r();const l=new Zue(a),c=t(a.primaryKey,a.value,l);if(c instanceof w){const u=c.catch(d=>(l.done(),w.reject(d)));i.push(u)}l.isDone?r():null===l.K?a.continue():a.continue(l.K)}}).next(()=>w.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ka(n){return new w((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=oI(i.target.error);t(r)}})}let _H=!1;function oI(n){const e=Cr.S(ft());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new S("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _H||(_H=!0,setTimeout(()=>{throw i},0)),i}}return n}class ede{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;T("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,m(function*(){t.task=null;try{T("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(i){Ss(i)?T("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Ds(i)}yield t.et(6e4)}))}}class tde{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return m(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.st(i,e))})()}st(e,t){const i=new Set;let r=t,o=!0;return w.doWhile(()=>!0===o&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!i.has(s))return T("IndexBackiller",`Processing collection: ${s}`),this.it(e,s,r).next(a=>{r-=a,i.add(s)});o=!1})).next(()=>t-r)}it(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.rt(r,o)).next(a=>(T("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}rt(e,t){let i=e;return t.changes.forEach((r,o)=>{const s=pH(o);iI(s,i)>0&&(i=s)}),new Pi(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Fi=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>i.writeSequenceNumber(r))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function ff(n){return null==n}function pf(n){return 0===n&&1/n==-1/0}function yH(n){return"number"==typeof n&&Number.isInteger(n)&&!pf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ii(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vH(e)),e=nde(n.get(t),e);return vH(e)}function nde(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function vH(n){return n+"\x01\x01"}function Qr(n){const e=n.length;if(q(e>=2),2===e)return q("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ne.emptyPath();const t=e-2,i=[];let r="";for(let o=0;o<e;){const s=n.indexOf("\x01",o);switch((s<0||s>t)&&U(),n.charAt(s+1)){case"\x01":const a=n.substring(o,s);let l;0===r.length?l=a:(r+=a,l=r,r=""),i.push(l);break;case"\x10":r+=n.substring(o,s),r+="\0";break;case"\x11":r+=n.substring(o,s+1);break;default:U()}o=s+2}return new Ne(i)}const bH=["userId","batchId"];function uy(n,e){return[n,ii(e)]}function wH(n,e,t){return[n,ii(e),t]}const ide={},rde=["prefixPath","collectionGroup","readTime","documentId"],ode=["prefixPath","collectionGroup","documentId"],sde=["collectionGroup","readTime","prefixPath","documentId"],ade=["canonicalId","targetId"],lde=["targetId","path"],cde=["path","targetId"],ude=["collectionId","parent"],dde=["indexId","uid"],hde=["uid","sequenceNumber"],fde=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pde=["indexId","uid","orderedDocumentKey"],mde=["userId","collectionPath","documentId"],gde=["userId","collectionPath","largestBatchId"],_de=["userId","collectionGroup","largestBatchId"],CH=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yde=[...CH,"documentOverlays"],EH=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xH=EH,vde=[...xH,"indexConfiguration","indexState","indexEntries"];class sI extends gH{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function hn(n,e){const t=L(n);return Cr.O(t.at,e)}function DH(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ya(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function SH(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Nt{constructor(e,t){this.comparator=e,this.root=t||Mn.EMPTY}insert(e,t){return new Nt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new Nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dy(this.root,e,this.comparator,!1)}getReverseIterator(){return new dy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dy(this.root,e,this.comparator,!0)}}class dy{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mn{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??Mn.RED,this.left=r??Mn.EMPTY,this.right=o??Mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new Mn(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===o?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Mn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw U();const e=this.left.check();if(e!==this.right.check())throw U();return e+(this.isRed()?0:1)}}Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1,Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw U()}get value(){throw U()}get color(){throw U()}get left(){throw U()}get right(){throw U()}copy(n,e,t,i,r){return this}insert(n,e,t){return new Mn(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tt{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new IH(this.data.getIterator())}getIteratorFrom(e){return new IH(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(0!==this.comparator(r,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new tt(this.comparator);return t.data=e,t}}class IH{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ru(n){return n.hasNext()?n.getNext():void 0}class _i{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new _i([])}unionWith(e){let t=new tt(Rt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new _i(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return iu(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class bde extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class on{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new bde("Invalid base64 string: "+r):r}}(e);return new on(t)}static fromUint8Array(e){const t=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(e);return new on(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const Cde=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Is(n){if(q(!!n),"string"==typeof n){let e=0;const t=Cde.exec(n);if(q(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ot(n.seconds),nanos:Ot(n.nanos)}}function Ot(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Qa(n){return"string"==typeof n?on.fromBase64String(n):on.fromUint8Array(n)}function aI(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function TH(n){const e=n.mapValue.fields.__previous_value__;return aI(e)?TH(e):e}function mf(n){const e=Is(n.mapValue.fields.__local_write_time__.timestampValue);return new vt(e.seconds,e.nanos)}class Ede{constructor(e,t,i,r,o,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class Ts{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ts("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ts&&e.projectId===this.projectId&&e.database===this.database}}const Ms={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},hy={nullValue:"NULL_VALUE"};function Xa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?aI(n)?4:RH(n)?9007199254740991:10:U()}function Xr(n,e){if(n===e)return!0;const t=Xa(n);if(t!==Xa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mf(n).isEqual(mf(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=Is(i.timestampValue),s=Is(r.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,Qa(n.bytesValue).isEqual(Qa(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return Ot(i.geoPointValue.latitude)===Ot(r.geoPointValue.latitude)&&Ot(i.geoPointValue.longitude)===Ot(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Ot(i.integerValue)===Ot(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=Ot(i.doubleValue),s=Ot(r.doubleValue);return o===s?pf(o)===pf(s):isNaN(o)&&isNaN(s)}return!1}(n,e);case 9:return iu(n.arrayValue.values||[],e.arrayValue.values||[],Xr);case 10:return function(i,r){const o=i.mapValue.fields||{},s=r.mapValue.fields||{};if(DH(o)!==DH(s))return!1;for(const a in o)if(o.hasOwnProperty(a)&&(void 0===s[a]||!Xr(o[a],s[a])))return!1;return!0}(n,e);default:return U()}var r}function gf(n,e){return void 0!==(n.values||[]).find(t=>Xr(t,e))}function As(n,e){if(n===e)return 0;const t=Xa(n),i=Xa(e);if(t!==i)return ae(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ae(n.booleanValue,e.booleanValue);case 2:return function(r,o){const s=Ot(r.integerValue||r.doubleValue),a=Ot(o.integerValue||o.doubleValue);return s<a?-1:s>a?1:s===a?0:isNaN(s)?isNaN(a)?0:-1:1}(n,e);case 3:return MH(n.timestampValue,e.timestampValue);case 4:return MH(mf(n),mf(e));case 5:return ae(n.stringValue,e.stringValue);case 6:return function(r,o){const s=Qa(r),a=Qa(o);return s.compareTo(a)}(n.bytesValue,e.bytesValue);case 7:return function(r,o){const s=r.split("/"),a=o.split("/");for(let l=0;l<s.length&&l<a.length;l++){const c=ae(s[l],a[l]);if(0!==c)return c}return ae(s.length,a.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,o){const s=ae(Ot(r.latitude),Ot(o.latitude));return 0!==s?s:ae(Ot(r.longitude),Ot(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,o){const s=r.values||[],a=o.values||[];for(let l=0;l<s.length&&l<a.length;++l){const c=As(s[l],a[l]);if(c)return c}return ae(s.length,a.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,o){if(r===Ms.mapValue&&o===Ms.mapValue)return 0;if(r===Ms.mapValue)return 1;if(o===Ms.mapValue)return-1;const s=r.fields||{},a=Object.keys(s),l=o.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const d=ae(a[u],c[u]);if(0!==d)return d;const h=As(s[a[u]],l[c[u]]);if(0!==h)return h}return ae(a.length,c.length)}(n.mapValue,e.mapValue);default:throw U()}}function MH(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ae(n,e);const t=Is(n),i=Is(e),r=ae(t.seconds,i.seconds);return 0!==r?r:ae(t.nanos,i.nanos)}function ou(n){return lI(n)}function lI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Is(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Qa(n.bytesValue).toBase64():"referenceValue"in n?O.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",o=!0;for(const s of i.values||[])o?o=!1:r+=",",r+=lI(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let o="{",s=!0;for(const a of r)s?s=!1:o+=",",o+=`${a}:${lI(i.fields[a])}`;return o+"}"}(n.mapValue):U();var e}function Za(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function cI(n){return!!n&&"integerValue"in n}function _f(n){return!!n&&"arrayValue"in n}function AH(n){return!!n&&"nullValue"in n}function kH(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fy(n){return!!n&&"mapValue"in n}function yf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ya(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=yf(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function RH(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function xde(n){return"nullValue"in n?hy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Za(Ts.empty(),O.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:U()}function Dde(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Za(Ts.empty(),O.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ms:U()}function NH(n,e){const t=As(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function OH(n,e){const t=As(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!fy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yf(t)}setAll(e){let t=Rt.emptyPath(),i={},r=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=a.popLast()}s?i[a.lastSegment()]=yf(s):r.push(a.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){const t=this.field(e.popLast());fy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];fy(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Ya(t,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new fn(yf(this.value))}}function PH(n){const e=[];return Ya(n.fields,(t,i)=>{const r=new Rt([t]);if(fy(i)){const o=PH(i.mapValue).fields;if(0===o.length)e.push(r);else for(const s of o)e.push(r.child(s))}else e.push(r)}),new _i(e)}class pt{constructor(e,t,i,r,o,s,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new pt(e,0,G.min(),G.min(),G.min(),fn.empty(),0)}static newFoundDocument(e,t,i,r){return new pt(e,1,t,G.min(),i,r,0)}static newNoDocument(e,t){return new pt(e,2,t,G.min(),G.min(),fn.empty(),0)}static newUnknownDocument(e,t){return new pt(e,3,t,G.min(),G.min(),fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(G.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ks{constructor(e,t){this.position=e,this.inclusive=t}}function FH(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const o=e[r],s=n.position[r];if(i=o.field.isKeyField()?O.comparator(O.fromName(s.referenceValue),t.key):As(s,t.data.field(o.field)),"desc"===o.dir&&(i*=-1),0!==i)break}return i}function LH(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xr(n.position[t],e.position[t]))return!1;return!0}class su{constructor(e,t="asc"){this.field=e,this.dir=t}}function Sde(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class VH{}class Ie extends VH{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new Ide(e,t,i):"array-contains"===t?new Ade(e,i):"in"===t?new $H(e,i):"not-in"===t?new kde(e,i):"array-contains-any"===t?new Rde(e,i):new Ie(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new Tde(e,i):new Mde(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(As(t,this.value)):null!==t&&Xa(this.value)===Xa(t)&&this.matchesComparison(As(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return U()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Xe extends VH{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Xe(e,t)}matches(e){return au(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function au(n){return"and"===n.op}function uI(n){return"or"===n.op}function dI(n){return BH(n)&&au(n)}function BH(n){for(const e of n.filters)if(e instanceof Xe)return!1;return!0}function hI(n){if(n instanceof Ie)return n.field.canonicalString()+n.op.toString()+ou(n.value);if(dI(n))return n.filters.map(e=>hI(e)).join(",");{const e=n.filters.map(t=>hI(t)).join(",");return`${n.op}(${e})`}}function UH(n,e){return n instanceof Ie?(t=n,(i=e)instanceof Ie&&t.op===i.op&&t.field.isEqual(i.field)&&Xr(t.value,i.value)):n instanceof Xe?function(t,i){return i instanceof Xe&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((r,o,s)=>r&&UH(o,i.filters[s]),!0)}(n,e):void U();var t,i}function jH(n,e){const t=n.filters.concat(e);return Xe.create(t,n.op)}function HH(n){return n instanceof Ie?function(e){return`${e.field.canonicalString()} ${e.op} ${ou(e.value)}`}(n):n instanceof Xe?function(e){return e.op.toString()+" {"+e.getFilters().map(HH).join(" ,")+"}"}(n):"Filter"}class Ide extends Ie{constructor(e,t,i){super(e,t,i),this.key=O.fromName(i.referenceValue)}matches(e){const t=O.comparator(e.key,this.key);return this.matchesComparison(t)}}class Tde extends Ie{constructor(e,t){super(e,"in",t),this.keys=zH(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Mde extends Ie{constructor(e,t){super(e,"not-in",t),this.keys=zH(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function zH(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>O.fromName(i.referenceValue))}class Ade extends Ie{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _f(t)&&gf(t.arrayValue,this.value)}}class $H extends Ie{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&gf(this.value.arrayValue,t)}}class kde extends Ie{constructor(e,t){super(e,"not-in",t)}matches(e){if(gf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!gf(this.value.arrayValue,t)}}class Rde extends Ie{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_f(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>gf(this.value.arrayValue,i))}}class Nde{constructor(e,t=null,i=[],r=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ft=null}}function fI(n,e=null,t=[],i=[],r=null,o=null,s=null){return new Nde(n,e,t,i,r,o,s)}function Ja(n){const e=L(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>hI(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),ff(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ou(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ou(i)).join(",")),e.ft=t}return e.ft}function vf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Sde(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!UH(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!LH(n.startAt,e.startAt)&&LH(n.endAt,e.endAt)}function py(n){return O.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function my(n,e){return n.filters.filter(t=>t instanceof Ie&&t.field.isEqual(e))}function qH(n,e,t){let i=hy,r=!0;for(const o of my(n,e)){let s=hy,a=!0;switch(o.op){case"<":case"<=":s=xde(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=hy}NH({value:i,inclusive:r},{value:s,inclusive:a})<0&&(i=s,r=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];NH({value:i,inclusive:r},{value:s,inclusive:t.inclusive})<0&&(i=s,r=t.inclusive);break}return{value:i,inclusive:r}}function WH(n,e,t){let i=Ms,r=!0;for(const o of my(n,e)){let s=Ms,a=!0;switch(o.op){case">=":case">":s=Dde(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Ms}OH({value:i,inclusive:r},{value:s,inclusive:a})>0&&(i=s,r=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];OH({value:i,inclusive:r},{value:s,inclusive:t.inclusive})>0&&(i=s,r=t.inclusive);break}return{value:i,inclusive:r}}class Uo{constructor(e,t=null,i=[],r=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.dt=null,this.wt=null}}function GH(n,e,t,i,r,o,s,a){return new Uo(n,e,t,i,r,o,s,a)}function lu(n){return new Uo(n)}function KH(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function pI(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function gy(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function mI(n){return null!==n.collectionGroup}function el(n){const e=L(n);if(null===e.dt){e.dt=[];const t=gy(e),i=pI(e);if(null!==t&&null===i)t.isKeyField()||e.dt.push(new su(t)),e.dt.push(new su(Rt.keyField(),"asc"));else{let r=!1;for(const o of e.explicitOrderBy)e.dt.push(o),o.field.isKeyField()&&(r=!0);if(!r){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new su(Rt.keyField(),o))}}}return e.dt}function ri(n){const e=L(n);if(!e.wt)if("F"===e.limitType)e.wt=fI(e.path,e.collectionGroup,el(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of el(e))t.push(new su(o.field,"desc"===o.dir?"asc":"desc"));const i=e.endAt?new ks(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ks(e.startAt.position,e.startAt.inclusive):null;e.wt=fI(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e.wt}function gI(n,e){e.getFirstInequalityField(),gy(n);const t=n.filters.concat([e]);return new Uo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function _y(n,e,t){return new Uo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bf(n,e){return vf(ri(n),ri(e))&&n.limitType===e.limitType}function YH(n){return`${Ja(ri(n))}|lt:${n.limitType}`}function _I(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>HH(i)).join(", ")}]`),ff(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>{return`${(r=i).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ou(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ou(i)).join(",")),`Target(${t})`}(ri(n))}; limitType=${n.limitType})`}function wf(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):O.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of el(t))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,o,s){const a=FH(r,o,s);return r.inclusive?a<=0:a<0}(t.startAt,el(t),i)||t.endAt&&!function(r,o,s){const a=FH(r,o,s);return r.inclusive?a>=0:a>0}(t.endAt,el(t),i)));var t,i}function QH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function XH(n){return(e,t)=>{let i=!1;for(const r of el(n)){const o=Ode(r,e,t);if(0!==o)return o;i=i||r.field.isKeyField()}return 0}}function Ode(n,e,t){const i=n.field.isKeyField()?O.comparator(e.key,t.key):function(r,o,s){const a=o.data.field(r),l=s.data.field(r);return null!==a&&null!==l?As(a,l):U()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return U()}}class Rs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,o]of i)if(this.equalsFn(r,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ya(this.inner,(t,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return SH(this.inner)}size(){return this.innerSize}}const Pde=new Nt(O.comparator);function yi(){return Pde}const ZH=new Nt(O.comparator);function Cf(...n){let e=ZH;for(const t of n)e=e.insert(t.key,t);return e}function JH(n){let e=ZH;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Zr(){return Ef()}function ez(){return Ef()}function Ef(){return new Rs(n=>n.toString(),(n,e)=>n.isEqual(e))}const Fde=new Nt(O.comparator),Lde=new tt(O.comparator);function me(...n){let e=Lde;for(const t of n)e=e.add(t);return e}const Vde=new tt(ae);function yy(){return Vde}function tz(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pf(e)?"-0":e}}function nz(n){return{integerValue:""+n}}function iz(n,e){return yH(e)?nz(e):tz(n,e)}class vy{constructor(){this._=void 0}}function Bde(n,e,t){return n instanceof cu?function(i,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(o.fields.__previous_value__=r),{mapValue:o}}(t,e):n instanceof tl?oz(n,e):n instanceof nl?sz(n,e):function(i,r){const o=rz(i,r),s=az(o)+az(i._t);return cI(o)&&cI(i._t)?nz(s):tz(i.serializer,s)}(n,e)}function Ude(n,e,t){return n instanceof tl?oz(n,e):n instanceof nl?sz(n,e):t}function rz(n,e){return n instanceof uu?cI(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class cu extends vy{}class tl extends vy{constructor(e){super(),this.elements=e}}function oz(n,e){const t=lz(e);for(const i of n.elements)t.some(r=>Xr(r,i))||t.push(i);return{arrayValue:{values:t}}}class nl extends vy{constructor(e){super(),this.elements=e}}function sz(n,e){let t=lz(e);for(const i of n.elements)t=t.filter(r=>!Xr(r,i));return{arrayValue:{values:t}}}class uu extends vy{constructor(e,t){super(),this.serializer=e,this._t=t}}function az(n){return Ot(n.integerValue||n.doubleValue)}function lz(n){return _f(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class xf{constructor(e,t){this.field=e,this.transform=t}}class Hde{constructor(e,t){this.version=e,this.transformResults=t}}class bt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bt}static exists(e){return new bt(void 0,e)}static updateTime(e){return new bt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function by(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class wy{}function cz(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new hu(n.key,bt.none()):new du(n.key,n.data,bt.none());{const t=n.data,i=fn.empty();let r=new tt(Rt.comparator);for(let o of e.fields)if(!r.has(o)){let s=t.field(o);null===s&&o.length>1&&(o=o.popLast(),s=t.field(o)),null===s?i.delete(o):i.set(o,s),r=r.add(o)}return new jo(n.key,i,new _i(r.toArray()),bt.none())}}function zde(n,e,t){n instanceof du?function(i,r,o){const s=i.value.clone(),a=hz(i.fieldTransforms,r,o.transformResults);s.setAll(a),r.convertToFoundDocument(o.version,s).setHasCommittedMutations()}(n,e,t):n instanceof jo?function(i,r,o){if(!by(i.precondition,r))return void r.convertToUnknownDocument(o.version);const s=hz(i.fieldTransforms,r,o.transformResults),a=r.data;a.setAll(dz(i)),a.setAll(s),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Df(n,e,t,i){return n instanceof du?function(r,o,s,a){if(!by(r.precondition,o))return s;const l=r.value.clone(),c=fz(r.fieldTransforms,a,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,i):n instanceof jo?function(r,o,s,a){if(!by(r.precondition,o))return s;const l=fz(r.fieldTransforms,a,o),c=o.data;return c.setAll(dz(r)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null===s?null:s.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(u=>u.field))}(n,e,t,i):(s=t,by(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):s);var o,s}function $de(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),o=rz(i.transform,r||null);null!=o&&(null===t&&(t=fn.empty()),t.set(i.field,o))}return t||null}function uz(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&iu(t,i,(r,o)=>function jde(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof tl&&i instanceof tl||t instanceof nl&&i instanceof nl?iu(t.elements,i.elements,Xr):t instanceof uu&&i instanceof uu?Xr(t._t,i._t):t instanceof cu&&i instanceof cu);var t,i}(r,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class du extends wy{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class jo extends wy{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function dz(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function hz(n,e,t){const i=new Map;q(n.length===t.length);for(let r=0;r<t.length;r++){const o=n[r],s=o.transform,a=e.data.field(o.field);i.set(o.field,Ude(s,a,t[r]))}return i}function fz(n,e,t){const i=new Map;for(const r of n){const o=r.transform,s=t.data.field(r.field);i.set(r.field,Bde(o,s,e))}return i}class hu extends wy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yI extends wy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vI{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&zde(o,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Df(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Df(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=ez();return this.mutations.forEach(r=>{const o=e.get(r.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(r.key)?null:a;const l=cz(s,a);null!==l&&i.set(r.key,l),s.isValidDocument()||s.convertToNoDocument(G.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),me())}isEqual(e){return this.batchId===e.batchId&&iu(this.mutations,e.mutations,(t,i)=>uz(t,i))&&iu(this.baseMutations,e.baseMutations,(t,i)=>uz(t,i))}}class bI{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){q(e.mutations.length===i.length);let r=Fde;const o=e.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new bI(e,t,i,r)}}class wI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Gde{constructor(e){this.count=e}}var Kt,Oe;function pz(n){switch(n){default:return U();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0}}function mz(n){if(void 0===n)return Ht("GRPC error has no .code"),C.UNKNOWN;switch(n){case Kt.OK:return C.OK;case Kt.CANCELLED:return C.CANCELLED;case Kt.UNKNOWN:return C.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return C.INTERNAL;case Kt.UNAVAILABLE:return C.UNAVAILABLE;case Kt.UNAUTHENTICATED:return C.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case Kt.NOT_FOUND:return C.NOT_FOUND;case Kt.ALREADY_EXISTS:return C.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return C.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case Kt.ABORTED:return C.ABORTED;case Kt.OUT_OF_RANGE:return C.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return C.UNIMPLEMENTED;case Kt.DATA_LOSS:return C.DATA_LOSS;default:return U()}}(Oe=Kt||(Kt={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";class EI{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Cy}static getOrCreateInstance(){return null===Cy&&(Cy=new EI),Cy}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Cy=null;class Sf{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,If.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Sf(G.min(),r,yy(),yi(),me())}}class If{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new If(i,t,me(),me(),me())}}class Ey{constructor(e,t,i,r){this.It=e,this.removedTargetIds=t,this.key=i,this.Tt=r}}class gz{constructor(e,t){this.targetId=e,this.Et=t}}class _z{constructor(e,t,i=on.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class yz{constructor(){this.At=0,this.Rt=bz(),this.vt=on.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return 0!==this.At}get St(){return this.Pt}Dt(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}Ct(){let e=me(),t=me(),i=me();return this.Rt.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:U()}}),new If(this.vt,this.bt,e,t,i)}xt(){this.Pt=!1,this.Rt=bz()}Nt(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class Kde{constructor(e){this.Ft=e,this.Bt=new Map,this.Lt=yi(),this.qt=vz(),this.Ut=new tt(ae)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}zt(e){this.forEachTarget(e,t=>{const i=this.jt(t);switch(e.state){case 0:this.Wt(t)&&i.Dt(e.resumeToken);break;case 1:i.$t(),i.Vt||i.xt(),i.Dt(e.resumeToken);break;case 2:i.$t(),i.Vt||this.removeTarget(t);break;case 3:this.Wt(t)&&(i.Mt(),i.Dt(e.resumeToken));break;case 4:this.Wt(t)&&(this.Ht(t),i.Dt(e.resumeToken));break;default:U()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((i,r)=>{this.Wt(r)&&t(r)})}Jt(e){var t;const i=e.targetId,r=e.Et.count,o=this.Yt(i);if(o){const s=o.target;if(py(s))if(0===r){const a=new O(s.path);this.Qt(i,a,pt.newNoDocument(a,G.min()))}else q(1===r);else{const a=this.Zt(i);a!==r&&(this.Ht(i),this.Ut=this.Ut.add(i),null===(t=EI.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:a,existenceFilterCount:e.Et.count}))}}}Xt(e){const t=new Map;this.Bt.forEach((o,s)=>{const a=this.Yt(s);if(a){if(o.current&&py(a.target)){const l=new O(a.target.path);null!==this.Lt.get(l)||this.te(s,l)||this.Qt(s,l,pt.newNoDocument(l,e))}o.St&&(t.set(s,o.Ct()),o.xt())}});let i=me();this.qt.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.Yt(l);return!c||2===c.purpose||(a=!1,!1)}),a&&(i=i.add(o))}),this.Lt.forEach((o,s)=>s.setReadTime(e));const r=new Sf(e,t,this.Ut,this.Lt,i);return this.Lt=yi(),this.qt=vz(),this.Ut=new tt(ae),r}Gt(e,t){if(!this.Wt(e))return;const i=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,i),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,i){if(!this.Wt(e))return;const r=this.jt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),i&&(this.Lt=this.Lt.insert(t,i))}removeTarget(e){this.Bt.delete(e)}Zt(e){const t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.jt(e).Ot()}jt(e){let t=this.Bt.get(e);return t||(t=new yz,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new tt(ae),this.qt=this.qt.insert(e,t)),t}Wt(e){const t=null!==this.Yt(e);return t||T("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}Ht(e){this.Bt.set(e,new yz),this.Ft.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}function vz(){return new Nt(O.comparator)}function bz(){return new Nt(O.comparator)}const Yde={asc:"ASCENDING",desc:"DESCENDING"},Qde={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Xde={and:"AND",or:"OR"};class Zde{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function fu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wz(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Jde(n,e){return fu(n,e.toTimestamp())}function zt(n){return q(!!n),G.fromTimestamp(function(e){const t=Is(e);return new vt(t.seconds,t.nanos)}(n))}function xI(n,e){return(t=n,new Ne(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Cz(n){const e=Ne.fromString(n);return q(kz(e)),e}function Tf(n,e){return xI(n.databaseId,e.path)}function Jr(n,e){const t=Cz(e);if(t.get(1)!==n.databaseId.projectId)throw new S(C.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new S(C.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new O(xz(t))}function DI(n,e){return xI(n.databaseId,e)}function Ez(n){const e=Cz(n);return 4===e.length?Ne.emptyPath():xz(e)}function Mf(n){return new Ne(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xz(n){return q(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Dz(n,e,t){return{name:Tf(n,e),fields:t.value.mapValue.fields}}function Sz(n,e,t){const i=Jr(n,e.name),r=zt(e.updateTime),o=e.createTime?zt(e.createTime):G.min(),s=new fn({mapValue:{fields:e.fields}}),a=pt.newFoundDocument(i,r,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Af(n,e){let t;if(e instanceof du)t={update:Dz(n,e.key,e.value)};else if(e instanceof hu)t={delete:Tf(n,e.key)};else if(e instanceof jo)t={update:Dz(n,e.key,e.data),updateMask:ahe(e.fieldMask)};else{if(!(e instanceof yI))return U();t={verify:Tf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,o){const s=o.transform;if(s instanceof cu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof tl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof nl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof uu)return{fieldPath:o.field.canonicalString(),increment:s._t};throw U()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:Jde(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:U()),t;var r}function SI(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?bt.updateTime(zt(r.updateTime)):void 0!==r.exists?bt.exists(r.exists):bt.none():bt.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(o,s){let a=null;"setToServerValue"in s?(q("REQUEST_TIME"===s.setToServerValue),a=new cu):"appendMissingElements"in s?a=new tl(s.appendMissingElements.values||[]):"removeAllFromArray"in s?a=new nl(s.removeAllFromArray.values||[]):"increment"in s?a=new uu(o,s.increment):U();const l=Rt.fromServerFormat(s.fieldPath);return new xf(l,a)}(n,r)):[];var r;if(e.update){const r=Jr(n,e.update.name),o=new fn({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new _i((e.updateMask.fieldPaths||[]).map(c=>Rt.fromServerFormat(c)));return new jo(r,o,s,t,i)}return new du(r,o,t,i)}if(e.delete){const r=Jr(n,e.delete);return new hu(r,t)}if(e.verify){const r=Jr(n,e.verify);return new yI(r,t)}return U()}function Iz(n,e){return{documents:[DI(n,e.path)]}}function II(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=DI(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=DI(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(l){if(0!==l.length)return Az(Xe.create(l,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const o=function(l){if(0!==l.length)return l.map(c=>{return{field:Ns((u=c).field),direction:rhe(u.dir)};var u})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const s=(c=e.limit,n.useProto3Json||ff(c)?c:{value:c});var c,a,l;return null!==s&&(t.structuredQuery.limit=s),e.startAt&&(t.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(t.structuredQuery.endAt={before:!(l=e.endAt).inclusive,values:l.position}),t}function Tz(n){let e=Ez(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){q(1===i);const u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let o=[];t.where&&(o=function(u){const d=Mz(u);return d instanceof Xe&&dI(d)?d.getFilters():[d]}(t.where));let s=[];t.orderBy&&(s=t.orderBy.map(u=>{return new su(pu((d=u).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;t.limit&&(a=function(u){let d;return d="object"==typeof u?u.value:u,ff(d)?null:d}(t.limit));let l=null;var u;t.startAt&&(l=new ks((u=t.startAt).values||[],!!u.before));let c=null;return t.endAt&&(c=function(u){return new ks(u.values||[],!u.before)}(t.endAt)),GH(e,r,s,o,a,"F",l,c)}function Mz(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=pu(e.unaryFilter.field);return Ie.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=pu(e.unaryFilter.field);return Ie.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=pu(e.unaryFilter.field);return Ie.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=pu(e.unaryFilter.field);return Ie.create(o,"!=",{nullValue:"NULL_VALUE"});default:return U()}}(n):void 0!==n.fieldFilter?function(e){return Ie.create(pu(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return U()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):void 0!==n.compositeFilter?function(e){return Xe.create(e.compositeFilter.filters.map(t=>Mz(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return U()}}(e.compositeFilter.op))}(n):U()}function rhe(n){return Yde[n]}function ohe(n){return Qde[n]}function she(n){return Xde[n]}function Ns(n){return{fieldPath:n.canonicalString()}}function pu(n){return Rt.fromServerFormat(n.fieldPath)}function Az(n){return n instanceof Ie?function(e){if("=="===e.op){if(kH(e.value))return{unaryFilter:{field:Ns(e.field),op:"IS_NAN"}};if(AH(e.value))return{unaryFilter:{field:Ns(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(kH(e.value))return{unaryFilter:{field:Ns(e.field),op:"IS_NOT_NAN"}};if(AH(e.value))return{unaryFilter:{field:Ns(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ns(e.field),op:ohe(e.op),value:e.value}}}(n):n instanceof Xe?function(e){const t=e.getFilters().map(i=>Az(i));return 1===t.length?t[0]:{compositeFilter:{op:she(e.op),filters:t}}}(n):U()}function ahe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function kz(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Os{constructor(e,t,i,r,o=G.min(),s=G.min(),a=on.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a}withSequenceNumber(e){return new Os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Rz{constructor(e){this.se=e}}function Nz(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:xy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:Tf(r=n.se,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:fu(r,o.version.toTimestamp()),createTime:fu(r,o.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:il(e.version)};else{if(!e.isUnknownDocument())return U();i.unknownDocument={path:t.path.toArray(),version:il(e.version)}}var r,o;return i}function xy(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function il(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rl(n){const e=new vt(n.seconds,n.nanoseconds);return G.fromTimestamp(e)}function ol(n,e){const t=(e.baseMutations||[]).map(o=>SI(n.se,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const i=e.mutations.map(o=>SI(n.se,o)),r=vt.fromMillis(e.localWriteTimeMs);return new vI(e.batchId,r,t,i)}function kf(n){const e=rl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?rl(n.lastLimboFreeSnapshotVersion):G.min();let i;var r;return void 0!==n.query.documents?(q(1===(r=n.query).documents.length),i=ri(lu(Ez(r.documents[0])))):i=ri(Tz(n.query)),new Os(i,n.targetId,0,n.lastListenSequenceNumber,e,t,on.fromBase64String(n.resumeToken))}function Oz(n,e){const t=il(e.snapshotVersion),i=il(e.lastLimboFreeSnapshotVersion);let r;r=py(e.target)?Iz(n.se,e.target):II(n.se,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ja(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function TI(n){const e=Tz({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?_y(e,e.limit,"L"):e}function MI(n,e){return new wI(e.largestBatchId,SI(n.se,e.overlayMutation))}function Pz(n,e){const t=e.path.lastSegment();return[n,ii(e.path.popLast()),t]}function Fz(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:il(i.readTime),documentKey:ii(i.documentKey.path),largestBatchId:i.largestBatchId}}class che{getBundleMetadata(e,t){return Lz(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:rl(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return Lz(e).put({bundleId:(i=t).id,createTime:il(zt(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return Vz(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:TI(r.bundledQuery),readTime:rl(r.readTime)};var r})}saveNamedQuery(e,t){return Vz(e).put({name:(i=t).name,readTime:il(zt(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Lz(n){return hn(n,"bundles")}function Vz(n){return hn(n,"namedQueries")}class Dy{constructor(e,t){this.serializer=e,this.userId=t}static ie(e,t){return new Dy(e,t.uid||"")}getOverlay(e,t){return Rf(e).get(Pz(this.userId,t)).next(i=>i?MI(this.serializer,i):null)}getOverlays(e,t){const i=Zr();return w.forEach(t,r=>this.getOverlay(e,r).next(o=>{null!==o&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((o,s)=>{const a=new wI(t,s);r.push(this.re(e,a))}),w.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(s=>r.add(ii(s.getCollectionPath())));const o=[];return r.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,i+1],!1,!0);o.push(Rf(e).J("collectionPathOverlayIndex",a))}),w.waitFor(o)}getOverlaysForCollection(e,t,i){const r=Zr(),o=ii(t),s=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Rf(e).j("collectionPathOverlayIndex",s).next(a=>{for(const l of a){const c=MI(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const o=Zr();let s;const a=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Rf(e).Z({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const d=MI(this.serializer,c);o.size()<r||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):u.done()}).next(()=>o)}re(e,t){return Rf(e).put(function(i,r,o){const[s,a,l]=Pz(r,o.mutation.key);return{userId:r,collectionPath:a,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Af(i.se,o.mutation)}}(this.serializer,this.userId,t))}}function Rf(n){return hn(n,"documentOverlays")}class sl{constructor(){}oe(e,t){this.ue(e,t),t.ce()}ue(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(Ot(e.integerValue));else if("doubleValue"in e){const i=Ot(e.doubleValue);isNaN(i)?this.ae(t,13):(this.ae(t,15),pf(i)?t.he(0):t.he(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ae(t,20),"string"==typeof i?t.le(i):(t.le(`${i.seconds||""}`),t.he(i.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(Qa(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ae(t,45),t.he(i.latitude||0),t.he(i.longitude||0)}else"mapValue"in e?RH(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):U()}fe(e,t){this.ae(t,25),this.ye(e,t)}ye(e,t){t.le(e)}me(e,t){const i=e.fields||{};this.ae(t,55);for(const r of Object.keys(i))this.fe(r,t),this.ue(i[r],t)}ge(e,t){const i=e.values||[];this.ae(t,50);for(const r of i)this.ue(r,t)}_e(e,t){this.ae(t,37),O.fromName(e).path.forEach(i=>{this.ae(t,60),this.ye(i,t)})}ae(e,t){e.he(t)}de(e){e.he(2)}}function uhe(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Bz(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const o=uhe(255&t[r]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}sl.pe=new sl;class dhe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ie(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Te(i.value),i=t.next();this.Ee()}Ae(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Re(i.value),i=t.next();this.ve()}be(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Te(i);else if(i<2048)this.Te(960|i>>>6),this.Te(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Te(480|i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i);else{const r=t.codePointAt(0);this.Te(240|r>>>18),this.Te(128|63&r>>>12),this.Te(128|63&r>>>6),this.Te(128|63&r)}}this.Ee()}Pe(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Re(i);else if(i<2048)this.Re(960|i>>>6),this.Re(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Re(480|i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i);else{const r=t.codePointAt(0);this.Re(240|r>>>18),this.Re(128|63&r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r)}}this.ve()}Ve(e){const t=this.Se(e),i=Bz(t);this.De(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Ce(e){const t=this.Se(e),i=Bz(t);this.De(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}xe(){this.Ne(255),this.Ne(255)}ke(){this.Oe(255),this.Oe(255)}reset(){this.position=0}seed(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Se(e){const t=function(r){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,r,!1),new Uint8Array(o.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Te(e){const t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}Re(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}Ee(){this.Ne(0),this.Ne(1)}ve(){this.Oe(0),this.Oe(1)}Ne(e){this.De(1),this.buffer[this.position++]=e}Oe(e){this.De(1),this.buffer[this.position++]=~e}De(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class hhe{constructor(e){this.Me=e}we(e){this.Me.Ie(e)}le(e){this.Me.be(e)}he(e){this.Me.Ve(e)}ce(){this.Me.xe()}}class fhe{constructor(e){this.Me=e}we(e){this.Me.Ae(e)}le(e){this.Me.Pe(e)}he(e){this.Me.Ce(e)}ce(){this.Me.ke()}}class Nf{constructor(){this.Me=new dhe,this.Fe=new hhe(this.Me),this.Be=new fhe(this.Me)}seed(e){this.Me.seed(e)}Le(e){return 0===e?this.Fe:this.Be}$e(){return this.Me.$e()}reset(){this.Me.reset()}}class al{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}qe(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new al(this.indexId,this.documentKey,this.arrayValue,i)}}function Ps(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Uz(n.arrayValue,e.arrayValue),0!==t?t:(t=Uz(n.directionalValue,e.directionalValue),0!==t?t:O.comparator(n.documentKey,e.documentKey)))}function Uz(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class phe{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.Ke=[];for(const t of e.filters){const i=t;i.isInequality()?this.Ge=i:this.Ke.push(i)}}Qe(e){q(e.collectionGroup===this.collectionId);const t=nI(e);if(void 0!==t&&!this.ze(t))return!1;const i=Ga(e);let r=0,o=0;for(;r<i.length&&this.ze(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Ge){const s=i[r];if(!this.je(this.Ge,s)||!this.We(this.Ue[o++],s))return!1;++r}for(;r<i.length;++r)if(o>=this.Ue.length||!this.We(this.Ue[o++],i[r]))return!1;return!0}ze(e){for(const t of this.Ke)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function jz(n){var e,t;if(q(n instanceof Ie||n instanceof Xe),n instanceof Ie){if(n instanceof $H){const r=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>Ie.create(n.field,"==",o)))||[];return Xe.create(r,"or")}return n}const i=n.filters.map(r=>jz(r));return Xe.create(i,n.op)}function mhe(n){if(0===n.getFilters().length)return[];const e=RI(jz(n));return q(Hz(e)),AI(e)||kI(e)?[e]:e.getFilters()}function AI(n){return n instanceof Ie}function kI(n){return n instanceof Xe&&dI(n)}function Hz(n){return AI(n)||kI(n)||function(e){if(e instanceof Xe&&uI(e)){for(const t of e.getFilters())if(!AI(t)&&!kI(t))return!1;return!0}return!1}(n)}function RI(n){if(q(n instanceof Ie||n instanceof Xe),n instanceof Ie)return n;if(1===n.filters.length)return RI(n.filters[0]);const e=n.filters.map(i=>RI(i));let t=Xe.create(e,n.op);return t=Sy(t),Hz(t)?t:(q(t instanceof Xe),q(au(t)),q(t.filters.length>1),t.filters.reduce((i,r)=>NI(i,r)))}function NI(n,e){let t;return q(n instanceof Ie||n instanceof Xe),q(e instanceof Ie||e instanceof Xe),t=n instanceof Ie?e instanceof Ie?Xe.create([n,e],"and"):zz(n,e):e instanceof Ie?zz(e,n):function(i,r){if(q(i.filters.length>0&&r.filters.length>0),au(i)&&au(r))return jH(i,r.getFilters());const o=uI(i)?i:r,s=uI(i)?r:i,a=o.filters.map(l=>NI(l,s));return Xe.create(a,"or")}(n,e),Sy(t)}function zz(n,e){if(au(e))return jH(e,n.getFilters());{const t=e.filters.map(i=>NI(n,i));return Xe.create(t,"or")}}function Sy(n){if(q(n instanceof Ie||n instanceof Xe),n instanceof Ie)return n;const e=n.getFilters();if(1===e.length)return Sy(e[0]);if(BH(n))return n;const t=e.map(r=>Sy(r)),i=[];return t.forEach(r=>{r instanceof Ie?i.push(r):r instanceof Xe&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:Xe.create(i,n.op)}class ghe{constructor(){this.He=new OI}addToCollectionParentIndex(e,t){return this.He.add(t),w.resolve()}getCollectionParents(e,t){return w.resolve(this.He.getEntries(t))}addFieldIndex(e,t){return w.resolve()}deleteFieldIndex(e,t){return w.resolve()}getDocumentsMatchingTarget(e,t){return w.resolve(null)}getIndexType(e,t){return w.resolve(0)}getFieldIndexes(e,t){return w.resolve([])}getNextCollectionGroupToUpdate(e){return w.resolve(null)}getMinOffset(e,t){return w.resolve(Pi.min())}getMinOffsetFromCollectionGroup(e,t){return w.resolve(Pi.min())}updateCollectionGroup(e,t,i){return w.resolve()}updateIndexEntries(e,t){return w.resolve()}}class OI{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new tt(Ne.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new tt(Ne.comparator)).toArray()}}const Iy=new Uint8Array(0);class _he{constructor(e,t){this.user=e,this.databaseId=t,this.Je=new OI,this.Ye=new Rs(i=>Ja(i),(i,r)=>vf(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Je.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Je.add(t)});const o={collectionId:i,parent:ii(r)};return $z(e).put(o)}return w.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[hH(t),""],!1,!0);return $z(e).j(r).next(o=>{for(const s of o){if(s.collectionId!==t)break;i.push(Qr(s.parent))}return i})}addFieldIndex(e,t){const i=Ty(e),r={indexId:(s=t).indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])};var s;delete r.indexId;const o=i.add(r);if(t.indexState){const s=Pf(e);return o.next(a=>{s.put(Fz(a,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const i=Ty(e),r=Pf(e),o=Of(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=Of(e);let r=!0;const o=new Map;return w.forEach(this.Ze(t),s=>this.Xe(e,s).next(a=>{r&&(r=!!a),o.set(s,a)})).next(()=>{if(r){let s=me();const a=[];return w.forEach(o,(l,c)=>{var u;T("IndexedDbIndexManager",`Using index ${u=l,`id=${u.indexId}|cg=${u.collectionGroup}|f=${u.fields.map(b=>`${b.fieldPath}:${b.kind}`).join(",")}`} to execute ${Ja(t)}`);const d=function(b,N){const W=nI(N);if(void 0===W)return null;for(const H of my(b,W.fieldPath))switch(H.op){case"array-contains-any":return H.value.arrayValue.values||[];case"array-contains":return[H.value]}return null}(c,l),h=function(b,N){const W=new Map;for(const H of Ga(N))for(const Le of my(b,H.fieldPath))switch(Le.op){case"==":case"in":W.set(H.fieldPath.canonicalString(),Le.value);break;case"not-in":case"!=":return W.set(H.fieldPath.canonicalString(),Le.value),Array.from(W.values())}return null}(c,l),f=function(b,N){const W=[];let H=!0;for(const Le of Ga(N)){const Xt=0===Le.kind?qH(b,Le.fieldPath,b.startAt):WH(b,Le.fieldPath,b.startAt);W.push(Xt.value),H&&(H=Xt.inclusive)}return new ks(W,H)}(c,l),p=function(b,N){const W=[];let H=!0;for(const Le of Ga(N)){const Xt=0===Le.kind?WH(b,Le.fieldPath,b.endAt):qH(b,Le.fieldPath,b.endAt);W.push(Xt.value),H&&(H=Xt.inclusive)}return new ks(W,H)}(c,l),g=this.tn(l,c,f),_=this.tn(l,c,p),v=this.en(l,c,h),E=this.nn(l.indexId,d,g,f.inclusive,_,p.inclusive,v);return w.forEach(E,b=>i.H(b,t.limit).next(N=>{N.forEach(W=>{const H=O.fromSegments(W.documentKey);s.has(H)||(s=s.add(H),a.push(H))})}))}).next(()=>a)}return w.resolve(null)})}Ze(e){let t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:mhe(Xe.create(e.filters,"and")).map(i=>fI(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.Ye.set(e,t),t)}nn(e,t,i,r,o,s,a){const l=(null!=t?t.length:1)*Math.max(i.length,o.length),c=l/(null!=t?t.length:1),u=[];for(let d=0;d<l;++d){const h=t?this.sn(t[d/c]):Iy,f=this.rn(e,h,i[d%c],r),p=this.on(e,h,o[d%c],s),g=a.map(_=>this.rn(e,h,_,!0));u.push(...this.createRange(f,p,g))}return u}rn(e,t,i,r){const o=new al(e,O.empty(),t,i);return r?o:o.qe()}on(e,t,i,r){const o=new al(e,O.empty(),t,i);return r?o.qe():o}Xe(e,t){const i=new phe(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let s=null;for(const a of o)i.Qe(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let i=2;const r=this.Ze(t);return w.forEach(r,o=>this.Xe(e,o).next(s=>{s?0!==i&&s.fields.length<function(a){let l=new tt(Rt.comparator),c=!1;for(const u of a.filters)for(const d of u.getFlattenedFilters())d.field.isKeyField()||("array-contains"===d.op||"array-contains-any"===d.op?c=!0:l=l.add(d.field));for(const u of a.orderBy)u.field.isKeyField()||(l=l.add(u.field));return l.size+(c?1:0)}(o)&&(i=1):i=0})).next(()=>null!==t.limit&&r.length>1&&2===i?1:i)}un(e,t){const i=new Nf;for(const r of Ga(e)){const o=t.data.field(r.fieldPath);if(null==o)return null;const s=i.Le(r.kind);sl.pe.oe(o,s)}return i.$e()}sn(e){const t=new Nf;return sl.pe.oe(e,t.Le(0)),t.$e()}cn(e,t){const i=new Nf;return sl.pe.oe(Za(this.databaseId,t),i.Le(function(r){const o=Ga(r);return 0===o.length?0:o[o.length-1].kind}(e))),i.$e()}en(e,t,i){if(null===i)return[];let r=[];r.push(new Nf);let o=0;for(const s of Ga(e)){const a=i[o++];for(const l of r)if(this.an(t,s.fieldPath)&&_f(a))r=this.hn(r,s,a);else{const c=l.Le(s.kind);sl.pe.oe(a,c)}}return this.ln(r)}tn(e,t,i){return this.en(e,t,i.position)}ln(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].$e();return t}hn(e,t,i){const r=[...e],o=[];for(const s of i.arrayValue.values||[])for(const a of r){const l=new Nf;l.seed(a.$e()),sl.pe.oe(s,l.Le(t.kind)),o.push(l)}return o}an(e,t){return!!e.filters.find(i=>i instanceof Ie&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=Ty(e),r=Pf(e);return(t?i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.j()).next(o=>{const s=[];return w.forEach(o,a=>r.get([a.indexId,this.uid]).next(l=>{s.push(function(c,u){const d=u?new df(u.sequenceNumber,new Pi(rl(u.readTime),new O(Qr(u.documentKey)),u.largestBatchId)):df.empty(),h=c.fields.map(([f,p])=>new ly(Rt.fromServerFormat(f),p));return new ay(c.indexId,c.collectionGroup,h,d)}(a,l))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==o?o:ae(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=Ty(e),o=Pf(e);return this.fn(e).next(s=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>w.forEach(a,l=>o.put(Fz(l.indexId,this.user,s,i)))))}updateIndexEntries(e,t){const i=new Map;return w.forEach(t,(r,o)=>{const s=i.get(r.collectionGroup);return(s?w.resolve(s):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),w.forEach(a,l=>this.dn(e,r,l).next(c=>{const u=this.wn(o,l);return c.isEqual(u)?w.resolve():this._n(e,o,l,c,u)}))))})}mn(e,t,i,r){return Of(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.cn(i,t.key),documentKey:t.key.path.toArray()})}gn(e,t,i,r){return Of(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.cn(i,t.key),t.key.path.toArray()])}dn(e,t,i){const r=Of(e);let o=new tt(Ps);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.cn(i,t)])},(s,a)=>{o=o.add(new al(i.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}wn(e,t){let i=new tt(Ps);const r=this.un(t,e);if(null==r)return i;const o=nI(t);if(null!=o){const s=e.data.field(o.fieldPath);if(_f(s))for(const a of s.arrayValue.values||[])i=i.add(new al(t.indexId,e.key,this.sn(a),r))}else i=i.add(new al(t.indexId,e.key,Iy,r));return i}_n(e,t,i,r,o){T("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(a,l,c,u,d){const h=a.getIterator(),f=l.getIterator();let p=ru(h),g=ru(f);for(;p||g;){let _=!1,v=!1;if(p&&g){const E=c(p,g);E<0?v=!0:E>0&&(_=!0)}else null!=p?v=!0:_=!0;_?(u(g),g=ru(f)):v?(d(p),p=ru(h)):(p=ru(h),g=ru(f))}}(r,o,Ps,a=>{s.push(this.mn(e,t,i,a))},a=>{s.push(this.gn(e,t,i,a))}),w.waitFor(s)}fn(e){let t=1;return Pf(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((s,a)=>Ps(s,a)).filter((s,a,l)=>!a||0!==Ps(s,l[a-1]));const r=[];r.push(e);for(const s of i){const a=Ps(s,e),l=Ps(s,t);if(0===a)r[0]=e.qe();else if(a>0&&l<0)r.push(s),r.push(s.qe());else if(l>0)break}r.push(t);const o=[];for(let s=0;s<r.length;s+=2){if(this.yn(r[s],r[s+1]))return[];o.push(IDBKeyRange.bound([r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Iy,[]],[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Iy,[]]))}return o}yn(e,t){return Ps(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(qz)}getMinOffset(e,t){return w.mapArray(this.Ze(t),i=>this.Xe(e,i).next(r=>r||U())).next(qz)}}function $z(n){return hn(n,"collectionParents")}function Of(n){return hn(n,"indexEntries")}function Ty(n){return hn(n,"indexConfiguration")}function Pf(n){return hn(n,"indexState")}function qz(n){q(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;iI(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Pi(e.readTime,e.documentKey,t)}const Wz={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class vi{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new vi(e,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Gz(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId);let a=0;const l=i.Z({range:s},(u,d,h)=>(a++,h.delete()));o.push(l.next(()=>{q(1===a)}));const c=[];for(const u of t.mutations){const d=wH(e,u.key.path,t.batchId);o.push(r.delete(d)),c.push(u.key)}return w.waitFor(o).next(()=>c)}function My(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw U();e=n.noDocument}return JSON.stringify(e).length}vi.DEFAULT_COLLECTION_PERCENTILE=10,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vi.DEFAULT=new vi(41943040,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vi.DISABLED=new vi(-1,0,0);class Ay{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.pn={}}static ie(e,t,i,r){q(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new Ay(o,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fs(e).Z({index:"userMutationsIndex",range:i},(r,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const o=mu(e),s=Fs(e);return s.add({}).next(a=>{q("number"==typeof a);const l=new vI(a,t,i,r),c=function(h,f,p){const g=p.baseMutations.map(v=>Af(h.se,v)),_=p.mutations.map(v=>Af(h.se,v));return{userId:f,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:g,mutations:_}}(this.serializer,this.userId,l),u=[];let d=new tt((h,f)=>ae(h.canonicalString(),f.canonicalString()));for(const h of r){const f=wH(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(s.put(c)),u.push(o.put(f,ide))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.pn[a]=l.keys()}),w.waitFor(u).next(()=>l)})}lookupMutationBatch(e,t){return Fs(e).get(t).next(i=>i?(q(i.userId===this.userId),ol(this.serializer,i)):null)}In(e,t){return this.pn[t]?w.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.pn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return Fs(e).Z({index:"userMutationsIndex",range:r},(s,a,l)=>{a.userId===this.userId&&(q(a.batchId>=i),o=ol(this.serializer,a)),l.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Fs(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(r,o,s)=>{i=o.batchId,s.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fs(e).j("userMutationsIndex",t).next(i=>i.map(r=>ol(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=uy(this.userId,t.path),r=IDBKeyRange.lowerBound(i),o=[];return mu(e).Z({range:r},(s,a,l)=>{const[c,u,d]=s,h=Qr(u);if(c===this.userId&&t.path.isEqual(h))return Fs(e).get(d).next(f=>{if(!f)throw U();q(f.userId===this.userId),o.push(ol(this.serializer,f))});l.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new tt(ae);const r=[];return t.forEach(o=>{const s=uy(this.userId,o.path),a=IDBKeyRange.lowerBound(s),l=mu(e).Z({range:a},(c,u,d)=>{const[h,f,p]=c,g=Qr(f);h===this.userId&&o.path.isEqual(g)?i=i.add(p):d.done()});r.push(l)}),w.waitFor(r).next(()=>this.Tn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,o=uy(this.userId,i),s=IDBKeyRange.lowerBound(o);let a=new tt(ae);return mu(e).Z({range:s},(l,c,u)=>{const[d,h,f]=l,p=Qr(h);d===this.userId&&i.isPrefixOf(p)?p.length===r&&(a=a.add(f)):u.done()}).next(()=>this.Tn(e,a))}Tn(e,t){const i=[],r=[];return t.forEach(o=>{r.push(Fs(e).get(o).next(s=>{if(null===s)throw U();q(s.userId===this.userId),i.push(ol(this.serializer,s))}))}),w.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return Gz(e.at,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.En(t.batchId)}),w.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}En(e){delete this.pn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return w.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return mu(e).Z({range:i},(o,s,a)=>{if(o[0]===this.userId){const l=Qr(o[1]);r.push(l)}else a.done()}).next(()=>{q(0===r.length)})})}containsKey(e,t){return Kz(e,this.userId,t)}An(e){return Yz(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Kz(n,e,t){const i=uy(e,t.path),r=i[1],o=IDBKeyRange.lowerBound(i);let s=!1;return mu(n).Z({range:o,Y:!0},(a,l,c)=>{const[u,d,h]=a;u===e&&d===r&&(s=!0),c.done()}).next(()=>s)}function Fs(n){return hn(n,"mutations")}function mu(n){return hn(n,"documentMutations")}function Yz(n){return hn(n,"mutationQueues")}class ll{constructor(e){this.Rn=e}next(){return this.Rn+=2,this.Rn}static vn(){return new ll(0)}static bn(){return new ll(-1)}}class yhe{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Pn(e).next(t=>{const i=new ll(t.highestTargetId);return t.highestTargetId=i.next(),this.Vn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Pn(e).next(t=>G.fromTimestamp(new vt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Pn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Vn(e,r)))}addTargetData(e,t){return this.Sn(e,t).next(()=>this.Pn(e).next(i=>(i.targetCount+=1,this.Dn(t,i),this.Vn(e,i))))}updateTargetData(e,t){return this.Sn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>gu(e).delete(t.targetId)).next(()=>this.Pn(e)).next(i=>(q(i.targetCount>0),i.targetCount-=1,this.Vn(e,i)))}removeTargets(e,t,i){let r=0;const o=[];return gu(e).Z((s,a)=>{const l=kf(a);l.sequenceNumber<=t&&null===i.get(l.targetId)&&(r++,o.push(this.removeTargetData(e,l)))}).next(()=>w.waitFor(o)).next(()=>r)}forEachTarget(e,t){return gu(e).Z((i,r)=>{const o=kf(r);t(o)})}Pn(e){return Qz(e).get("targetGlobalKey").next(t=>(q(null!==t),t))}Vn(e,t){return Qz(e).put("targetGlobalKey",t)}Sn(e,t){return gu(e).put(Oz(this.serializer,t))}Dn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Pn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Ja(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return gu(e).Z({range:r,index:"queryTargetsIndex"},(s,a,l)=>{const c=kf(a);vf(t,c.target)&&(o=c,l.done())}).next(()=>o)}addMatchingKeys(e,t,i){const r=[],o=Ls(e);return t.forEach(s=>{const a=ii(s.path);r.push(o.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,s))}),w.waitFor(r)}removeMatchingKeys(e,t,i){const r=Ls(e);return w.forEach(t,o=>{const s=ii(o.path);return w.waitFor([r.delete([i,s]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,t){const i=Ls(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=Ls(e);let o=me();return r.Z({range:i,Y:!0},(s,a,l)=>{const c=Qr(s[1]),u=new O(c);o=o.add(u)}).next(()=>o)}containsKey(e,t){const i=ii(t.path),r=IDBKeyRange.bound([i],[hH(i)],!1,!0);let o=0;return Ls(e).Z({index:"documentTargetsIndex",Y:!0,range:r},([s,a],l,c)=>{0!==s&&(o++,c.done())}).next(()=>o>0)}ne(e,t){return gu(e).get(t).next(i=>i?kf(i):null)}}function gu(n){return hn(n,"targets")}function Qz(n){return hn(n,"targetGlobal")}function Ls(n){return hn(n,"targetDocuments")}function Xz([n,e],[t,i]){const r=ae(n,t);return 0===r?ae(e,i):r}class vhe{constructor(e){this.Cn=e,this.buffer=new tt(Xz),this.xn=0}Nn(){return++this.xn}kn(e){const t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Xz(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class bhe{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}$n(e){var t=this;T("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,m(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Ss(i)?T("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Ds(i)}yield t.$n(3e5)}))}}class whe{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.Fn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return w.resolve(Fi.ct);const i=new vhe(t);return this.Mn.forEachTarget(e,r=>i.kn(r.sequenceNumber)).next(()=>this.Mn.Bn(e,r=>i.kn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Mn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector","Garbage collection skipped; disabled"),w.resolve(Wz)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wz):this.Ln(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}Ln(e,t){let i,r,o,s,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(T("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,s=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,t))).next(d=>(o=d,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(c=Date.now(),eI()<=ke.DEBUG&&T("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(l-a)+`ms\n\tRemoved ${d} documents in `+(c-l)+`ms\nTotal Duration: ${c-u}ms`),w.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:d})))}}class Che{constructor(e,t){this.db=e,this.garbageCollector=new whe(this,t)}Fn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}qn(e){let t=0;return this.Bn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Bn(e,t){return this.Un(e,(i,r)=>t(r))}addReference(e,t,i){return ky(e,i)}removeReference(e,t,i){return ky(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return ky(e,t)}Kn(e,t){return function(i,r){let o=!1;return Yz(i).X(s=>Kz(i,s,r).next(a=>(a&&(o=!0),w.resolve(!a)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let o=0;return this.Un(e,(s,a)=>{if(a<=t){const l=this.Kn(e,s).next(c=>{if(!c)return o++,i.getEntry(e,s).next(()=>(i.removeEntry(s,G.min()),Ls(e).delete([0,ii(s.path)])))});r.push(l)}}).next(()=>w.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return ky(e,t)}Un(e,t){const i=Ls(e);let r,o=Fi.ct;return i.Z({index:"documentTargetsIndex"},([s,a],{path:l,sequenceNumber:c})=>{0===s?(o!==Fi.ct&&t(new O(Qr(r)),o),o=c,r=l):o=Fi.ct}).next(()=>{o!==Fi.ct&&t(new O(Qr(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ky(n,e){return Ls(n).put((i=n.currentSequenceNumber,{targetId:0,path:ii(e.path),sequenceNumber:i}));var i}class Zz{constructor(){this.changes=new Rs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?w.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ehe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return cl(e).put(i)}removeEntry(e,t,i){return cl(e).delete(function(r,o){const s=r.path.toArray();return[s.slice(0,s.length-2),s[s.length-2],xy(o),s[s.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Gn(e,i)))}getEntry(e,t){let i=pt.newInvalidDocument(t);return cl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ff(t))},(r,o)=>{i=this.Qn(t,o)}).next(()=>i)}zn(e,t){let i={size:0,document:pt.newInvalidDocument(t)};return cl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ff(t))},(r,o)=>{i={document:this.Qn(t,o),size:My(o)}}).next(()=>i)}getEntries(e,t){let i=yi();return this.jn(e,t,(r,o)=>{const s=this.Qn(r,o);i=i.insert(r,s)}).next(()=>i)}Wn(e,t){let i=yi(),r=new Nt(O.comparator);return this.jn(e,t,(o,s)=>{const a=this.Qn(o,s);i=i.insert(o,a),r=r.insert(o,My(s))}).next(()=>({documents:i,Hn:r}))}jn(e,t,i){if(t.isEmpty())return w.resolve();let r=new tt(n$);t.forEach(l=>r=r.add(l));const o=IDBKeyRange.bound(Ff(r.first()),Ff(r.last())),s=r.getIterator();let a=s.getNext();return cl(e).Z({index:"documentKeyIndex",range:o},(l,c,u)=>{const d=O.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&n$(a,d)<0;)i(a,null),a=s.getNext();a&&a.isEqual(d)&&(i(a,c),a=s.hasNext()?s.getNext():null),a?u.G(Ff(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,i,r){const o=t.path,s=[o.popLast().toArray(),o.lastSegment(),xy(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],a=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cl(e).j(IDBKeyRange.bound(s,a,!0)).next(l=>{let c=yi();for(const u of l){const d=this.Qn(O.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);d.isFoundDocument()&&(wf(t,d)||r.has(d.key))&&(c=c.insert(d.key,d))}return c})}getAllFromCollectionGroup(e,t,i,r){let o=yi();const s=t$(t,i),a=t$(t,Pi.max());return cl(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(l,c,u)=>{const d=this.Qn(O.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);o=o.insert(d.key,d),o.size===r&&u.done()}).next(()=>o)}newChangeBuffer(e){return new xhe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return e$(e).get("remoteDocumentGlobalKey").next(t=>(q(!!t),t))}Gn(e,t){return e$(e).put("remoteDocumentGlobalKey",t)}Qn(e,t){if(t){const i=function lhe(n,e){let t;if(e.document)t=Sz(n.se,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=O.fromSegments(e.noDocument.path),r=rl(e.noDocument.readTime);t=pt.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return U();{const i=O.fromSegments(e.unknownDocument.path),r=rl(e.unknownDocument.version);t=pt.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new vt(i[0],i[1]);return G.fromTimestamp(r)}(e.readTime)),t}(this.serializer,t);if(!i.isNoDocument()||!i.version.isEqual(G.min()))return i}return pt.newInvalidDocument(e)}}function Jz(n){return new Ehe(n)}class xhe extends Zz{constructor(e,t){super(),this.Jn=e,this.trackRemovals=t,this.Yn=new Rs(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new tt((o,s)=>ae(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.Yn.get(o);if(t.push(this.Jn.removeEntry(e,o,a.readTime)),s.isValidDocument()){const l=Nz(this.Jn.serializer,s);r=r.add(o.path.popLast());const c=My(l);i+=c-a.size,t.push(this.Jn.addEntry(e,o,l))}else if(i-=a.size,this.trackRemovals){const l=Nz(this.Jn.serializer,s.convertToNoDocument(G.min()));t.push(this.Jn.addEntry(e,o,l))}}),r.forEach(o=>{t.push(this.Jn.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Jn.updateMetadata(e,i)),w.waitFor(t)}getFromCache(e,t){return this.Jn.zn(e,t).next(i=>(this.Yn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Jn.Wn(e,t).next(({documents:i,Hn:r})=>(r.forEach((o,s)=>{this.Yn.set(o,{size:s,readTime:i.get(o).readTime})}),i))}}function e$(n){return hn(n,"remoteDocumentGlobal")}function cl(n){return hn(n,"remoteDocumentsV14")}function Ff(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function t$(n,e){const t=e.documentKey.path.toArray();return[n,xy(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function n$(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let o=0;o<t.length-2&&o<i.length-2;++o)if(r=ae(t[o],i[o]),r)return r;return r=ae(t.length,i.length),r||(r=ae(t[t.length-2],i[i.length-2]),r||ae(t[t.length-1],i[i.length-1]))}class Dhe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class i${constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(null!==i&&Df(i.mutation,r,_i.empty(),vt.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,me()).next(()=>i))}getLocalViewOfDocuments(e,t,i=me()){const r=Zr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(o=>{let s=Cf();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const i=Zr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,me()))}populateOverlays(e,t,i){const r=[];return i.forEach(o=>{t.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,i,r){let o=yi();const s=Ef(),a=Ef();return t.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(void 0===u||u.mutation instanceof jo)?o=o.insert(c.key,c):void 0!==u?(s.set(c.key,u.mutation.getFieldMask()),Df(u.mutation,c,u.mutation.getFieldMask(),vt.now())):s.set(c.key,_i.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,u)=>s.set(c,u)),t.forEach((c,u)=>{var d;return a.set(c,new Dhe(u,null!==(d=s.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,t){const i=Ef();let r=new Nt((s,a)=>s-a),o=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let u=i.get(l)||_i.empty();u=a.applyToLocalView(c,u),i.set(l,u);const d=(r.get(a.batchId)||me()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=ez();u.forEach(h=>{if(!o.has(h)){const f=cz(t.get(h),i.get(h));null!==f&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,d))}return w.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return O.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):mI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var r}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(o=>{const s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):w.resolve(Zr());let a=-1,l=o;return s.next(c=>w.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(u)?w.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,me())).next(u=>({batchId:a,changes:JH(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new O(t)).next(i=>{let r=Cf();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let o=Cf();return this.indexManager.getCollectionParents(e,r).next(s=>w.forEach(s,a=>{const l=(c=t,u=a.child(r),new Uo(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,u;return this.getDocumentsMatchingCollectionQuery(e,l,i).next(c=>{c.forEach((u,d)=>{o=o.insert(u,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,r))).next(o=>{r.forEach((a,l)=>{const c=l.getKey();null===o.get(c)&&(o=o.insert(c,pt.newInvalidDocument(c)))});let s=Cf();return o.forEach((a,l)=>{const c=r.get(a);void 0!==c&&Df(c.mutation,l,_i.empty(),vt.now()),wf(t,l)&&(s=s.insert(a,l))}),s})}}class She{constructor(e){this.serializer=e,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return w.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var i;return this.Zn.set(t.id,{id:(i=t).id,version:i.version,createTime:zt(i.createTime)}),w.resolve()}getNamedQuery(e,t){return w.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(i=t).name,query:TI(i.bundledQuery),readTime:zt(i.readTime)}),w.resolve();var i}}class Ihe{constructor(){this.overlays=new Nt(O.comparator),this.ts=new Map}getOverlay(e,t){return w.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Zr();return w.forEach(t,r=>this.getOverlay(e,r).next(o=>{null!==o&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,o)=>{this.re(e,t,o)}),w.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.ts.get(i);return void 0!==r&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.ts.delete(i)),w.resolve()}getOverlaysForCollection(e,t,i){const r=Zr(),o=t.length+1,s=new O(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>i&&r.set(l.getKey(),l)}return w.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new Nt((c,u)=>c-u);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let u=o.get(c.largestBatchId);null===u&&(u=Zr(),o=o.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Zr(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return w.resolve(a)}re(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const s=this.ts.get(r.largestBatchId).delete(i.key);this.ts.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new wI(t,i));let o=this.ts.get(t);void 0===o&&(o=me(),this.ts.set(t,o)),this.ts.set(t,o.add(i.key))}}class PI{constructor(){this.es=new tt(pn.ns),this.ss=new tt(pn.rs)}isEmpty(){return this.es.isEmpty()}addReference(e,t){const i=new pn(e,t);this.es=this.es.add(i),this.ss=this.ss.add(i)}os(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.us(new pn(e,t))}cs(e,t){e.forEach(i=>this.removeReference(i,t))}hs(e){const t=new O(new Ne([])),i=new pn(t,e),r=new pn(t,e+1),o=[];return this.ss.forEachInRange([i,r],s=>{this.us(s),o.push(s.key)}),o}ls(){this.es.forEach(e=>this.us(e))}us(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}fs(e){const t=new O(new Ne([])),i=new pn(t,e),r=new pn(t,e+1);let o=me();return this.ss.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(e){const t=new pn(e,0),i=this.es.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class pn{constructor(e,t){this.key=e,this.ds=t}static ns(e,t){return O.comparator(e.key,t.key)||ae(e.ds,t.ds)}static rs(e,t){return ae(e.ds,t.ds)||O.comparator(e.key,t.key)}}class The{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this._s=new tt(pn.ns)}checkEmpty(e){return w.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const o=this.ws;this.ws++;const s=new vI(o,t,i,r);this.mutationQueue.push(s);for(const a of r)this._s=this._s.add(new pn(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return w.resolve(s)}lookupMutationBatch(e,t){return w.resolve(this.gs(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.ys(t+1),o=r<0?0:r;return w.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return w.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return w.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new pn(t,0),r=new pn(t,Number.POSITIVE_INFINITY),o=[];return this._s.forEachInRange([i,r],s=>{const a=this.gs(s.ds);o.push(a)}),w.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new tt(ae);return t.forEach(r=>{const o=new pn(r,0),s=new pn(r,Number.POSITIVE_INFINITY);this._s.forEachInRange([o,s],a=>{i=i.add(a.ds)})}),w.resolve(this.ps(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let o=i;O.isDocumentKey(o)||(o=o.child(""));const s=new pn(new O(o),0);let a=new tt(ae);return this._s.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.ds)),!0)},s),w.resolve(this.ps(a))}ps(e){const t=[];return e.forEach(i=>{const r=this.gs(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){q(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();let i=this._s;return w.forEach(t.mutations,r=>{const o=new pn(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this._s=i})}En(e){}containsKey(e,t){const i=new pn(t,0),r=this._s.firstAfterOrEqual(i);return w.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return w.resolve()}Is(e,t){return this.ys(e)}ys(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}gs(e){const t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Mhe{constructor(e){this.Ts=e,this.docs=new Nt(O.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),o=r?r.size:0,s=this.Ts(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return w.resolve(i?i.document.mutableCopy():pt.newInvalidDocument(t))}getEntries(e,t){let i=yi();return t.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():pt.newInvalidDocument(r))}),w.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=yi();const s=t.path,a=new O(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||iI(pH(u),i)<=0||(r.has(u.key)||wf(t,u))&&(o=o.insert(u.key,u.mutableCopy()))}return w.resolve(o)}getAllFromCollectionGroup(e,t,i,r){U()}Es(e,t){return w.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Ahe(this)}getSize(e){return w.resolve(this.size)}}class Ahe extends Zz{constructor(e){super(),this.Jn=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Jn.addEntry(e,r)):this.Jn.removeEntry(i)}),w.waitFor(t)}getFromCache(e,t){return this.Jn.getEntry(e,t)}getAllFromCache(e,t){return this.Jn.getEntries(e,t)}}class khe{constructor(e){this.persistence=e,this.As=new Rs(t=>Ja(t),vf),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.Rs=0,this.vs=new PI,this.targetCount=0,this.bs=ll.vn()}forEachTarget(e,t){return this.As.forEach((i,r)=>t(r)),w.resolve()}getLastRemoteSnapshotVersion(e){return w.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return w.resolve(this.Rs)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),w.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Rs&&(this.Rs=t),w.resolve()}Sn(e){this.As.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new ll(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}addTargetData(e,t){return this.Sn(t),this.targetCount+=1,w.resolve()}updateTargetData(e,t){return this.Sn(t),w.resolve()}removeTargetData(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,w.resolve()}removeTargets(e,t,i){let r=0;const o=[];return this.As.forEach((s,a)=>{a.sequenceNumber<=t&&null===i.get(a.targetId)&&(this.As.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),w.waitFor(o).next(()=>r)}getTargetCount(e){return w.resolve(this.targetCount)}getTargetData(e,t){const i=this.As.get(t)||null;return w.resolve(i)}addMatchingKeys(e,t,i){return this.vs.os(t,i),w.resolve()}removeMatchingKeys(e,t,i){this.vs.cs(t,i);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(s=>{o.push(r.markPotentiallyOrphaned(e,s))}),w.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.vs.hs(t),w.resolve()}getMatchingKeysForTargetId(e,t){const i=this.vs.fs(t);return w.resolve(i)}containsKey(e,t){return w.resolve(this.vs.containsKey(t))}}class r${constructor(e,t){this.Ps={},this.overlays={},this.Vs=new Fi(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=e(this),this.Ds=new khe(this),this.indexManager=new ghe,this.remoteDocumentCache=new Mhe(i=>this.referenceDelegate.Cs(i)),this.serializer=new Rz(t),this.xs=new She(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ihe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Ps[e.toKey()];return i||(i=new The(t,this.referenceDelegate),this.Ps[e.toKey()]=i),i}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(e,t,i){T("MemoryPersistence","Starting transaction:",e);const r=new Rhe(this.Vs.next());return this.referenceDelegate.Ns(),i(r).next(o=>this.referenceDelegate.ks(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Os(e,t){return w.or(Object.values(this.Ps).map(i=>()=>i.containsKey(e,t)))}}class Rhe extends gH{constructor(e){super(),this.currentSequenceNumber=e}}class Ry{constructor(e){this.persistence=e,this.$s=new PI,this.Ms=null}static Fs(e){return new Ry(e)}get Bs(){if(this.Ms)return this.Ms;throw U()}addReference(e,t,i){return this.$s.addReference(i,t),this.Bs.delete(i.toString()),w.resolve()}removeReference(e,t,i){return this.$s.removeReference(i,t),this.Bs.add(i.toString()),w.resolve()}markPotentiallyOrphaned(e,t){return this.Bs.add(t.toString()),w.resolve()}removeTarget(e,t){this.$s.hs(t.targetId).forEach(r=>this.Bs.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(o=>this.Bs.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}Ns(){this.Ms=new Set}ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return w.forEach(this.Bs,i=>{const r=O.fromPath(i);return this.Ls(e,r).next(o=>{o||t.removeEntry(r,G.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ls(e,t).next(i=>{i?this.Bs.delete(t.toString()):this.Bs.add(t.toString())})}Cs(e){return 0}Ls(e,t){return w.or([()=>w.resolve(this.$s.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class Nhe{constructor(e){this.serializer=e}M(e,t,i,r){const o=new cy("createOrUpgrade",t);var a;i<1&&r>=1&&(e.createObjectStore("owner"),(a=e).createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bH,{unique:!0}),a.createObjectStore("documentMutations"),o$(e),function(a){a.createObjectStore("remoteDocuments")}(e));let s=w.resolve();return i<3&&r>=3&&(0!==i&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),o$(e)),s=s.next(()=>function(a){const l=a.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:G.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",c)}(o))),i<4&&r>=4&&(0!==i&&(s=s.next(()=>function(a,l){return l.store("mutations").j().next(c=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bH,{unique:!0});const u=l.store("mutations"),d=c.map(h=>u.put(h));return w.waitFor(d)})}(e,o))),s=s.next(()=>{!function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(s=s.next(()=>this.qs(o))),i<6&&r>=6&&(s=s.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Us(o)))),i<7&&r>=7&&(s=s.next(()=>this.Ks(o))),i<8&&r>=8&&(s=s.next(()=>this.Gs(e,o))),i<9&&r>=9&&(s=s.next(()=>{!function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(s=s.next(()=>this.Qs(o))),i<11&&r>=11&&(s=s.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(s=s.next(()=>{!function(a){const l=a.createObjectStore("documentOverlays",{keyPath:mde});l.createIndex("collectionPathOverlayIndex",gde,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",_de,{unique:!1})}(e)})),i<13&&r>=13&&(s=s.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:rde});l.createIndex("documentKeyIndex",ode),l.createIndex("collectionGroupIndex",sde)}(e)).next(()=>this.zs(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(s=s.next(()=>this.js(e,o))),i<15&&r>=15&&(s=s.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:dde}).createIndex("sequenceNumberIndex",hde,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:fde}).createIndex("documentKeyIndex",pde,{unique:!1})}(e))),s}Us(e){let t=0;return e.store("remoteDocuments").Z((i,r)=>{t+=My(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.j().next(r=>w.forEach(r,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",s).next(a=>w.forEach(a,l=>{q(l.userId===o.userId);const c=ol(this.serializer,l);return Gz(e,o.userId,c).next(()=>{})}))}))}Ks(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const o=[];return i.Z((s,a)=>{const l=new Ne(s),c=[0,ii(l)];o.push(t.get(c).next(u=>u?w.resolve():t.put({targetId:0,path:ii(l),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>w.waitFor(o))})}Gs(e,t){e.createObjectStore("collectionParents",{keyPath:ude});const i=t.store("collectionParents"),r=new OI,o=s=>{if(r.add(s)){const a=s.lastSegment(),l=s.popLast();return i.put({collectionId:a,parent:ii(l)})}};return t.store("remoteDocuments").Z({Y:!0},(s,a)=>{const l=new Ne(s);return o(l.popLast())}).next(()=>t.store("documentMutations").Z({Y:!0},([s,a,l],c)=>{const u=Qr(a);return o(u.popLast())}))}Qs(e){const t=e.store("targets");return t.Z((i,r)=>{const o=kf(r),s=Oz(this.serializer,o);return t.put(s)})}zs(e,t){const i=t.store("remoteDocuments"),r=[];return i.Z((o,s)=>{const a=t.store("remoteDocumentsV14"),l=(c=s,c.document?new O(Ne.fromString(c.document.name).popFirst(5)):c.noDocument?O.fromSegments(c.noDocument.path):c.unknownDocument?O.fromSegments(c.unknownDocument.path):U()).path.toArray();var c;const u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};r.push(a.put(u))}).next(()=>w.waitFor(r))}js(e,t){const i=t.store("mutations"),r=Jz(this.serializer),o=new r$(Ry.Fs,this.serializer.se);return i.j().next(s=>{const a=new Map;return s.forEach(l=>{var c;let u=null!==(c=a.get(l.userId))&&void 0!==c?c:me();ol(this.serializer,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),w.forEach(a,(l,c)=>{const u=new dn(c),d=Dy.ie(this.serializer,u),h=o.getIndexManager(u),f=Ay.ie(u,this.serializer,h,o.referenceDelegate);return new i$(r,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new sI(t,Fi.ct),l).next()})})}}function o$(n){n.createObjectStore("targetDocuments",{keyPath:lde}).createIndex("documentTargetsIndex",cde,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ade,{unique:!0}),n.createObjectStore("targetGlobal")}const FI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class LI{constructor(e,t,i,r,o,s,a,l,c,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Ws=o,this.window=s,this.document=a,this.Hs=c,this.Js=u,this.Ys=d,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=h=>Promise.resolve(),!LI.D())throw new S(C.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Che(this,r),this.si=t+"main",this.serializer=new Rz(l),this.ii=new Cr(this.si,this.Ys,new Nhe(this.serializer)),this.Ds=new yhe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Jz(this.serializer),this.xs=new che,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===u&&Ht("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.oi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new S(C.FAILED_PRECONDITION,FI);return this.ui(),this.ci(),this.ai(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ds.getHighestSequenceNumber(e))}).then(e=>{this.Vs=new Fi(e,this.Hs)}).then(()=>{this.Ss=!0}).catch(e=>(this.ii&&this.ii.close(),Promise.reject(e)))}hi(e){var t=this;return this.ni=function(){var i=m(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ii.B(function(){var t=m(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget(m(function*(){t.started&&(yield t.oi())})))}oi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ny(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.li(e).next(t=>{t||(this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)))})}).next(()=>this.fi(e)).next(t=>this.isPrimary&&!t?this.di(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Ss(e))return T("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return T("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ws.enqueueRetryable(()=>this.ni(e)),this.isPrimary=e})}li(e){return Lf(e).get("owner").next(t=>w.resolve(this._i(t)))}mi(e){return Ny(e).delete(this.clientId)}gi(){var e=this;return m(function*(){if(e.isPrimary&&!e.yi(e.ei,18e5)){e.ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=hn(i,"clientMetadata");return r.j().next(o=>{const s=e.pi(o,18e5),a=o.filter(l=>-1===s.indexOf(l));return w.forEach(a,l=>r.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.ri)for(const i of t)e.ri.removeItem(e.Ii(i.clientId))}})()}ai(){this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.oi().then(()=>this.gi()).then(()=>this.ai()))}_i(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.Js?w.resolve(!0):Lf(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)){if(this._i(t)&&this.networkEnabled)return!0;if(!this._i(t)){if(!t.allowTabSynchronization)throw new S(C.FAILED_PRECONDITION,FI);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ny(e).j().next(i=>void 0===this.pi(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(t=>(this.isPrimary!==t&&T("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return m(function*(){e.Ss=!1,e.Ei(),e.ti&&(e.ti.cancel(),e.ti=null),e.Ai(),e.Ri(),yield e.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new sI(t,Fi.ct);return e.di(i).next(()=>e.mi(i))}),e.ii.close(),e.vi()})()}pi(e,t){return e.filter(i=>this.yi(i.updateTimeMs,t)&&!this.Ti(i.clientId))}bi(){return this.runTransaction("getActiveClients","readonly",e=>Ny(e).j().next(t=>this.pi(t,18e5).map(i=>i.clientId)))}get started(){return this.Ss}getMutationQueue(e,t){return Ay.ie(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new _he(e,this.serializer.se.databaseId)}getDocumentOverlayCache(e){return Dy.ie(this.serializer,e)}getBundleCache(){return this.xs}runTransaction(e,t,i){T("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",o=15===(s=this.Ys)?vde:14===s?xH:13===s?EH:12===s?yde:11===s?CH:void U();var s;let a;return this.ii.runTransaction(e,r,o,l=>(a=new sI(l,this.Vs?this.Vs.next():Fi.ct),"readwrite-primary"===t?this.li(a).next(c=>!!c||this.fi(a)).next(c=>{if(!c)throw Ht(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)),new S(C.FAILED_PRECONDITION,mH);return i(a)}).next(c=>this.wi(a).next(()=>c)):this.Pi(a).next(()=>i(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Pi(e){return Lf(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)&&!this._i(t)&&!(this.Js||this.allowTabSynchronization&&t.allowTabSynchronization))throw new S(C.FAILED_PRECONDITION,FI)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lf(e).put("owner",t)}static D(){return Cr.D()}di(e){const t=Lf(e);return t.get("owner").next(i=>this._i(i)?(T("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):w.resolve())}yi(e,t){const i=Date.now();return!(e<i-t||e>i&&(Ht(`Detected an update time that is in the future: ${e} > ${i}`),1))}ui(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=()=>{this.Ws.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.oi()))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}Ai(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}ci(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ei();const t=/(?:Version|Mobile)\/1[456]/;(function are(){return!jE()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")})()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ws.enterRestrictedMode(!0),this.Ws.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}Ri(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ti(e){var t;try{const i=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return T("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ht("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ei(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(e){Ht("Failed to set zombie client id.",e)}}vi(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch{}}Ii(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Lf(n){return hn(n,"owner")}function Ny(n){return hn(n,"clientMetadata")}function VI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class BI{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Vi=i,this.Si=r}static Di(e,t){let i=me(),r=me();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new BI(e,t.fromCache,i,r)}}class s${constructor(){this.Ci=!1}initialize(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}getDocumentsMatchingQuery(e,t,i,r){return this.Ni(e,t).next(o=>o||this.ki(e,t,r,i)).next(o=>o||this.Oi(e,t))}Ni(e,t){if(KH(t))return w.resolve(null);let i=ri(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=_y(t,null,"F"),i=ri(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const s=me(...o);return this.xi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.$i(t,a);return this.Mi(t,c,s,l.readTime)?this.Ni(e,_y(t,null,"F")):this.Fi(e,c,t,l)}))})))}ki(e,t,i,r){return KH(t)||r.isEqual(G.min())?this.Oi(e,t):this.xi.getDocuments(e,i).next(o=>{const s=this.$i(t,o);return this.Mi(t,s,i,r)?this.Oi(e,t):(eI()<=ke.DEBUG&&T("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_I(t)),this.Fi(e,s,t,fH(r,-1)))})}$i(e,t){let i=new tt(XH(e));return t.forEach((r,o)=>{wf(e,o)&&(i=i.add(o))}),i}Mi(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Oi(e,t){return eI()<=ke.DEBUG&&T("QueryEngine","Using full collection scan to execute query:",_I(t)),this.xi.getDocumentsMatchingQuery(e,t,Pi.min())}Fi(e,t,i,r){return this.xi.getDocumentsMatchingQuery(e,i,r).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}}class Ohe{constructor(e,t,i,r){this.persistence=e,this.Bi=t,this.serializer=r,this.Li=new Nt(ae),this.qi=new Rs(o=>Ja(o),vf),this.Ui=new Map,this.Ki=e.getRemoteDocumentCache(),this.Ds=e.getTargetCache(),this.xs=e.getBundleCache(),this.Gi(i)}Gi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new i$(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Li))}}function a$(n,e,t,i){return new Ohe(n,e,t,i)}function l$(n,e){return UI.apply(this,arguments)}function UI(){return UI=m(function*(n,e){const t=L(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,t.Gi(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{const s=[],a=[];let l=me();for(const c of r){s.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of o){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(i,l).next(c=>({Qi:c,removedBatchIds:s,addedBatchIds:a}))})})}),UI.apply(this,arguments)}function c$(n){const e=L(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ds.getLastRemoteSnapshotVersion(t))}function u$(n,e,t){let i=me(),r=me();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let s=yi();return t.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(G.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):T("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{zi:s,ji:r}})}function Lhe(n,e){const t=L(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function _u(n,e){const t=L(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ds.getTargetData(i,e).next(o=>o?(r=o,w.resolve(r)):t.Ds.allocateTargetId(i).next(s=>(r=new Os(e,s,0,i.currentSequenceNumber),t.Ds.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.Li.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Li=t.Li.insert(i.targetId,i),t.qi.set(e,i.targetId)),i})}function yu(n,e,t){return jI.apply(this,arguments)}function jI(){return jI=m(function*(n,e,t){const i=L(n),r=i.Li.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!Ss(s))throw s;T("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}i.Li=i.Li.remove(e),i.qi.delete(r.target)}),jI.apply(this,arguments)}function Oy(n,e,t){const i=L(n);let r=G.min(),o=me();return i.persistence.runTransaction("Execute query","readonly",s=>function(a,l,c){const u=L(a),d=u.qi.get(c);return void 0!==d?w.resolve(u.Li.get(d)):u.Ds.getTargetData(l,c)}(i,s,ri(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ds.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>i.Bi.getDocumentsMatchingQuery(s,e,t?r:G.min(),t?o:me())).next(a=>(f$(i,QH(e),a),{documents:a,Wi:o})))}function d$(n,e){const t=L(n),i=L(t.Ds),r=t.Li.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",o=>i.ne(o,e).next(s=>s?s.target:null))}function h$(n,e){const t=L(n),i=t.Ui.get(e)||G.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.Ki.getAllFromCollectionGroup(r,e,fH(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(f$(t,e,r),r))}function f$(n,e,t){let i=n.Ui.get(e)||G.min();t.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Ui.set(e,i)}function HI(){return HI=m(function*(n,e,t,i){const r=L(n);let o=me(),s=yi();for(const c of t){const u=e.Hi(c.metadata.name);c.document&&(o=o.add(u));const d=e.Ji(c);d.setReadTime(e.Yi(c.metadata.readTime)),s=s.insert(u,d)}const a=r.Ki.newChangeBuffer({trackRemovals:!0}),l=yield _u(r,(c=i,ri(lu(Ne.fromString(`__bundle__/docs/${c}`)))));var c;return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>u$(c,a,s).next(u=>(a.apply(c),u)).next(u=>r.Ds.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.Ds.addMatchingKeys(c,o,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,u.zi,u.ji)).next(()=>u.zi)))}),HI.apply(this,arguments)}function Bhe(n,e){return zI.apply(this,arguments)}function zI(){return zI=m(function*(n,e,t=me()){const i=yield _u(n,ri(TI(e.bundledQuery))),r=L(n);return r.persistence.runTransaction("Save named query","readwrite",o=>{const s=zt(e.readTime);if(i.snapshotVersion.compareTo(s)>=0)return r.xs.saveNamedQuery(o,e);const a=i.withResumeToken(on.EMPTY_BYTE_STRING,s);return r.Li=r.Li.insert(a.targetId,a),r.Ds.updateTargetData(o,a).next(()=>r.Ds.removeMatchingKeysForTargetId(o,i.targetId)).next(()=>r.Ds.addMatchingKeys(o,t,i.targetId)).next(()=>r.xs.saveNamedQuery(o,e))})}),zI.apply(this,arguments)}function p$(n,e){return`firestore_clients_${n}_${e}`}function m$(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function $I(n,e){return`firestore_targets_${n}_${e}`}class Py{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Zi(e,t,i){const r=JSON.parse(i);let o,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(o=new S(r.error.code,r.error.message))),s?new Py(e,t,r.state,o):(Ht("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vf{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Zi(e,t){const i=JSON.parse(t);let r,o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(r=new S(i.error.code,i.error.message))),o?new Vf(e,i.state,r):(Ht("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fy{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,o=yy();for(let s=0;r&&s<i.activeTargetIds.length;++s)r=yH(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new Fy(e,o):(Ht("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class qI{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new qI(t.clientId,t.onlineState):(Ht("SharedClientState",`Failed to parse online state: ${e}`),null)}}class WI{constructor(){this.activeTargetIds=yy()}tr(e){this.activeTargetIds=this.activeTargetIds.add(e)}er(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GI{constructor(e,t,i,r,o){this.window=e,this.Ws=t,this.persistenceKey=i,this.nr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new Nt(ae),this.started=!1,this.ur=[];const s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.cr=p$(this.persistenceKey,this.nr),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.rr=this.rr.insert(this.nr,new WI),this.hr=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.lr=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.dr=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this._r=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return m(function*(){const t=yield e.syncEngine.bi();for(const r of t){if(r===e.nr)continue;const o=e.getItem(p$(e.persistenceKey,r));if(o){const s=Fy.Zi(r,o);s&&(e.rr=e.rr.insert(s.clientId,s))}}e.mr();const i=e.storage.getItem(e.wr);if(i){const r=e.gr(i);r&&e.yr(r)}for(const r of e.ur)e.ir(r);e.ur=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.pr(this.rr)}isActiveQueryTarget(e){let t=!1;return this.rr.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ir(e,"pending")}updateMutationState(e,t,i){this.Ir(e,t,i),this.Tr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem($I(this.persistenceKey,e));if(i){const r=Vf.Zi(e,i);r&&(t=r.state)}}return this.Er.tr(e),this.mr(),t}removeLocalQueryTarget(e){this.Er.er(e),this.mr()}isLocalQueryTarget(e){return this.Er.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($I(this.persistenceKey,e))}updateQueryState(e,t,i){this.Ar(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Tr(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Rr(e)}notifyBundleLoaded(e){this.vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return T("SharedClientState","READ",e,t),t}setItem(e,t){T("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){T("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ir(e){var t=this;const i=e;if(i.storageArea===this.storage){if(T("SharedClientState","EVENT",i.key,i.newValue),i.key===this.cr)return void Ht("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable(m(function*(){if(t.started){if(null!==i.key)if(t.hr.test(i.key)){if(null==i.newValue){const r=t.br(i.key);return t.Pr(r,null)}{const r=t.Vr(i.key,i.newValue);if(r)return t.Pr(r.clientId,r)}}else if(t.lr.test(i.key)){if(null!==i.newValue){const r=t.Sr(i.key,i.newValue);if(r)return t.Dr(r)}}else if(t.dr.test(i.key)){if(null!==i.newValue){const r=t.Cr(i.key,i.newValue);if(r)return t.Nr(r)}}else if(i.key===t.wr){if(null!==i.newValue){const r=t.gr(i.newValue);if(r)return t.yr(r)}}else if(i.key===t.ar){const r=function(o){let s=Fi.ct;if(null!=o)try{const a=JSON.parse(o);q("number"==typeof a),s=a}catch(a){Ht("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(i.newValue);r!==Fi.ct&&t.sequenceNumberHandler(r)}else if(i.key===t._r){const r=t.kr(i.newValue);yield Promise.all(r.map(o=>t.syncEngine.Or(o)))}}else t.ur.push(i)}))}}get Er(){return this.rr.get(this.nr)}mr(){this.setItem(this.cr,this.Er.Xi())}Ir(e,t,i){const r=new Py(this.currentUser,e,t,i),o=m$(this.persistenceKey,this.currentUser,e);this.setItem(o,r.Xi())}Tr(e){const t=m$(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Rr(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.nr,onlineState:e}))}Ar(e,t,i){const r=$I(this.persistenceKey,e),o=new Vf(e,t,i);this.setItem(r,o.Xi())}vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}br(e){const t=this.hr.exec(e);return t?t[1]:null}Vr(e,t){const i=this.br(e);return Fy.Zi(i,t)}Sr(e,t){const i=this.lr.exec(e),r=Number(i[1]);return Py.Zi(new dn(void 0!==i[2]?i[2]:null),r,t)}Cr(e,t){const i=this.dr.exec(e),r=Number(i[1]);return Vf.Zi(r,t)}gr(e){return qI.Zi(e)}kr(e){return JSON.parse(e)}Dr(e){var t=this;return m(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);T("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Nr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}Pr(e,t){const i=t?this.rr.insert(e,t):this.rr.remove(e),r=this.pr(this.rr),o=this.pr(i),s=[],a=[];return o.forEach(l=>{r.has(l)||s.push(l)}),r.forEach(l=>{o.has(l)||a.push(l)}),this.syncEngine.Fr(s,a).then(()=>{this.rr=i})}yr(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}pr(e){let t=yy();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class g${constructor(){this.Br=new WI,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Br.tr(e),this.Lr[e]||"not-current"}updateQueryState(e,t,i){this.Lr[e]=t}removeLocalQueryTarget(e){this.Br.er(e)}isLocalQueryTarget(e){return this.Br.activeTargetIds.has(e)}clearQueryState(e){delete this.Lr[e]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(e){return this.Br.activeTargetIds.has(e)}start(){return this.Br=new WI,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Uhe{qr(e){}shutdown(){}}class _${constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){T("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Qr(){T("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ly=null;function KI(){return null===Ly?Ly=268435456+Math.round(2147483648*Math.random()):Ly++,"0x"+Ly.toString(16)}const jhe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Hhe{constructor(e){this.Wr=e.Wr,this.Hr=e.Hr}Jr(e){this.Yr=e}Zr(e){this.Xr=e}onMessage(e){this.eo=e}close(){this.Hr()}send(e){this.Wr(e)}no(){this.Yr()}so(e){this.Xr(e)}io(e){this.eo(e)}}const zn="WebChannelConnection";class zhe extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.ro=(e.ssl?"https":"http")+"://"+e.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(e,t,i,r,o){const s=KI(),a=this.ao(e,t);T("RestConnection",`Sending RPC '${e}' ${s}:`,a,i);const l={};return this.ho(l,r,o),this.lo(e,a,l,i).then(c=>(T("RestConnection",`Received RPC '${e}' ${s}: `,c),c),c=>{throw Yr("RestConnection",`RPC '${e}' ${s} failed with error: `,c,"url: ",a,"request:",i),c})}fo(e,t,i,r,o,s){return this.co(e,t,i,r,o)}ho(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+nu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}ao(e,t){return`${this.ro}/v1/${t}:${jhe[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,i,r){const o=KI();return new Promise((s,a)=>{const l=new Bue;l.setWithCredentials(!0),l.listenOnce(Fue.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case JS.NO_ERROR:const u=l.getResponseJson();T(zn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(u)),s(u);break;case JS.TIMEOUT:T(zn,`RPC '${e}' ${o} timed out`),a(new S(C.DEADLINE_EXCEEDED,"Request time out"));break;case JS.HTTP_ERROR:const d=l.getStatus();if(T(zn,`RPC '${e}' ${o} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h?.error;if(f&&f.status&&f.message){const p=function(g){const _=g.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(_)>=0?_:C.UNKNOWN}(f.status);a(new S(p,f.message))}else a(new S(C.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new S(C.UNAVAILABLE,"Connection failed."));break;default:U()}}finally{T(zn,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(r);T(zn,`RPC '${e}' ${o} sending request:`,r),l.send(t,"POST",c,i,15)})}wo(e,t,i){const r=KI(),o=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Oue(),a=Pue(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(l.xmlHttpFactory=new Vue({})),this.ho(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const c=o.join("");T(zn,`Creating RPC '${e}' stream ${r}: ${c}`,l);const u=s.createWebChannel(c,l);let d=!1,h=!1;const f=new Hhe({Wr:g=>{h?T(zn,`Not sending because RPC '${e}' stream ${r} is closed:`,g):(d||(T(zn,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),T(zn,`RPC '${e}' stream ${r} sending:`,g),u.send(g))},Hr:()=>u.close()}),p=(g,_,v)=>{g.listen(_,E=>{try{v(E)}catch(b){setTimeout(()=>{throw b},0)}})};return p(u,sy.EventType.OPEN,()=>{h||T(zn,`RPC '${e}' stream ${r} transport opened.`)}),p(u,sy.EventType.CLOSE,()=>{h||(h=!0,T(zn,`RPC '${e}' stream ${r} transport closed`),f.so())}),p(u,sy.EventType.ERROR,g=>{h||(h=!0,Yr(zn,`RPC '${e}' stream ${r} transport errored:`,g),f.so(new S(C.UNAVAILABLE,"The operation could not be completed")))}),p(u,sy.EventType.MESSAGE,g=>{var _;if(!h){const v=g.data[0];q(!!v);const b=v.error||(null===(_=v[0])||void 0===_?void 0:_.error);if(b){T(zn,`RPC '${e}' stream ${r} received error:`,b);const N=b.status;let W=function(Le){const Xt=Kt[Le];if(void 0!==Xt)return mz(Xt)}(N),H=b.message;void 0===W&&(W=C.INTERNAL,H="Unknown error status: "+N+" with message "+b.message),h=!0,f.so(new S(W,H)),u.close()}else T(zn,`RPC '${e}' stream ${r} received:`,v),f.io(v)}}),p(a,Lue.STAT_EVENT,g=>{g.stat===aH.PROXY?T(zn,`RPC '${e}' stream ${r} detected buffering proxy`):g.stat===aH.NOPROXY&&T(zn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.no()},0),f}}function y$(){return typeof window<"u"?window:null}function Vy(){return typeof document<"u"?document:null}function Bf(n){return new Zde(n,!0)}class YI{constructor(e,t,i=1e3,r=1.5,o=6e4){this.Ws=e,this.timerId=t,this._o=i,this.mo=r,this.yo=o,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),i=Math.max(0,Date.now()-this.To),r=Math.max(0,t-i);r>0&&T("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,r,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class v${constructor(e,t,i,r,o,s,a,l){this.Ws=e,this.bo=i,this.Po=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new YI(e,t)}xo(){return 1===this.state||5===this.state||this.No()}No(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.ko()}stop(){var e=this;return m(function*(){e.xo()&&(yield e.close(0))})()}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(e){this.Bo(),this.stream.send(e)}Mo(){var e=this;return m(function*(){if(e.No())return e.close(0)})()}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}close(e,t){var i=this;return m(function*(){i.Bo(),i.Lo(),i.Co.cancel(),i.Vo++,4!==e?i.Co.reset():t&&t.code===C.RESOURCE_EXHAUSTED?(Ht(t.toString()),Ht("Using maximum backoff delay to prevent overloading the backend."),i.Co.Eo()):t&&t.code===C.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.qo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Vo===t&&this.Ko(i,r)},i=>{e(()=>{const r=new S(C.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Go(r)})})}Ko(e,t){const i=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr(()=>{i(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(r=>{i(()=>this.Go(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}ko(){var e=this;this.state=5,this.Co.Ao(m(function*(){e.state=0,e.start()}))}Go(e){return T("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Ws.enqueueAndForget(()=>this.Vo===e?t():(T("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $he extends v${constructor(e,t,i,r,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,s),this.serializer=o}Qo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.Co.reset();const t=function the(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:U(),r=e.targetChange.targetIds||[],o=function(l,c){return l.useProto3Json?(q(void 0===c||"string"==typeof c),on.fromBase64String(c||"")):(q(void 0===c||c instanceof Uint8Array),on.fromUint8Array(c||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){const c=void 0===l.code?C.UNKNOWN:mz(l.code);return new S(c,l.message||"")}(s);t=new _z(i,r,o,a||null)}else if("documentChange"in e){const i=e.documentChange,r=Jr(n,i.document.name),o=zt(i.document.updateTime),s=i.document.createTime?zt(i.document.createTime):G.min(),a=new fn({mapValue:{fields:i.document.fields}}),l=pt.newFoundDocument(r,o,s,a);t=new Ey(i.targetIds||[],i.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const i=e.documentDelete,r=Jr(n,i.document),o=i.readTime?zt(i.readTime):G.min(),s=pt.newNoDocument(r,o);t=new Ey([],i.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const i=e.documentRemove,r=Jr(n,i.document);t=new Ey([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return U();{const i=e.filter,o=new Gde(i.count||0);t=new gz(i.targetId,o)}}var l;return t}(this.serializer,e),i=function(r){if(!("targetChange"in r))return G.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?G.min():o.readTime?zt(o.readTime):G.min()}(e);return this.listener.zo(t,i)}jo(e){const t={};t.database=Mf(this.serializer),t.addTarget=function(r,o){let s;const a=o.target;return s=py(a)?{documents:Iz(r,a)}:{query:II(r,a)},s.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?s.resumeToken=wz(r,o.resumeToken):o.snapshotVersion.compareTo(G.min())>0&&(s.readTime=fu(r,o.snapshotVersion.toTimestamp())),s}(this.serializer,e);const i=function ihe(n,e){const t=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return U()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Fo(t)}Wo(e){const t={};t.database=Mf(this.serializer),t.removeTarget=e,this.Fo(t)}}class qhe extends v${constructor(e,t,i,r,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,s),this.serializer=o,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();const t=function nhe(n,e){return n&&n.length>0?(q(void 0!==e),n.map(t=>function(i,r){let o=zt(i.updateTime?i.updateTime:r);return o.isEqual(G.min())&&(o=zt(r)),new Hde(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=zt(e.commitTime);return this.listener.Zo(i,t)}return q(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}tu(){const e={};e.database=Mf(this.serializer),this.Fo(e)}Yo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Af(this.serializer,i))};this.Fo(t)}}class Whe extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.eu=!1}nu(){if(this.eu)throw new S(C.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,i){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.co(e,t,i,r,o)).catch(r=>{throw"FirebaseError"===r.name?(r.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new S(C.UNKNOWN,r.toString())})}fo(e,t,i,r){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.fo(e,t,i,o,s,r)).catch(o=>{throw"FirebaseError"===o.name?(o.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new S(C.UNKNOWN,o.toString())})}terminate(){this.eu=!0}}class Khe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.uu("Offline")))}set(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}uu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}cu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(Ht(t),this.ru=!1):T("OnlineStateTracker",t)}hu(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}class Yhe{constructor(e,t,i,r,o){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=o,this._u.qr(a=>{i.enqueueAndForget(m(function*(){var l;Ho(s)&&(T("RemoteStore","Restarting streams for network reachability change."),yield(l=m(function*(c){const u=L(c);u.du.add(4),yield vu(u),u.mu.set("Unknown"),u.du.delete(4),yield Uf(u)}),function(c){return l.apply(this,arguments)})(s))}))}),this.mu=new Khe(i,r)}}function Uf(n){return XI.apply(this,arguments)}function XI(){return XI=m(function*(n){if(Ho(n))for(const e of n.wu)yield e(!0)}),XI.apply(this,arguments)}function vu(n){return ZI.apply(this,arguments)}function ZI(){return ZI=m(function*(n){for(const e of n.wu)yield e(!1)}),ZI.apply(this,arguments)}function By(n,e){const t=L(n);t.fu.has(e.targetId)||(t.fu.set(e.targetId,e),tT(t)?eT(t):wu(t).No()&&JI(t,e))}function jf(n,e){const t=L(n),i=wu(t);t.fu.delete(e),i.No()&&b$(t,e),0===t.fu.size&&(i.No()?i.$o():Ho(t)&&t.mu.set("Unknown"))}function JI(n,e){n.gu.Ot(e.targetId),wu(n).jo(e)}function b$(n,e){n.gu.Ot(e),wu(n).Wo(e)}function eT(n){n.gu=new Kde({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.fu.get(e)||null}),wu(n).start(),n.mu.ou()}function tT(n){return Ho(n)&&!wu(n).xo()&&n.fu.size>0}function Ho(n){return 0===L(n).du.size}function w$(n){n.gu=void 0}function Qhe(n){return nT.apply(this,arguments)}function nT(){return nT=m(function*(n){n.fu.forEach((e,t)=>{JI(n,e)})}),nT.apply(this,arguments)}function Xhe(n,e){return iT.apply(this,arguments)}function iT(){return iT=m(function*(n,e){w$(n),tT(n)?(n.mu.au(e),eT(n)):n.mu.set("Unknown")}),iT.apply(this,arguments)}function Zhe(n,e,t){return rT.apply(this,arguments)}function rT(){return rT=m(function*(n,e,t){if(n.mu.set("Online"),e instanceof _z&&2===e.state&&e.cause)try{yield(i=m(function*(r,o){const s=o.cause;for(const a of o.targetIds)r.fu.has(a)&&(yield r.remoteSyncer.rejectListen(a,s),r.fu.delete(a),r.gu.removeTarget(a))}),function(r,o){return i.apply(this,arguments)})(n,e)}catch(i){T("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Uy(n,i)}else if(e instanceof Ey?n.gu.Kt(e):e instanceof gz?n.gu.Jt(e):n.gu.zt(e),!t.isEqual(G.min()))try{const i=yield c$(n.localStore);t.compareTo(i)>=0&&(yield function(r,o){const s=r.gu.Xt(o);return s.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=r.fu.get(l);c&&r.fu.set(l,c.withResumeToken(a.resumeToken,o))}}),s.targetMismatches.forEach(a=>{const l=r.fu.get(a);if(!l)return;r.fu.set(a,l.withResumeToken(on.EMPTY_BYTE_STRING,l.snapshotVersion)),b$(r,a);const c=new Os(l.target,a,1,l.sequenceNumber);JI(r,c)}),r.remoteSyncer.applyRemoteEvent(s)}(n,t))}catch(i){T("RemoteStore","Failed to raise snapshot:",i),yield Uy(n,i)}var i}),rT.apply(this,arguments)}function Uy(n,e,t){return oT.apply(this,arguments)}function oT(){return oT=m(function*(n,e,t){if(!Ss(e))throw e;n.du.add(1),yield vu(n),n.mu.set("Offline"),t||(t=()=>c$(n.localStore)),n.asyncQueue.enqueueRetryable(m(function*(){T("RemoteStore","Retrying IndexedDB access"),yield t(),n.du.delete(1),yield Uf(n)}))}),oT.apply(this,arguments)}function C$(n,e){return e().catch(t=>Uy(n,t,e))}function bu(n){return sT.apply(this,arguments)}function sT(){return sT=m(function*(n){const e=L(n),t=Vs(e);let i=e.lu.length>0?e.lu[e.lu.length-1].batchId:-1;for(;Jhe(e);)try{const r=yield Lhe(e.localStore,i);if(null===r){0===e.lu.length&&t.$o();break}i=r.batchId,efe(e,r)}catch(r){yield Uy(e,r)}E$(e)&&x$(e)}),sT.apply(this,arguments)}function Jhe(n){return Ho(n)&&n.lu.length<10}function efe(n,e){n.lu.push(e);const t=Vs(n);t.No()&&t.Jo&&t.Yo(e.mutations)}function E$(n){return Ho(n)&&!Vs(n).xo()&&n.lu.length>0}function x$(n){Vs(n).start()}function tfe(n){return aT.apply(this,arguments)}function aT(){return aT=m(function*(n){Vs(n).tu()}),aT.apply(this,arguments)}function nfe(n){return lT.apply(this,arguments)}function lT(){return lT=m(function*(n){const e=Vs(n);for(const t of n.lu)e.Yo(t.mutations)}),lT.apply(this,arguments)}function ife(n,e,t){return cT.apply(this,arguments)}function cT(){return cT=m(function*(n,e,t){const i=n.lu.shift(),r=bI.from(i,e,t);yield C$(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield bu(n)}),cT.apply(this,arguments)}function rfe(n,e){return uT.apply(this,arguments)}function uT(){return uT=m(function*(n,e){var t;e&&Vs(n).Jo&&(yield(t=m(function*(i,r){if(pz(o=r.code)&&o!==C.ABORTED){const s=i.lu.shift();Vs(i).Oo(),yield C$(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield bu(i)}var o}),function(i,r){return t.apply(this,arguments)})(n,e)),E$(n)&&x$(n)}),uT.apply(this,arguments)}function D$(n,e){return dT.apply(this,arguments)}function dT(){return dT=m(function*(n,e){const t=L(n);t.asyncQueue.verifyOperationInProgress(),T("RemoteStore","RemoteStore received new credentials");const i=Ho(t);t.du.add(3),yield vu(t),i&&t.mu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.du.delete(3),yield Uf(t)}),dT.apply(this,arguments)}function hT(n,e){return fT.apply(this,arguments)}function fT(){return fT=m(function*(n,e){const t=L(n);e?(t.du.delete(2),yield Uf(t)):e||(t.du.add(2),yield vu(t),t.mu.set("Unknown"))}),fT.apply(this,arguments)}function wu(n){return n.yu||(n.yu=function(e,t,i){const r=L(e);return r.nu(),new $he(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{Jr:Qhe.bind(null,n),Zr:Xhe.bind(null,n),zo:Zhe.bind(null,n)}),n.wu.push(function(){var e=m(function*(t){t?(n.yu.Oo(),tT(n)?eT(n):n.mu.set("Unknown")):(yield n.yu.stop(),w$(n))});return function(t){return e.apply(this,arguments)}}())),n.yu}function Vs(n){return n.pu||(n.pu=function(e,t,i){const r=L(e);return r.nu(),new qhe(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{Jr:tfe.bind(null,n),Zr:rfe.bind(null,n),Xo:nfe.bind(null,n),Zo:ife.bind(null,n)}),n.wu.push(function(){var e=m(function*(t){t?(n.pu.Oo(),yield bu(n)):(yield n.pu.stop(),n.lu.length>0&&(T("RemoteStore",`Stopping write stream with ${n.lu.length} pending writes`),n.lu=[]))});return function(t){return e.apply(this,arguments)}}())),n.pu}class pT{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}static createAndSchedule(e,t,i,r,o){const s=Date.now()+i,a=new pT(e,t,s,r,o);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new S(C.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cu(n,e){if(Ht("AsyncQueue",`${e}: ${n}`),Ss(n))return new S(C.UNAVAILABLE,`${e}: ${n}`);throw n}class Eu{constructor(e){this.comparator=e?(t,i)=>e(t,i)||O.comparator(t.key,i.key):(t,i)=>O.comparator(t.key,i.key),this.keyedMap=Cf(),this.sortedSet=new Nt(this.comparator)}static emptySet(e){return new Eu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Eu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Eu;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class S${constructor(){this.Iu=new Nt(O.comparator)}track(e){const t=e.doc.key,i=this.Iu.get(t);i?0!==e.type&&3===i.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==i.type?this.Iu=this.Iu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Iu=this.Iu.remove(t):1===e.type&&2===i.type?this.Iu=this.Iu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):U():this.Iu=this.Iu.insert(t,e)}Tu(){const e=[];return this.Iu.inorderTraversal((t,i)=>{e.push(i)}),e}}class xu{constructor(e,t,i,r,o,s,a,l,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,r,o){const s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new xu(e,t,Eu.emptySet(t),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class ofe{constructor(){this.Eu=void 0,this.listeners=[]}}class sfe{constructor(){this.queries=new Rs(e=>YH(e),bf),this.onlineState="Unknown",this.Au=new Set}}function mT(n,e){return gT.apply(this,arguments)}function gT(){return gT=m(function*(n,e){const t=L(n),i=e.query;let r=!1,o=t.queries.get(i);if(o||(r=!0,o=new ofe),r)try{o.Eu=yield t.onListen(i)}catch(s){const a=Cu(s,`Initialization of query '${_I(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.listeners.push(e),e.Ru(t.onlineState),o.Eu&&e.vu(o.Eu)&&vT(t)}),gT.apply(this,arguments)}function _T(n,e){return yT.apply(this,arguments)}function yT(){return yT=m(function*(n,e){const t=L(n),i=e.query;let r=!1;const o=t.queries.get(i);if(o){const s=o.listeners.indexOf(e);s>=0&&(o.listeners.splice(s,1),r=0===o.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),yT.apply(this,arguments)}function afe(n,e){const t=L(n);let i=!1;for(const r of e){const s=t.queries.get(r.query);if(s){for(const a of s.listeners)a.vu(r)&&(i=!0);s.Eu=r}}i&&vT(t)}function lfe(n,e,t){const i=L(n),r=i.queries.get(e);if(r)for(const o of r.listeners)o.onError(t);i.queries.delete(e)}function vT(n){n.Au.forEach(e=>{e.next()})}class bT{constructor(e,t,i){this.query=e,this.bu=t,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=i||{}}vu(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new xu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),t=!0):this.Du(e,this.onlineState)&&(this.Cu(e),t=!0),this.Vu=e,t}onError(e){this.bu.error(e)}Ru(e){this.onlineState=e;let t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}Du(e,t){return!e.fromCache||(!this.options.xu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Su(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Cu(e){e=xu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}class cfe{constructor(e,t){this.Nu=e,this.byteLength=t}ku(){return"metadata"in this.Nu}}class I${constructor(e){this.serializer=e}Hi(e){return Jr(this.serializer,e)}Ji(e){return e.metadata.exists?Sz(this.serializer,e.document,!1):pt.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}Yi(e){return zt(e)}}class ufe{constructor(e,t,i){this.Ou=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=T$(e)}$u(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;const i=Ne.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,i=new I$(this.serializer);for(const r of e)if(r.metadata.queries){const o=i.Hi(r.metadata.name);for(const s of r.metadata.queries){const a=(t.get(s)||me()).add(o);t.set(s,a)}}return t}complete(){var e=this;return m(function*(){const t=yield function Vhe(n,e,t,i){return HI.apply(this,arguments)}(e.localStore,new I$(e.serializer),e.documents,e.Ou.id),i=e.Mu(e.documents);for(const r of e.queries)yield Bhe(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Fu:e.collectionGroups,Bu:t}})()}}function T$(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class M${constructor(e){this.key=e}}class A${constructor(e){this.key=e}}class k${constructor(e,t){this.query=e,this.Lu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=me(),this.mutatedKeys=me(),this.Ku=XH(e),this.Gu=new Eu(this.Ku)}get Qu(){return this.Lu}zu(e,t){const i=t?t.ju:new S$,r=t?t.Gu:this.Gu;let o=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const l="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{const h=r.get(u),f=wf(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let _=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(i.track({type:3,doc:f}),_=!0):this.Wu(h,f)||(i.track({type:2,doc:f}),_=!0,(l&&this.Ku(f,l)>0||c&&this.Ku(f,c)<0)&&(a=!0)):!h&&f?(i.track({type:0,doc:f}),_=!0):h&&!f&&(i.track({type:1,doc:h}),_=!0,(l||c)&&(a=!0)),_&&(f?(s=s.add(f),o=g?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const u="F"===this.query.limitType?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),i.track({type:1,doc:u})}return{Gu:s,ju:i,Mi:a,mutatedKeys:o}}Wu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const o=e.ju.Tu();o.sort((c,u)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return U()}};return f(d)-f(h)}(c.type,u.type)||this.Ku(c.doc,u.doc)),this.Hu(i);const s=t?this.Ju():[],a=0===this.Uu.size&&this.current?1:0,l=a!==this.qu;return this.qu=a,0!==o.length||l?{snapshot:new xu(this.query,e.Gu,r,o,e.mutatedKeys,0===a,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),Yu:s}:{Yu:s}}Ru(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new S$,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.Uu;this.Uu=me(),this.Gu.forEach(i=>{this.Zu(i.key)&&(this.Uu=this.Uu.add(i.key))});const t=[];return e.forEach(i=>{this.Uu.has(i)||t.push(new A$(i))}),this.Uu.forEach(i=>{e.has(i)||t.push(new M$(i))}),t}Xu(e){this.Lu=e.Wi,this.Uu=me();const t=this.zu(e.documents);return this.applyChanges(t,!0)}tc(){return xu.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class dfe{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class hfe{constructor(e){this.key=e,this.ec=!1}}class ffe{constructor(e,t,i,r,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.nc={},this.sc=new Rs(a=>YH(a),bf),this.ic=new Map,this.rc=new Set,this.oc=new Nt(O.comparator),this.uc=new Map,this.cc=new PI,this.ac={},this.hc=new Map,this.lc=ll.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function pfe(n,e){return wT.apply(this,arguments)}function wT(){return wT=m(function*(n,e){const t=$T(n);let i,r;const o=t.sc.get(e);if(o)i=o.targetId,t.sharedClientState.addLocalQueryTarget(i),r=o.view.tc();else{const s=yield _u(t.localStore,ri(e));t.isPrimaryClient&&By(t.remoteStore,s);const a=t.sharedClientState.addLocalQueryTarget(s.targetId);i=s.targetId,r=yield CT(t,e,i,"current"===a,s.resumeToken)}return r}),wT.apply(this,arguments)}function CT(n,e,t,i,r){return ET.apply(this,arguments)}function ET(){return ET=m(function*(n,e,t,i,r){n.dc=(d,h,f)=>{return(p=m(function*(g,_,v,E){let b=_.view.zu(v);b.Mi&&(b=yield Oy(g.localStore,_.query,!1).then(({documents:H})=>_.view.zu(H,b)));const N=E&&E.targetChanges.get(_.targetId),W=_.view.applyChanges(b,g.isPrimaryClient,N);return NT(g,_.targetId,W.Yu),W.snapshot}),function(g,_,v,E){return p.apply(this,arguments)})(n,d,h,f);var p};const o=yield Oy(n.localStore,e,!0),s=new k$(e,o.Wi),a=s.zu(o.documents),l=If.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,r),c=s.applyChanges(a,n.isPrimaryClient,l);NT(n,t,c.Yu);const u=new dfe(e,t,s);return n.sc.set(e,u),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),c.snapshot}),ET.apply(this,arguments)}function mfe(n,e){return xT.apply(this,arguments)}function xT(){return xT=m(function*(n,e){const t=L(n),i=t.sc.get(e),r=t.ic.get(i.targetId);if(r.length>1)return t.ic.set(i.targetId,r.filter(o=>!bf(o,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield yu(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),jf(t.remoteStore,i.targetId),Du(t,i.targetId)}).catch(Ds))):(Du(t,i.targetId),yield yu(t.localStore,i.targetId,!0))}),xT.apply(this,arguments)}function DT(){return DT=m(function*(n,e,t){const i=qT(n);try{const r=yield function(o,s){const a=L(o),l=vt.now(),c=s.reduce((h,f)=>h.add(f.key),me());let u,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=yi(),p=me();return a.Ki.getEntries(h,c).next(g=>{f=g,f.forEach((_,v)=>{v.isValidDocument()||(p=p.add(_))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(g=>{u=g;const _=[];for(const v of s){const E=$de(v,u.get(v.key).overlayedDocument);null!=E&&_.push(new jo(v.key,E,PH(E.value.mapValue),bt.exists(!0)))}return a.mutationQueue.addMutationBatch(h,l,_,s)}).next(g=>{d=g;const _=g.applyToLocalDocumentSet(u,p);return a.documentOverlayCache.saveOverlays(h,g.batchId,_)})}).then(()=>({batchId:d.batchId,changes:JH(u)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,s,a){let l=o.ac[o.currentUser.toKey()];l||(l=new Nt(ae)),l=l.insert(s,a),o.ac[o.currentUser.toKey()]=l}(i,r.batchId,t),yield zo(i,r.changes),yield bu(i.remoteStore)}catch(r){const o=Cu(r,"Failed to persist write");t.reject(o)}}),DT.apply(this,arguments)}function R$(n,e){return ST.apply(this,arguments)}function ST(){return ST=m(function*(n,e){const t=L(n);try{const i=yield function Fhe(n,e){const t=L(n),i=e.snapshotVersion;let r=t.Li;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=t.Ki.newChangeBuffer({trackRemovals:!0});r=t.Li;const a=[];e.targetChanges.forEach((u,d)=>{const h=r.get(d);if(!h)return;a.push(t.Ds.removeMatchingKeys(o,u.removedDocuments,d).next(()=>t.Ds.addMatchingKeys(o,u.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);var p,g,_;e.targetMismatches.has(d)?f=f.withResumeToken(on.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(d,f),g=f,_=u,(0===(p=h).resumeToken.approximateByteSize()||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8||_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0)&&a.push(t.Ds.updateTargetData(o,f))});let l=yi(),c=me();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(u$(o,s,e.documentUpdates).next(u=>{l=u.zi,c=u.ji})),!i.isEqual(G.min())){const u=t.Ds.getLastRemoteSnapshotVersion(o).next(d=>t.Ds.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(u)}return w.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(t.Li=r,o))}(t.localStore,e);e.targetChanges.forEach((r,o)=>{const s=t.uc.get(o);s&&(q(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.ec=!0:r.modifiedDocuments.size>0?q(s.ec):r.removedDocuments.size>0&&(q(s.ec),s.ec=!1))}),yield zo(t,i,e)}catch(i){yield Ds(i)}}),ST.apply(this,arguments)}function N$(n,e,t){const i=L(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.sc.forEach((o,s)=>{const a=s.view.Ru(e);a.snapshot&&r.push(a.snapshot)}),function(o,s){const a=L(o);a.onlineState=s;let l=!1;a.queries.forEach((c,u)=>{for(const d of u.listeners)d.Ru(s)&&(l=!0)}),l&&vT(a)}(i.eventManager,e),r.length&&i.nc.zo(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function _fe(n,e,t){return IT.apply(this,arguments)}function IT(){return IT=m(function*(n,e,t){const i=L(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.uc.get(e),o=r&&r.key;if(o){let s=new Nt(O.comparator);s=s.insert(o,pt.newNoDocument(o,G.min()));const a=me().add(o),l=new Sf(G.min(),new Map,new tt(ae),s,a);yield R$(i,l),i.oc=i.oc.remove(o),i.uc.delete(e),OT(i)}else yield yu(i.localStore,e,!1).then(()=>Du(i,e,t)).catch(Ds)}),IT.apply(this,arguments)}function yfe(n,e){return TT.apply(this,arguments)}function TT(){return TT=m(function*(n,e){const t=L(n),i=e.batch.batchId;try{const r=yield function Phe(n,e){const t=L(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=t.Ki.newChangeBuffer({trackRemovals:!0});return function(s,a,l,c){const u=l.batch,d=u.keys();let h=w.resolve();return d.forEach(f=>{h=h.next(()=>c.getEntry(a,f)).next(p=>{const g=l.docVersions.get(f);q(null!==g),p.version.compareTo(g)<0&&(u.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),c.addEntry(p)))})}),h.next(()=>s.mutationQueue.removeMutationBatch(a,u))}(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(s){let a=me();for(let l=0;l<s.mutationResults.length;++l)s.mutationResults[l].transformResults.length>0&&(a=a.add(s.batch.mutations[l].key));return a}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}(t.localStore,e);RT(t,i,null),kT(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield zo(t,r)}catch(r){yield Ds(r)}}),TT.apply(this,arguments)}function vfe(n,e,t){return MT.apply(this,arguments)}function MT(){return MT=m(function*(n,e,t){const i=L(n);try{const r=yield function(o,s){const a=L(o);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,s).next(u=>(q(null!==u),c=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,s)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(i.localStore,e);RT(i,e,t),kT(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield zo(i,r)}catch(r){yield Ds(r)}}),MT.apply(this,arguments)}function AT(){return AT=m(function*(n,e){const t=L(n);Ho(t.remoteStore)||T("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(o){const s=L(o);return s.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>s.mutationQueue.getHighestUnacknowledgedBatchId(a))}(t.localStore);if(-1===i)return void e.resolve();const r=t.hc.get(i)||[];r.push(e),t.hc.set(i,r)}catch(i){const r=Cu(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),AT.apply(this,arguments)}function kT(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function RT(n,e,t){const i=L(n);let r=i.ac[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.ac[i.currentUser.toKey()]=r}}function Du(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.ic.get(e))n.sc.delete(i),t&&n.nc.wc(i,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.hs(e).forEach(i=>{n.cc.containsKey(i)||O$(n,i)})}function O$(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(jf(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),OT(n))}function NT(n,e,t){for(const i of t)i instanceof M$?(n.cc.addReference(i.key,e),wfe(n,i)):i instanceof A$?(T("SyncEngine","Document no longer in limbo: "+i.key),n.cc.removeReference(i.key,e),n.cc.containsKey(i.key)||O$(n,i.key)):U()}function wfe(n,e){const t=e.key,i=t.path.canonicalString();n.oc.get(t)||n.rc.has(i)||(T("SyncEngine","New document in limbo: "+t),n.rc.add(i),OT(n))}function OT(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new O(Ne.fromString(e)),i=n.lc.next();n.uc.set(i,new hfe(t)),n.oc=n.oc.insert(t,i),By(n.remoteStore,new Os(ri(lu(t.path)),i,2,Fi.ct))}}function zo(n,e,t){return PT.apply(this,arguments)}function PT(){return PT=m(function*(n,e,t){const i=L(n),r=[],o=[],s=[];var a;i.sc.isEmpty()||(i.sc.forEach((a,l)=>{s.push(i.dc(l,e,t).then(c=>{if((c||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c?.fromCache?"not-current":"current"),c){r.push(c);const u=BI.Di(l.targetId,c);o.push(u)}}))}),yield Promise.all(s),i.nc.zo(r),yield(a=m(function*(l,c){const u=L(l);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>w.forEach(c,h=>w.forEach(h.Vi,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>w.forEach(h.Si,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Ss(d))throw d;T("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const f=u.Li.get(h),g=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);u.Li=u.Li.insert(h,g)}}}),function(l,c){return a.apply(this,arguments)})(i.localStore,o))}),PT.apply(this,arguments)}function Cfe(n,e){return FT.apply(this,arguments)}function FT(){return FT=m(function*(n,e){const t=L(n);if(!t.currentUser.isEqual(e)){T("SyncEngine","User change. New user:",e.toKey());const i=yield l$(t.localStore,e);t.currentUser=e,(r=t).hc.forEach(s=>{s.forEach(a=>{a.reject(new S(C.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.hc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield zo(t,i.Qi)}var r}),FT.apply(this,arguments)}function Efe(n,e){const t=L(n),i=t.uc.get(e);if(i&&i.ec)return me().add(i.key);{let r=me();const o=t.ic.get(e);if(!o)return r;for(const s of o){const a=t.sc.get(s);r=r.unionWith(a.view.Qu)}return r}}function xfe(n,e){return LT.apply(this,arguments)}function LT(){return LT=m(function*(n,e){const t=L(n),i=yield Oy(t.localStore,e.query,!0),r=e.view.Xu(i);return t.isPrimaryClient&&NT(t,e.targetId,r.Yu),r}),LT.apply(this,arguments)}function Dfe(n,e){return VT.apply(this,arguments)}function VT(){return VT=m(function*(n,e){const t=L(n);return h$(t.localStore,e).then(i=>zo(t,i))}),VT.apply(this,arguments)}function Sfe(n,e,t,i){return BT.apply(this,arguments)}function BT(){return BT=m(function*(n,e,t,i){const r=L(n),o=yield function(s,a){const l=L(s),c=L(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",u=>c.In(u,a).next(d=>d?l.localDocuments.getDocuments(u,d):w.resolve(null)))}(r.localStore,e);var a;null!==o?("pending"===t?yield bu(r.remoteStore):"acknowledged"===t||"rejected"===t?(RT(r,e,i||null),kT(r,e),a=e,L(L(r.localStore).mutationQueue).En(a)):U(),yield zo(r,o)):T("SyncEngine","Cannot apply mutation batch with id: "+e)}),BT.apply(this,arguments)}function UT(){return UT=m(function*(n,e){const t=L(n);if($T(t),qT(t),!0===e&&!0!==t.fc){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield P$(t,i.toArray());t.fc=!0,yield hT(t.remoteStore,!0);for(const o of r)By(t.remoteStore,o)}else if(!1===e&&!1!==t.fc){const i=[];let r=Promise.resolve();t.ic.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?i.push(s):r=r.then(()=>(Du(t,s),yu(t.localStore,s,!0))),jf(t.remoteStore,s)}),yield r,yield P$(t,i),function(o){const s=L(o);s.uc.forEach((a,l)=>{jf(s.remoteStore,l)}),s.cc.ls(),s.uc=new Map,s.oc=new Nt(O.comparator)}(t),t.fc=!1,yield hT(t.remoteStore,!1)}}),UT.apply(this,arguments)}function P$(n,e,t){return jT.apply(this,arguments)}function jT(){return jT=m(function*(n,e,t){const i=L(n),r=[],o=[];for(const s of e){let a;const l=i.ic.get(s);if(l&&0!==l.length){a=yield _u(i.localStore,ri(l[0]));for(const c of l){const u=i.sc.get(c),d=yield xfe(i,u);d.snapshot&&o.push(d.snapshot)}}else{const c=yield d$(i.localStore,s);a=yield _u(i.localStore,c),yield CT(i,F$(c),s,!1,a.resumeToken)}r.push(a)}return i.nc.zo(o),r}),jT.apply(this,arguments)}function F$(n){return GH(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Tfe(n){const e=L(n);return L(L(e.localStore).persistence).bi()}function Mfe(n,e,t,i){return HT.apply(this,arguments)}function HT(){return HT=m(function*(n,e,t,i){const r=L(n);if(r.fc)return void T("SyncEngine","Ignoring unexpected query state notification.");const o=r.ic.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const s=yield h$(r.localStore,QH(o[0])),a=Sf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,on.EMPTY_BYTE_STRING);yield zo(r,s,a);break}case"rejected":yield yu(r.localStore,e,!0),Du(r,e,i);break;default:U()}}),HT.apply(this,arguments)}function Afe(n,e,t){return zT.apply(this,arguments)}function zT(){return zT=m(function*(n,e,t){const i=$T(n);if(i.fc){for(const r of e){if(i.ic.has(r)){T("SyncEngine","Adding an already active target "+r);continue}const o=yield d$(i.localStore,r),s=yield _u(i.localStore,o);yield CT(i,F$(o),s.targetId,!1,s.resumeToken),By(i.remoteStore,s)}for(const r of t)i.ic.has(r)&&(yield yu(i.localStore,r,!1).then(()=>{jf(i.remoteStore,r),Du(i,r)}).catch(Ds))}}),zT.apply(this,arguments)}function $T(n){const e=L(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=R$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Efe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_fe.bind(null,e),e.nc.zo=afe.bind(null,e.eventManager),e.nc.wc=lfe.bind(null,e.eventManager),e}function qT(n){const e=L(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yfe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vfe.bind(null,e),e}class jy{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return m(function*(){t.serializer=Bf(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return a$(this.persistence,new s$,e.initialUser,this.serializer)}createPersistence(e){return new r$(Ry.Fs,this.serializer)}createSharedClientState(e){return new g$}terminate(){var e=this;return m(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class WT extends jy{constructor(e,t,i){super(),this.mc=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return m(function*(){yield t().call(i,e),yield i.mc.initialize(i,e),yield qT(i.mc.syncEngine),yield bu(i.mc.remoteStore),yield i.persistence.hi(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return a$(this.persistence,new s$,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new bhe(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const i=new tde(t,this.persistence);return new ede(e.asyncQueue,i)}createPersistence(e){const t=VI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?vi.withCacheSize(this.cacheSizeBytes):vi.DEFAULT;return new LI(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,y$(),Vy(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new g$}}class L$ extends WT{constructor(e,t){super(e,t,!1),this.mc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return m(function*(){yield t().call(i,e);const r=i.mc.syncEngine;i.sharedClientState instanceof GI&&(i.sharedClientState.syncEngine={$r:Sfe.bind(null,r),Mr:Mfe.bind(null,r),Fr:Afe.bind(null,r),bi:Tfe.bind(null,r),Or:Dfe.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.hi(function(){var o=m(function*(s){yield function Ife(n,e){return UT.apply(this,arguments)}(i.mc.syncEngine,s),i.gcScheduler&&(s&&!i.gcScheduler.started?i.gcScheduler.start():s||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(s&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():s||i.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const t=y$();if(!GI.D(t))throw new S(C.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=VI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new GI(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Su{initialize(e,t){var i=this;return m(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>N$(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=Cfe.bind(null,i.syncEngine),yield hT(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new sfe}createDatastore(e){const t=Bf(e.databaseInfo.databaseId),i=new zhe(e.databaseInfo);return new Whe(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,o=a=>N$(this.syncEngine,a,0),s=_$.D()?new _$:new Uhe,new Yhe(t,i,r,o,s);var t,i,r,o,s}createSyncEngine(e,t){return function(i,r,o,s,a,l,c){const u=new ffe(i,r,o,s,a,l);return c&&(u.fc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return function(){var e=m(function*(t){const i=L(t);T("RemoteStore","RemoteStore shutting down."),i.du.add(5),yield vu(i),i._u.shutdown(),i.mu.set("Unknown")});return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}function V$(n,e=10240){let t=0;return{read:()=>m(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>m(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Hy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.gc(this.observer.next,e)}error(e){this.observer.error?this.gc(this.observer.error,e):Ht("Uncaught Error in snapshot listener:",e.toString())}yc(){this.muted=!0}gc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Rfe{constructor(e,t){this.Ic=e,this.serializer=t,this.metadata=new rn,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then(i=>{i&&i.ku()?this.metadata.resolve(i.Nu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Nu)}`))},i=>this.metadata.reject(i))}close(){return this.Ic.cancel()}getMetadata(){var e=this;return m(function*(){return e.metadata.promise})()}_c(){var e=this;return m(function*(){return yield e.getMetadata(),e.Ec()})()}Ec(){var e=this;return m(function*(){const t=yield e.Ac();if(null===t)return null;const i=e.Tc.decode(t),r=Number(i);isNaN(r)&&e.Rc(`length string (${i}) is not valid number`);const o=yield e.vc(r);return new cfe(JSON.parse(o),t.length+r)})()}bc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ac(){var e=this;return m(function*(){for(;e.bc()<0&&!(yield e.Pc()););if(0===e.buffer.length)return null;const t=e.bc();t<0&&e.Rc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}vc(e){var t=this;return m(function*(){for(;t.buffer.length<e;)(yield t.Pc())&&t.Rc("Reached the end of bundle when more is expected.");const i=t.Tc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Rc(e){throw this.Ic.cancel(),new Error(`Invalid bundle format: ${e}`)}Pc(){var e=this;return m(function*(){const t=yield e.Ic.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class Nfe{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return m(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new S(C.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=m(function*(o,s){const a=L(o),l=Mf(a.serializer)+"/documents",c={documents:s.map(f=>Tf(a.serializer,f))},u=yield a.fo("BatchGetDocuments",l,c,s.length),d=new Map;u.forEach(f=>{const p=function ehe(n,e){return"found"in e?function(t,i){q(!!i.found);const r=Jr(t,i.found.name),o=zt(i.found.updateTime),s=i.found.createTime?zt(i.found.createTime):G.min(),a=new fn({mapValue:{fields:i.found.fields}});return pt.newFoundDocument(r,o,s,a)}(n,e):"missing"in e?function(t,i){q(!!i.missing),q(!!i.readTime);const r=Jr(t,i.missing),o=zt(i.readTime);return pt.newNoDocument(r,o)}(n,e):U()}(a.serializer,f);d.set(p.key.toString(),p)});const h=[];return s.forEach(f=>{const p=d.get(f.toString());q(!!p),h.push(p)}),h}),function(o,s){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new hu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return m(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const o=O.fromPath(r);e.mutations.push(new yI(o,e.precondition(o)))}),yield(i=m(function*(r,o){const s=L(r),a=Mf(s.serializer)+"/documents",l={writes:o.map(c=>Af(s.serializer,c))};yield s.co("Commit",a,l)}),function(r,o){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw U();t=G.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new S(C.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(G.min())?bt.exists(!1):bt.updateTime(t):bt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(G.min()))throw new S(C.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bt.updateTime(t)}return bt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ofe{constructor(e,t,i,r,o){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=o,this.Vc=i.maxAttempts,this.Co=new YI(this.asyncQueue,"transaction_retry")}run(){this.Vc-=1,this.Sc()}Sc(){var e=this;this.Co.Ao(m(function*(){const t=new Nfe(e.datastore),i=e.Dc(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(o=>{e.Cc(o)}))}).catch(r=>{e.Cc(r)})}))}Dc(e){try{const t=this.updateFunction(e);return!ff(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Cc(e){this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sc(),Promise.resolve()))):this.deferred.reject(e)}xc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!pz(t)}return!1}}class Pfe{constructor(e,t,i,r){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=dn.UNAUTHENTICATED,this.clientId=dH.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var s=m(function*(a){T("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(i,s=>(T("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}getConfiguration(){var e=this;return m(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new S(C.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(m(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=Cu(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function zy(n,e){return GT.apply(this,arguments)}function GT(){return GT=m(function*(n,e){n.asyncQueue.verifyOperationInProgress(),T("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=m(function*(o){i.isEqual(o)||(yield l$(e.localStore,o),i=o)});return function(o){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),GT.apply(this,arguments)}function KT(n,e){return YT.apply(this,arguments)}function YT(){return YT=m(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield QT(n);T("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>D$(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>D$(e.remoteStore,o)),n._onlineComponents=e}),YT.apply(this,arguments)}function B$(n){return"FirebaseError"===n.name?n.code===C.FAILED_PRECONDITION||n.code===C.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function QT(n){return XT.apply(this,arguments)}function XT(){return XT=m(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){T("FirestoreClient","Using user provided OfflineComponentProvider");try{yield zy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!B$(t))throw t;Yr("Error using user provided cache. Falling back to memory cache: "+t),yield zy(n,new jy)}}else T("FirestoreClient","Using default OfflineComponentProvider"),yield zy(n,new jy);return n._offlineComponents}),XT.apply(this,arguments)}function $y(n){return ZT.apply(this,arguments)}function ZT(){return ZT=m(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(T("FirestoreClient","Using user provided OnlineComponentProvider"),yield KT(n,n._uninitializedComponentsProvider._online)):(T("FirestoreClient","Using default OnlineComponentProvider"),yield KT(n,new Su))),n._onlineComponents}),ZT.apply(this,arguments)}function U$(n){return QT(n).then(e=>e.persistence)}function qy(n){return QT(n).then(e=>e.localStore)}function JT(n){return $y(n).then(e=>e.remoteStore)}function eM(n){return $y(n).then(e=>e.syncEngine)}function Iu(n){return tM.apply(this,arguments)}function tM(){return tM=m(function*(n){const e=yield $y(n),t=e.eventManager;return t.onListen=pfe.bind(null,e.syncEngine),t.onUnlisten=mfe.bind(null,e.syncEngine),t}),tM.apply(this,arguments)}function H$(n,e,t={}){const i=new rn;return n.asyncQueue.enqueueAndForget(m(function*(){return function(r,o,s,a,l){const c=new Hy({next:d=>{o.enqueueAndForget(()=>_T(r,u));const h=d.docs.has(s);!h&&d.fromCache?l.reject(new S(C.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&a&&"server"===a.source?l.reject(new S(C.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new bT(lu(s.path),c,{includeMetadataChanges:!0,xu:!0});return mT(r,u)}(yield Iu(n),n.asyncQueue,e,t,i)})),i.promise}function z$(n,e,t={}){const i=new rn;return n.asyncQueue.enqueueAndForget(m(function*(){return function(r,o,s,a,l){const c=new Hy({next:d=>{o.enqueueAndForget(()=>_T(r,u)),d.fromCache&&"server"===a.source?l.reject(new S(C.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new bT(s,c,{includeMetadataChanges:!0,xu:!0});return mT(r,u)}(yield Iu(n),n.asyncQueue,e,t,i)})),i.promise}const $$=new Map;function nM(n,e,t){if(!t)throw new S(C.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function q$(n,e,t,i){if(!0===e&&!0===i)throw new S(C.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function W$(n){if(!O.isDocumentKey(n))throw new S(C.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function G$(n){if(O.isDocumentKey(n))throw new S(C.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Wy(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":U()}function Te(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new S(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wy(n);throw new S(C.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function K$(n,e){if(e<=0)throw new S(C.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Y${constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new S(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new S(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,q$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hf{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Y$({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new S(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new S(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Y$(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Hue;switch(t.type){case"firstParty":return new Wue(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new S(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$$.get(e);t&&(T("ComponentProvider","Removing Datastore"),$$.delete(e),t.terminate())}(this),Promise.resolve()}}class mt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}}class An{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new An(this.firestore,e,this._query)}}class eo extends An{constructor(e,t,i){super(e,t,lu(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new O(e))}withConverter(e){return new eo(this.firestore,e,this._path)}}function X$(n,e,...t){if(n=Y(n),nM("collection","path",e),n instanceof Hf){const i=Ne.fromString(e,...t);return G$(i),new eo(n,null,i)}{if(!(n instanceof mt||n instanceof eo))throw new S(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ne.fromString(e,...t));return G$(i),new eo(n.firestore,null,i)}}function Gy(n,e,...t){if(n=Y(n),1===arguments.length&&(e=dH.A()),nM("doc","path",e),n instanceof Hf){const i=Ne.fromString(e,...t);return W$(i),new mt(n,null,new O(i))}{if(!(n instanceof mt||n instanceof eo))throw new S(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ne.fromString(e,...t));return W$(i),new mt(n.firestore,n instanceof eo?n.converter:null,new O(i))}}function Z$(n,e){return n=Y(n),e=Y(e),(n instanceof mt||n instanceof eo)&&(e instanceof mt||e instanceof eo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function iM(n,e){return n=Y(n),e=Y(e),n instanceof An&&e instanceof An&&n.firestore===e.firestore&&bf(n._query,e._query)&&n.converter===e.converter}class qfe{constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new YI(this,"async_queue_retry"),this.qc=()=>{const t=Vy();t&&T("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Co.vo()};const e=Vy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Uc(),this.Kc(e)}enterRestrictedMode(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;const t=Vy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}enqueue(e){if(this.Uc(),this.Oc)return new Promise(()=>{});const t=new rn;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.kc.push(e),this.Gc()))}Gc(){var e=this;return m(function*(){if(0!==e.kc.length){try{yield e.kc[0](),e.kc.shift(),e.Co.reset()}catch(t){if(!Ss(t))throw t;T("AsyncQueue","Operation failed with retryable error: "+t)}e.kc.length>0&&e.Co.Ao(()=>e.Gc())}})()}Kc(e){const t=this.Nc.then(()=>(this.Fc=!0,e().catch(i=>{throw this.Mc=i,this.Fc=!1,Ht("INTERNAL UNHANDLED ERROR: ",function(o){let s=o.message||"";return o.stack&&(s=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),s}(i)),i}).then(i=>(this.Fc=!1,i))));return this.Nc=t,t}enqueueAfterDelay(e,t,i){this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);const r=pT.createAndSchedule(this,e,t,i,o=>this.Qc(o));return this.$c.push(r),r}Uc(){this.Mc&&U()}verifyOperationInProgress(){}zc(){var e=this;return m(function*(){let t;do{t=e.Nc,yield t}while(t!==e.Nc)})()}jc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Wc(e){return this.zc().then(()=>{this.$c.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Hc(e){this.Lc.push(e)}Qc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function rM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class Wfe{constructor(){this._progressObserver={},this._taskCompletionResolver=new rn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class gt extends Hf{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new qfe,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||J$(this),this._firestoreClient.terminate()}}function $t(n){return n._firestoreClient||J$(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function J$(n){var e,t,i;const r=n._freezeSettings(),o=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Ede(n._databaseId,a,n._persistenceKey,(c=r).host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams));var a,c;n._firestoreClient=new Pfe(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=r.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(i=r.cache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}function e3(n,e,t){const i=new rn;return n.asyncQueue.enqueue(m(function*(){try{yield zy(n,t),yield KT(n,e),i.resolve()}catch(r){const o=r;if(!B$(o))throw o;Yr("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function t3(n){if(n._initialized||n._terminated)throw new S(C.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class to{constructor(e){this._byteString=e}static fromBase64String(e){try{return new to(on.fromBase64String(e))}catch(t){throw new S(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new to(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class $o{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new S(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ul{constructor(e){this._methodName=e}}class Ky{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new S(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new S(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}}const ipe=/^__.*__$/;class rpe{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new jo(e,this.data,this.fieldMask,t,this.fieldTransforms):new du(e,this.data,t,this.fieldTransforms)}}class n3{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new jo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function r3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw U()}}class Yy{constructor(e,t,i,r,o,s){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===o&&this.Jc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(e){return new Yy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:i,ta:!1});return r.ea(e),r}na(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:i,ta:!1});return r.Jc(),r}sa(e){return this.Zc({path:void 0,ta:!0})}ia(e){return Zy(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Jc(){if(this.path)for(let e=0;e<this.path.length;e++)this.ea(this.path.get(e))}ea(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(r3(this.Yc)&&ipe.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}class ope{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Bf(e)}ua(e,t,i,r=!1){return new Yy({Yc:e,methodName:t,oa:i,path:Rt.emptyPath(),ta:!1,ra:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dl(n){const e=n._freezeSettings(),t=Bf(n._databaseId);return new ope(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Qy(n,e,t,i,r,o={}){const s=n.ua(o.merge||o.mergeFields?2:0,e,t,r);lM("Data must be an object, but it was:",s,i);const a=a3(i,s);let l,c;if(o.merge)l=new _i(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const u=[];for(const d of o.mergeFields){const h=qf(e,d,t);if(!s.contains(h))throw new S(C.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);c3(u,h)||u.push(h)}l=new _i(u),c=s.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=s.fieldTransforms;return new rpe(new fn(a),l,c)}class $f extends ul{_toFieldTransform(e){if(2!==e.Yc)throw e.ia(1===e.Yc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $f}}function o3(n,e,t){return new Yy({Yc:3,oa:e.settings.oa,methodName:n._methodName,ta:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class oM extends ul{_toFieldTransform(e){return new xf(e.path,new cu)}isEqual(e){return e instanceof oM}}class spe extends ul{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=o3(this,e,!0),i=this.ca.map(o=>hl(o,t)),r=new tl(i);return new xf(e.path,r)}isEqual(e){return this===e}}class ape extends ul{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=o3(this,e,!0),i=this.ca.map(o=>hl(o,t)),r=new nl(i);return new xf(e.path,r)}isEqual(e){return this===e}}class lpe extends ul{constructor(e,t){super(e),this.aa=t}_toFieldTransform(e){const t=new uu(e.serializer,iz(e.serializer,this.aa));return new xf(e.path,t)}isEqual(e){return this===e}}function sM(n,e,t,i){const r=n.ua(1,e,t);lM("Data must be an object, but it was:",r,i);const o=[],s=fn.empty();Ya(i,(l,c)=>{const u=Xy(e,l,t);c=Y(c);const d=r.na(u);if(c instanceof $f)o.push(u);else{const h=hl(c,d);null!=h&&(o.push(u),s.set(u,h))}});const a=new _i(o);return new n3(s,a,r.fieldTransforms)}function aM(n,e,t,i,r,o){const s=n.ua(1,e,t),a=[qf(e,i,t)],l=[r];if(o.length%2!=0)throw new S(C.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(qf(e,o[h])),l.push(o[h+1]);const c=[],u=fn.empty();for(let h=a.length-1;h>=0;--h)if(!c3(c,a[h])){const f=a[h];let p=l[h];p=Y(p);const g=s.na(f);if(p instanceof $f)c.push(f);else{const _=hl(p,g);null!=_&&(c.push(f),u.set(f,_))}}const d=new _i(c);return new n3(u,d,s.fieldTransforms)}function s3(n,e,t,i=!1){return hl(t,n.ua(i?4:3,e))}function hl(n,e){if(l3(n=Y(n)))return lM("Unsupported field value:",e,n),a3(n,e);if(n instanceof ul)return function(t,i){if(!r3(i.Yc))throw i.ia(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ia(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ta&&4!==e.Yc)throw e.ia("Nested arrays are not supported");return function(t,i){const r=[];let o=0;for(const s of t){let a=hl(s,i.sa(o));null==a&&(a={nullValue:"NULL_VALUE"}),r.push(a),o++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=Y(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return iz(i.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=vt.fromDate(t);return{timestampValue:fu(i.serializer,r)}}if(t instanceof vt){const r=new vt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:fu(i.serializer,r)}}if(t instanceof Ky)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof to)return{bytesValue:wz(i.serializer,t._byteString)};if(t instanceof mt){const r=i.databaseId,o=t.firestore._databaseId;if(!o.isEqual(r))throw i.ia(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:xI(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ia(`Unsupported field value: ${Wy(t)}`)}(n,e)}function a3(n,e){const t={};return SH(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ya(n,(i,r)=>{const o=hl(r,e.Xc(i));null!=o&&(t[i]=o)}),{mapValue:{fields:t}}}function l3(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof vt||n instanceof Ky||n instanceof to||n instanceof mt||n instanceof ul)}function lM(n,e,t){if(!l3(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=Wy(t);throw e.ia("an object"===i?n+" a custom object":n+" "+i)}var i}function qf(n,e,t){if((e=Y(e))instanceof $o)return e._internalPath;if("string"==typeof e)return Xy(n,e);throw Zy("Field path arguments must be of type string or ",n,!1,void 0,t)}const cpe=new RegExp("[~\\*/\\[\\]]");function Xy(n,e,t){if(e.search(cpe)>=0)throw Zy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $o(...e.split("."))._internalPath}catch{throw Zy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Zy(n,e,t,i,r){const o=i&&!i.isEmpty(),s=void 0!==r;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${i}`),s&&(l+=` in document ${r}`),l+=")"),new S(C.INVALID_ARGUMENT,a+n+l)}function c3(n,e){return n.some(t=>t.isEqual(e))}class Wf{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new upe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class upe extends Wf{data(){return super.data()}}function Jy(n,e){return"string"==typeof e?Xy(n,e):e instanceof $o?e._internalPath:e._delegate._internalPath}function u3(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new S(C.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cM{}class Gf extends cM{}function Bs(n,e,...t){let i=[];e instanceof cM&&i.push(e),i=i.concat(t),function(r){const o=r.filter(a=>a instanceof Tu).length,s=r.filter(a=>a instanceof Kf).length;if(o>1||o>0&&s>0)throw new S(C.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class Kf extends Gf{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Kf(e,t,i)}_apply(e){const t=this._parse(e);return p3(e._query,t),new An(e.firestore,e.converter,gI(e._query,t))}_parse(e){const t=dl(e.firestore);return function(r,o,s,a,l,c,u){let d;if(l.isKeyField()){if("array-contains"===c||"array-contains-any"===c)throw new S(C.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if("in"===c||"not-in"===c){f3(u,c);const h=[];for(const f of u)h.push(h3(a,r,f));d={arrayValue:{values:h}}}else d=h3(a,r,u)}else"in"!==c&&"not-in"!==c&&"array-contains-any"!==c||f3(u,c),d=s3(s,"where",u,"in"===c||"not-in"===c);return Ie.create(l,c,d)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Tu extends cM{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Tu(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:Xe.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,r){let o=i;const s=r.getFlattenedFilters();for(const a of s)p3(o,a),o=gI(o,a)}(e._query,t),new An(e.firestore,e.converter,gI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class uM extends Gf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new uM(e,t)}_apply(e){const t=function(i,r,o){if(null!==i.startAt)throw new S(C.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new S(C.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const s=new su(r,o);return function(a,l){if(null===pI(a)){const c=gy(a);null!==c&&m3(0,c,l.field)}}(i,s),s}(e._query,this._field,this._direction);return new An(e.firestore,e.converter,function(i,r){const o=i.explicitOrderBy.concat([r]);return new Uo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class ev extends Gf{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new ev(e,t,i)}_apply(e){return new An(e.firestore,e.converter,_y(e._query,this._limit,this._limitType))}}class tv extends Gf{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new tv(e,t,i)}_apply(e){const t=d3(e,this.type,this._docOrFields,this._inclusive);return new An(e.firestore,e.converter,(r=t,new Uo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class nv extends Gf{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new nv(e,t,i)}_apply(e){const t=d3(e,this.type,this._docOrFields,this._inclusive);return new An(e.firestore,e.converter,(r=t,new Uo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function d3(n,e,t,i){if(t[0]=Y(t[0]),t[0]instanceof Wf)return function(r,o,s,a,l){if(!a)throw new S(C.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${s}().`);const c=[];for(const u of el(r))if(u.field.isKeyField())c.push(Za(o,a.key));else{const d=a.data.field(u.field);if(aI(d))throw new S(C.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===d){const h=u.field.canonicalString();throw new S(C.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${h}' (used as the orderBy) does not exist.`)}c.push(d)}return new ks(c,l)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=dl(n.firestore);return function(o,s,a,l,c,u){const d=o.explicitOrderBy;if(c.length>d.length)throw new S(C.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const h=[];for(let f=0;f<c.length;f++){const p=c[f];if(d[f].field.isKeyField()){if("string"!=typeof p)throw new S(C.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof p}`);if(!mI(o)&&-1!==p.indexOf("/"))throw new S(C.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${p}' contains a slash.`);const g=o.path.child(Ne.fromString(p));if(!O.isDocumentKey(g))throw new S(C.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${g}' is not because it contains an odd number of segments.`);const _=new O(g);h.push(Za(s,_))}else{const g=s3(a,l,p);h.push(g)}}return new ks(h,u)}(n._query,n.firestore._databaseId,r,e,t,i)}}function h3(n,e,t){if("string"==typeof(t=Y(t))){if(""===t)throw new S(C.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mI(e)&&-1!==t.indexOf("/"))throw new S(C.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ne.fromString(t));if(!O.isDocumentKey(i))throw new S(C.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Za(n,new O(i))}if(t instanceof mt)return Za(n,t._key);throw new S(C.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wy(t)}.`)}function f3(n,e){if(!Array.isArray(n)||0===n.length)throw new S(C.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function p3(n,e){if(e.isInequality()){const i=gy(n),r=e.field;if(null!==i&&!i.isEqual(r))throw new S(C.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const o=pI(n);null!==o&&m3(0,r,o)}const t=function(i,r){for(const o of i)for(const s of o.getFlattenedFilters())if(r.indexOf(s.op)>=0)return s.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new S(C.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function m3(n,e,t){if(!t.isEqual(e))throw new S(C.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class dM{convertValue(e,t="none"){switch(Xa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw U()}}convertObject(e,t){const i={};return Ya(e.fields,(r,o)=>{i[r]=this.convertValue(o,t)}),i}convertGeoPoint(e){return new Ky(Ot(e.latitude),Ot(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=TH(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(mf(e));default:return null}}convertTimestamp(e){const t=Is(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ne.fromString(e);q(kz(i));const r=new Ts(i.get(1),i.get(3)),o=new O(i.popFirst(5));return r.isEqual(t)||Ht(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function iv(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class vpe extends dM{constructor(e){super(),this.firestore=e}convertBytes(e){return new to(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,t)}}class fl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qo extends Wf{constructor(e,t,i,r,o,s){super(e,t,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Jy("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Yf extends qo{data(e={}){return super.data(e)}}class Us{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new fl(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Yf(this._firestore,this._userDataWriter,i.key,i,new fl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new S(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(s=>({type:"added",doc:new Yf(i._firestore,i._userDataWriter,s.doc.key,s.doc,new fl(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>r||3!==s.type).map(s=>{const a=new Yf(i._firestore,i._userDataWriter,s.doc.key,s.doc,new fl(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return 0!==s.type&&(l=o.indexOf(s.doc.key),o=o.delete(s.doc.key)),1!==s.type&&(o=o.add(s.doc),c=o.indexOf(s.doc.key)),{type:wpe(s.type),doc:a,oldIndex:l,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function wpe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return U()}}function _3(n,e){return n instanceof qo&&e instanceof qo?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Us&&e instanceof Us&&n._firestore===e._firestore&&iM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class js extends dM{constructor(e){super(),this.firestore=e}convertBytes(e){return new to(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,t)}}function y3(n,e,t){n=Te(n,mt);const i=Te(n.firestore,gt),r=iv(n.converter,e,t);return Mu(i,[Qy(dl(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,bt.none())])}function v3(n,e,t,...i){n=Te(n,mt);const r=Te(n.firestore,gt),o=dl(r);let s;return s="string"==typeof(e=Y(e))||e instanceof $o?aM(o,"updateDoc",n._key,e,t,i):sM(o,"updateDoc",n._key,e),Mu(r,[s.toMutation(n._key,bt.exists(!0))])}function b3(n,...e){var t,i,r;n=Y(n);let o={includeMetadataChanges:!1},s=0;"object"!=typeof e[s]||rM(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges};if(rM(e[s])){const d=e[s];e[s]=null===(t=d.next)||void 0===t?void 0:t.bind(d),e[s+1]=null===(i=d.error)||void 0===i?void 0:i.bind(d),e[s+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}let l,c,u;if(n instanceof mt)c=Te(n.firestore,gt),u=lu(n._key.path),l={next:d=>{e[s]&&e[s](hM(c,n,d))},error:e[s+1],complete:e[s+2]};else{const d=Te(n,An);c=Te(d.firestore,gt),u=d._query;const h=new js(c);l={next:f=>{e[s]&&e[s](new Us(c,h,d,f))},error:e[s+1],complete:e[s+2]},u3(n._query)}return function(d,h,f,p){const g=new Hy(p),_=new bT(h,g,f);return d.asyncQueue.enqueueAndForget(m(function*(){return mT(yield Iu(d),_)})),()=>{g.yc(),d.asyncQueue.enqueueAndForget(m(function*(){return _T(yield Iu(d),_)}))}}($t(c),u,a,l)}function Mu(n,e){return function(t,i){const r=new rn;return t.asyncQueue.enqueueAndForget(m(function*(){return function gfe(n,e,t){return DT.apply(this,arguments)}(yield eM(t),i,r)})),r.promise}($t(n),e)}function hM(n,e,t){const i=t.docs.get(e._key),r=new js(n);return new qo(n,r,e._key,i,new fl(t.hasPendingWrites,t.fromCache),e.converter)}const Lpe={maxAttempts:5};class w3{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=dl(e)}set(e,t,i){this._verifyNotCommitted();const r=Hs(e,this._firestore),o=iv(r.converter,t,i),s=Qy(this._dataReader,"WriteBatch.set",r._key,o,null!==r.converter,i);return this._mutations.push(s.toMutation(r._key,bt.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const o=Hs(e,this._firestore);let s;return s="string"==typeof(t=Y(t))||t instanceof $o?aM(this._dataReader,"WriteBatch.update",o._key,t,i,r):sM(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,bt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Hs(e,this._firestore);return this._mutations=this._mutations.concat(new hu(t._key,bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new S(C.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hs(n,e){if((n=Y(n)).firestore!==e)throw new S(C.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Vpe extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=dl(e)}get(e){const t=Hs(e,this._firestore),i=new vpe(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return U();const o=r[0];if(o.isFoundDocument())return new Wf(this._firestore,i,o.key,o,t.converter);if(o.isNoDocument())return new Wf(this._firestore,i,t._key,null,t.converter);throw U()})}set(e,t,i){const r=Hs(e,this._firestore),o=iv(r.converter,t,i),s=Qy(this._dataReader,"Transaction.set",r._key,o,null!==r.converter,i);return this._transaction.set(r._key,s),this}update(e,t,i,...r){const o=Hs(e,this._firestore);let s;return s="string"==typeof(t=Y(t))||t instanceof $o?aM(this._dataReader,"Transaction.update",o._key,t,i,r):sM(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){const t=Hs(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Hs(e,this._firestore),i=new js(this._firestore);return super.get(e).then(r=>new qo(this._firestore,i,t._key,r._document,new fl(!1,!1),t.converter))}}!function(n,e=!0){nu=_s,Ao(new br("firestore",(t,{instanceIdentifier:i,options:r})=>{const o=t.getProvider("app").getImmediate(),s=new gt(new $ue(t.getProvider("auth-internal")),new Gue(t.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new S(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ts(a.options.projectId,l)}(o,i),o);return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),ki(lH,"3.10.0",n),ki(lH,"3.10.0","esm2017")}();function fM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new S("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function E3(){if(typeof Uint8Array>"u")throw new S("unimplemented","Uint8Arrays are not available in this environment.")}function x3(){if(!function wde(){return typeof atob<"u"}())throw new S("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Qf{constructor(e){this._delegate=e}static fromBase64String(e){return x3(),new Qf(to.fromBase64String(e))}static fromUint8Array(e){return E3(),new Qf(to.fromUint8Array(e))}toBase64(){return x3(),this._delegate.toBase64()}toUint8Array(){return E3(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function pM(n){return function Gpe(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class Kpe{enableIndexedDbPersistence(e,t){return function Kfe(n,e){t3(n=Te(n,gt));const t=$t(n);if(t._uninitializedComponentsProvider)throw new S(C.FAILED_PRECONDITION,"SDK cache is already specified.");Yr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new Su;return e3(t,r,new WT(r,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Yfe(n){t3(n=Te(n,gt));const e=$t(n);if(e._uninitializedComponentsProvider)throw new S(C.FAILED_PRECONDITION,"SDK cache is already specified.");Yr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),i=new Su;return e3(e,i,new L$(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Qfe(n){if(n._initialized&&!n._terminated)throw new S(C.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new rn;return n._queue.enqueueAndForgetEvenWhileRestricted(m(function*(){try{yield(t=m(function*(i){if(!Cr.D())return Promise.resolve();const r=i+"main";yield Cr.delete(r)}),function(i){return t.apply(this,arguments)})(VI(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class D3{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ts||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Yr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function Q$(n,e,t,i={}){var r;const o=(n=Te(n,Hf))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&Yr("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let s,a;if("string"==typeof i.mockUserToken)s=i.mockUserToken,a=dn.MOCK_USER;else{s=t2(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new S(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new dn(l)}n._authCredentials=new zue(new cH(s,a))}}(this._delegate,e,t,i)}enableNetwork(){return function Zfe(n){return function Ffe(n){return n.asyncQueue.enqueue(m(function*(){const e=yield U$(n),t=yield JT(n);return e.setNetworkEnabled(!0),function(i){const r=L(i);return r.du.delete(0),Uf(r)}(t)}))}($t(n=Te(n,gt)))}(this._delegate)}disableNetwork(){return function Jfe(n){return function Lfe(n){return n.asyncQueue.enqueue(m(function*(){const e=yield U$(n),t=yield JT(n);return e.setNetworkEnabled(!1),(i=m(function*(r){const o=L(r);o.du.add(0),yield vu(o),o.mu.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}($t(n=Te(n,gt)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,q$("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Xfe(n){return function(e){const t=new rn;return e.asyncQueue.enqueueAndForget(m(function*(){return function bfe(n,e){return AT.apply(this,arguments)}(yield eM(e),t)})),t.promise}($t(n=Te(n,gt)))}(this._delegate)}onSnapshotsInSync(e){return function Ape(n,e){return function Ufe(n,e){const t=new Hy(e);return n.asyncQueue.enqueueAndForget(m(function*(){return i=yield Iu(n),r=t,L(i).Au.add(r),void r.next();var i,r})),()=>{t.yc(),n.asyncQueue.enqueueAndForget(m(function*(){return i=yield Iu(n),r=t,void L(i).Au.delete(r);var i,r}))}}($t(n=Te(n,gt)),rM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new S("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Au(this,X$(this._delegate,e))}catch(t){throw oi(t,"collection()","Firestore.collection()")}}doc(e){try{return new er(this,Gy(this._delegate,e))}catch(t){throw oi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new si(this,function $fe(n,e){if(n=Te(n,Hf),nM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new S(C.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new An(n,null,(t=e,new Uo(Ne.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw oi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Bpe(n,e,t){n=Te(n,gt);const i=Object.assign(Object.assign({},Lpe),t);return function(r){if(r.maxAttempts<1)throw new S(C.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,o,s){const a=new rn;return r.asyncQueue.enqueueAndForget(m(function*(){const l=yield function j$(n){return $y(n).then(e=>e.datastore)}(r);new Ofe(r.asyncQueue,l,s,o,a).run()})),a.promise}($t(n),r=>e(new Vpe(n,r)),i)}(this._delegate,t=>e(new S3(this,t)))}batch(){return $t(this._delegate),new I3(new w3(this._delegate,e=>Mu(this._delegate,e)))}loadBundle(e){return function epe(n,e){const t=$t(n=Te(n,gt)),i=new Wfe;return function jfe(n,e,t,i){const r=function(o,s){let a;return a="string"==typeof o?(new TextEncoder).encode(o):o,l=function(l,c){if(l instanceof Uint8Array)return V$(l,c);if(l instanceof ArrayBuffer)return V$(new Uint8Array(l),c);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),new Rfe(l,s);var l}(t,Bf(e));n.asyncQueue.enqueueAndForget(m(function*(){!function kfe(n,e,t){const i=L(n);var r;(r=m(function*(o,s,a){try{const l=yield s.getMetadata();if(yield function(h,f){const p=L(h),g=zt(f.createTime);return p.persistence.runTransaction("hasNewerBundle","readonly",_=>p.xs.getBundleMetadata(_,f.id)).then(_=>!!_&&_.createTime.compareTo(g)>=0)}(o.localStore,l))return yield s.close(),a._completeWith({taskState:"Success",documentsLoaded:(h=l).totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}),Promise.resolve(new Set);a._updateProgress(T$(l));const c=new ufe(l,o.localStore,s.serializer);let u=yield s._c();for(;u;){const h=yield c.$u(u);h&&a._updateProgress(h),u=yield s._c()}const d=yield c.complete();return yield zo(o,d.Bu,void 0),yield function(h,f){const p=L(h);return p.persistence.runTransaction("Save bundle","readwrite",g=>p.xs.saveBundleMetadata(g,f))}(o.localStore,l),a._completeWith(d.progress),Promise.resolve(d.Fu)}catch(l){return Yr("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}var h}),function(o,s,a){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield eM(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function tpe(n,e){return function Hfe(n,e){return n.asyncQueue.enqueue(m(function*(){return function(t,i){const r=L(t);return r.persistence.runTransaction("Get named query","readonly",o=>r.xs.getNamedQuery(o,i))}(yield qy(n),e)}))}($t(n=Te(n,gt)),e).then(t=>t?new An(n,null,t.query):null)}(this._delegate,e).then(t=>t?new si(this,t):null)}}class rv extends dM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qf(new to(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return er.forKey(t,this.firestore,null)}}class S3{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new rv(e)}get(e){const t=ml(e);return this._delegate.get(t).then(i=>new Xf(this._firestore,new qo(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=ml(e);return i?(fM("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const o=ml(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,i,...r),this}delete(e){const t=ml(e);return this._delegate.delete(t),this}}class I3{constructor(e){this._delegate=e}set(e,t,i){const r=ml(e);return i?(fM("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const o=ml(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,i,...r),this}delete(e){const t=ml(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class pl{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new Yf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Zf(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=pl.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(t);return o||(o=new pl(e,new rv(e),t),r.set(t,o)),o}}pl.INSTANCES=new WeakMap;class er{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new rv(e)}static forPath(e,t,i){if(e.length%2!=0)throw new S("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new er(t,new mt(t._delegate,i,new O(e)))}static forKey(e,t,i){return new er(t,new mt(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Au(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Au(this.firestore,X$(this._delegate,e))}catch(t){throw oi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Y(e))instanceof mt&&Z$(this._delegate,e)}set(e,t){t=fM("DocumentReference.set",t);try{return t?y3(this._delegate,e,t):y3(this._delegate,e)}catch(i){throw oi(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?v3(this._delegate,e):v3(this._delegate,e,t,...i)}catch(r){throw oi(r,"updateDoc()","DocumentReference.update()")}}delete(){return function Tpe(n){return Mu(Te(n.firestore,gt),[new hu(n._key,bt.none())])}(this._delegate)}onSnapshot(...e){const t=T3(e),i=M3(e,r=>new Xf(this.firestore,new qo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return b3(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function Epe(n){n=Te(n,mt);const e=Te(n.firestore,gt),t=$t(e),i=new js(e);return function Vfe(n,e){const t=new rn;return n.asyncQueue.enqueueAndForget(m(function*(){return(i=m(function*(r,o,s){try{const a=yield function(l,c){const u=L(l);return u.persistence.runTransaction("read document","readonly",d=>u.localDocuments.getDocument(d,c))}(r,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new S(C.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Cu(a,`Failed to get document '${o} from cache`);s.reject(l)}}),function(r,o,s){return i.apply(this,arguments)})(yield qy(n),e,t);var i})),t.promise}(t,n._key).then(r=>new qo(e,i,n._key,r,new fl(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function xpe(n){n=Te(n,mt);const e=Te(n.firestore,gt);return H$($t(e),n._key,{source:"server"}).then(t=>hM(e,n,t))}(this._delegate):function Cpe(n){n=Te(n,mt);const e=Te(n.firestore,gt);return H$($t(e),n._key).then(t=>hM(e,n,t))}(this._delegate),t.then(i=>new Xf(this.firestore,new qo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new er(this.firestore,this._delegate.withConverter(e?pl.getInstance(this.firestore,e):null))}}function oi(n,e,t){return n.message=n.message.replace(e,t),n}function T3(n){for(const e of n)if("object"==typeof e&&!pM(e))return e;return{}}function M3(n,e){var t,i;let r;return r=pM(n[0])?n[0]:pM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{r.next&&r.next(e(o))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class Xf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new er(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return _3(this._delegate,e._delegate)}}class Zf extends Xf{data(e){const t=this._delegate.data(e);return function jue(n,e){n||U()}(void 0!==t),t}}class si{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new rv(e)}where(e,t,i){try{return new si(this.firestore,Bs(this._delegate,function dpe(n,e,t){const i=e,r=Jy("where",n);return Kf._create(r,i,t)}(e,t,i)))}catch(r){throw oi(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new si(this.firestore,Bs(this._delegate,function hpe(n,e="asc"){const t=e,i=Jy("orderBy",n);return uM._create(i,t)}(e,t)))}catch(i){throw oi(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new si(this.firestore,Bs(this._delegate,function fpe(n){return K$("limit",n),ev._create("limit",n,"F")}(e)))}catch(t){throw oi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new si(this.firestore,Bs(this._delegate,function ppe(n){return K$("limitToLast",n),ev._create("limitToLast",n,"L")}(e)))}catch(t){throw oi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new si(this.firestore,Bs(this._delegate,function mpe(...n){return tv._create("startAt",n,!0)}(...e)))}catch(t){throw oi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new si(this.firestore,Bs(this._delegate,function gpe(...n){return tv._create("startAfter",n,!1)}(...e)))}catch(t){throw oi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new si(this.firestore,Bs(this._delegate,function _pe(...n){return nv._create("endBefore",n,!1)}(...e)))}catch(t){throw oi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new si(this.firestore,Bs(this._delegate,function ype(...n){return nv._create("endAt",n,!0)}(...e)))}catch(t){throw oi(t,"endAt()","Query.endAt()")}}isEqual(e){return iM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Spe(n){n=Te(n,An);const e=Te(n.firestore,gt),t=$t(e),i=new js(e);return function Bfe(n,e){const t=new rn;return n.asyncQueue.enqueueAndForget(m(function*(){return(i=m(function*(r,o,s){try{const a=yield Oy(r,o,!0),l=new k$(o,a.Wi),c=l.zu(a.documents),u=l.applyChanges(c,!1);s.resolve(u.snapshot)}catch(a){const l=Cu(a,`Failed to execute query '${o} against cache`);s.reject(l)}}),function(r,o,s){return i.apply(this,arguments)})(yield qy(n),e,t);var i})),t.promise}(t,n._query).then(r=>new Us(e,i,n,r))}(this._delegate):"server"===e?.source?function Ipe(n){n=Te(n,An);const e=Te(n.firestore,gt),t=$t(e),i=new js(e);return z$(t,n._query,{source:"server"}).then(r=>new Us(e,i,n,r))}(this._delegate):function Dpe(n){n=Te(n,An);const e=Te(n.firestore,gt),t=$t(e),i=new js(e);return u3(n._query),z$(t,n._query).then(r=>new Us(e,i,n,r))}(this._delegate),t.then(i=>new mM(this.firestore,new Us(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=T3(e),i=M3(e,r=>new mM(this.firestore,new Us(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return b3(this._delegate,t,i)}withConverter(e){return new si(this.firestore,this._delegate.withConverter(e?pl.getInstance(this.firestore,e):null))}}class Qpe{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Zf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class mM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new si(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Zf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Qpe(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Zf(this._firestore,i))})}isEqual(e){return _3(this._delegate,e._delegate)}}class Au extends si{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new er(this.firestore,e):null}doc(e){try{return new er(this.firestore,void 0===e?Gy(this._delegate):Gy(this._delegate,e))}catch(t){throw oi(t,"doc()","CollectionReference.doc()")}}add(e){return function Mpe(n,e){const t=Te(n.firestore,gt),i=Gy(n),r=iv(n.converter,e);return Mu(t,[Qy(dl(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,bt.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new er(this.firestore,t))}isEqual(e){return Z$(this._delegate,e._delegate)}withConverter(e){return new Au(this.firestore,this._delegate.withConverter(e?pl.getInstance(this.firestore,e):null))}}function ml(n){return Te(n,mt)}class gM{constructor(...e){this._delegate=new $o(...e)}static documentId(){return new gM(Rt.keyField().canonicalString())}isEqual(e){return(e=Y(e))instanceof $o&&this._delegate._internalPath.isEqual(e._internalPath)}}class gl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function jpe(){return new oM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new gl(e)}static delete(){const e=function Upe(){return new $f("deleteField")}();return e._methodName="FieldValue.delete",new gl(e)}static arrayUnion(...e){const t=function Hpe(...n){return new spe("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new gl(t)}static arrayRemove(...e){const t=function zpe(...n){return new ape("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new gl(t)}static increment(e){const t=function $pe(n){return new lpe("increment",n)}(e);return t._methodName="FieldValue.increment",new gl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Xpe={Firestore:D3,GeoPoint:Ky,Timestamp:vt,Blob:Qf,Transaction:S3,WriteBatch:I3,DocumentReference:er,DocumentSnapshot:Xf,Query:si,QueryDocumentSnapshot:Zf,QuerySnapshot:mM,CollectionReference:Au,FieldPath:gM,FieldValue:gl,setLogLevel:function Ype(n){!function Uue(n){xs.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Er(n){return null!=n&&"false"!=`${n}`}function ov(n){return Array.isArray(n)?n:[n]}function Yt(n){return null==n?"":"string"==typeof n?n:`${n}px`}function ku(n){return n instanceof Me?n.nativeElement:n}let _M;!function Jpe(n){(function Zpe(n,e){n.INTERNAL.registerComponent(new br("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},Xpe)))})(n,(e,t)=>new D3(e,t,new Kpe)),n.registerVersion("@firebase/firestore-compat","0.3.6")}(ys);try{_M=typeof Intl<"u"&&Intl.v8BreakIterator}catch{_M=!1}let Ru,tr=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function cJ(n){return n===oL}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!_M)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(D(tC))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const A3=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function k3(){if(Ru)return Ru;if("object"!=typeof document||!document)return Ru=new Set(A3),Ru;let n=document.createElement("input");return Ru=new Set(A3.filter(e=>(n.setAttribute("type",e),n.type===e))),Ru}let Jf,sv,_l;function ep(n){return function nme(){if(null==Jf&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Jf=!0}))}finally{Jf=Jf||!1}return Jf}()?n:!!n.capture}function R3(){if(null==_l){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return _l=!1,_l;if("scrollBehavior"in document.documentElement.style)_l=!0;else{const n=Element.prototype.scrollTo;_l=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return _l}function tp(){if("object"!=typeof document||!document)return 0;if(null==sv){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),sv=0,0===n.scrollLeft&&(n.scrollLeft=1,sv=0===n.scrollLeft?1:2),n.remove()}return sv}function vM(n){return n.composedPath?n.composedPath()[0]:n.target}function bM(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const N3=ep({passive:!0});let rme=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return lr;const i=ku(t),r=this._monitoredElements.get(i);if(r)return r.subject;const o=new Qe,s="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||i.classList.contains(s)?"cdk-text-field-autofill-end"===l.animationName&&i.classList.contains(s)&&(i.classList.remove(s),this._ngZone.run(()=>o.next({target:l.target,isAutofilled:!1}))):(i.classList.add(s),this._ngZone.run(()=>o.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,N3),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:o,unlisten:()=>{i.removeEventListener("animationstart",a,N3)}}),o}stopMonitoring(t){const i=ku(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(t){return new(t||n)(D(tr),D(pe))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ome=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({}),n})();class hme extends sn{constructor(e,t){super()}schedule(e,t=0){return this}}const av={setInterval(n,e,...t){const{delegate:i}=av;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=av;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class wM extends hme{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return av.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&av.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,zp(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const O3={now:()=>(O3.delegate||Date).now(),delegate:void 0};class np{constructor(e,t=np.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}np.now=O3.now;class CM extends np{constructor(e,t=np.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const EM=new CM(wM),fme=EM;function P3(n,e=EM){return Pt((t,i)=>{let r=null,o=null,s=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=o;o=null,i.next(c)}};function l(){const c=s+n,u=e.now();if(u<c)return r=this.schedule(void 0,c-u),void i.add(r);a()}t.subscribe(Ct(i,c=>{o=c,s=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function nr(n){return Pt((e,t)=>{Wn(n).subscribe(Ct(t,()=>t.complete(),Rb)),!t.closed&&e.subscribe(t)})}const F3=new Set;let Nu,pme=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):gme}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function mme(n){if(!F3.has(n))try{Nu||(Nu=document.createElement("style"),Nu.setAttribute("type","text/css"),document.head.appendChild(Nu)),Nu.sheet&&(Nu.sheet.insertRule(`@media ${n} {body{ }}`,0),F3.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(D(tr))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function gme(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let _me=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new Qe}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return L3(ov(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let o=jC(L3(ov(t)).map(s=>this._registerQuery(s).observable));return o=Eg(o.pipe(Hr(1)),o.pipe(function dme(n){return Xi((e,t)=>n<=t)}(1),P3(0))),o.pipe(oe(s=>{const a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),o={observable:new Je(s=>{const a=l=>this._zone.run(()=>s.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe($C(i),oe(({matches:s})=>({query:t,matches:s})),nr(this._destroySubject)),mql:i};return this._queries.set(t,o),o}}return n.\u0275fac=function(t){return new(t||n)(D(pme),D(pe))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function L3(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const j3="cdk-high-contrast-black-on-white",H3="cdk-high-contrast-white-on-black",xM="cdk-high-contrast-active";let Tme=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=ye(_me).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(xM,j3,H3),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(xM,j3):2===i&&t.add(xM,H3)}}}return n.\u0275fac=function(t){return new(t||n)(D(tr),D(Ae))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Mme=new k("cdk-dir-doc",{providedIn:"root",factory:function Ame(){return ye(Ae)}}),kme=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ou=(()=>{class n{constructor(t){this.value="ltr",this.change=new ht,t&&(this.value=function Rme(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?kme.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(D(Mme,8))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ip=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({}),n})();const Fme=new k("mat-sanity-checks",{providedIn:"root",factory:function Pme(){return!0}});let Qt=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!bM()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(D(Tme),D(Fme,8),D(Ae))},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({imports:[ip,ip]}),n})();function Lme(n,e){return class extends n{get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function Vme(n){return class extends n{updateErrorState(){const e=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==e&&(this.errorState=o,this.stateChanges.next())}constructor(...e){super(...e),this.errorState=!1}}}let Ume=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class jme{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const q3=ep({passive:!0,capture:!0});class Hme{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=vM(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,i,r){const o=this._events.get(t);if(o){const s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,q3)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const o=r.get(t);o&&(o.delete(i),0===o.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,q3)))}}const W3={enterDuration:225,exitDuration:150},G3=ep({passive:!0,capture:!0}),K3=["mousedown","touchstart"],Y3=["mouseup","mouseleave","touchend","touchcancel"];class lv{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ku(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...W3,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const s=i.radius||function $me(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=o.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-s+"px",u.style.top=l-s+"px",u.style.height=2*s+"px",u.style.width=2*s+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const d=window.getComputedStyle(u),f=d.transitionDuration,p="none"===d.transitionProperty||"0s"===f||"0s, 0s"===f||0===r.width&&0===r.height,g=new jme(this,u,i,p);u.style.transform="scale3d(1, 1, 1)",g.state=0,i.persistent||(this._mostRecentTransientRipple=g);let _=null;return!p&&(c||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const v=()=>this._finishRippleTransition(g),E=()=>this._destroyRipple(g);u.addEventListener("transitionend",v),u.addEventListener("transitioncancel",E),_={onTransitionEnd:v,onTransitionCancel:E}}),this._activeRipples.set(g,_),(p||!c)&&this._finishRippleTransition(g),g}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...W3,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=ku(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,K3.forEach(i=>{lv._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Y3.forEach(t=>{this._triggerElement.addEventListener(t,this,G3)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function Dme(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function Sme(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(K3.forEach(t=>lv._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&Y3.forEach(t=>e.removeEventListener(t,this,G3)))}}lv._eventManager=new Hme;let qme=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({imports:[Qt,Qt]}),n})();class Q3{}class Wme{}const Wo="*";function Go(n,e){return{type:7,name:n,definitions:e,options:{}}}function bi(n,e=null){return{type:4,styles:e,timings:n}}function X3(n,e=null){return{type:2,steps:n,options:e}}function Ze(n){return{type:6,styles:n,offset:null}}function kn(n,e,t){return{type:0,name:n,styles:e,options:t}}function ai(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Z3(n){Promise.resolve().then(n)}class op{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Z3(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class J3{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const o=this.players.length;0==o?Z3(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const DM="!";let eq=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Yme=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=ku(t);return new Je(r=>{const s=this._observeElement(i).subscribe(r);return()=>{s.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new Qe,r=this._mutationObserverFactory.create(o=>i.next(o));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(D(eq))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Qme=(()=>{class n{get disabled(){return this._disabled}set disabled(t){this._disabled=Er(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=function eme(n,e=0){return function tme(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(t),this._subscribe()}constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new ht,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(P3(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(y(Yme),y(Me),y(pe))},n.\u0275dir=M({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),Xme=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({providers:[eq]}),n})();const Zme=["matFormFieldNotchedOutline",""],Jme=["*"],ege=["textField"],tge=["iconPrefixContainer"],nge=["textPrefixContainer"];function ige(n,e){1&n&&bn(0,"span",19)}function rge(n,e){if(1&n){const t=kd();te(0,"label",17),Tt("cdkObserveContent",function(){return zl(t),$l(Vt(2)._refreshOutlineNotchWidth())}),_t(1,1),et(2,ige,1,0,"span",18),re()}if(2&n){const t=Vt(2);Se("floating",t._shouldLabelFloat())("cdkObserveContentDisabled",!t._hasOutline())("id",t._labelId),fi("for",t._control.id)("aria-owns",t._control.id),xe(2),Se("ngIf",!t.hideRequiredMarker&&t._control.required)}}function oge(n,e){1&n&&et(0,rge,3,6,"label",16),2&n&&Se("ngIf",Vt()._hasFloatingLabel())}function sge(n,e){1&n&&bn(0,"div",20)}function age(n,e){}function lge(n,e){1&n&&et(0,age,0,0,"ng-template",22),2&n&&(Vt(2),Se("ngTemplateOutlet",x0(1)))}function cge(n,e){if(1&n&&(te(0,"div",21),et(1,lge,1,1,"ng-template",9),re()),2&n){const t=Vt();Se("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",t._labelWidth),xe(1),Se("ngIf",!t._forceDisplayInfixLabel())}}function uge(n,e){1&n&&(te(0,"div",23,24),_t(2,2),re())}function dge(n,e){1&n&&(te(0,"div",25,26),_t(2,3),re())}function hge(n,e){}function fge(n,e){1&n&&et(0,hge,0,0,"ng-template",22),2&n&&(Vt(),Se("ngTemplateOutlet",x0(1)))}function pge(n,e){1&n&&(te(0,"div",27),_t(1,4),re())}function mge(n,e){1&n&&(te(0,"div",28),_t(1,5),re())}function gge(n,e){1&n&&bn(0,"div",29)}function _ge(n,e){1&n&&(te(0,"div",30),_t(1,6),re()),2&n&&Se("@transitionMessages",Vt()._subscriptAnimationState)}function yge(n,e){if(1&n&&(te(0,"mat-hint",34),qt(1),re()),2&n){const t=Vt(2);Se("id",t._hintLabelId),xe(1),Hm(t.hintLabel)}}function vge(n,e){if(1&n&&(te(0,"div",31),et(1,yge,2,2,"mat-hint",32),_t(2,7),bn(3,"div",33),_t(4,8),re()),2&n){const t=Vt();Se("@transitionMessages",t._subscriptAnimationState),xe(1),Se("ngIf",t.hintLabel)}}const bge=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],wge=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let SM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=M({type:n,selectors:[["mat-label"]]}),n})(),Cge=0;const tq=new k("MatError");let Ege=(()=>{class n{constructor(t,i){this.id="mat-mdc-error-"+Cge++,t||i.nativeElement.setAttribute("aria-live","polite")}}return n.\u0275fac=function(t){return new(t||n)(fa("aria-live"),y(Me))},n.\u0275dir=M({type:n,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(t,i){2&t&&Od("id",i.id)},inputs:{id:"id"},features:[de([{provide:tq,useExisting:n}])]}),n})(),xge=0,nq=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+xge++}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=M({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(t,i){2&t&&(Od("id",i.id),fi("align",null),wn("mat-mdc-form-field-hint-end","end"===i.align))},inputs:{align:"align",id:"id"}}),n})();const Dge=new k("MatPrefix"),Sge=new k("MatSuffix");let iq=(()=>{class n{constructor(t){this._elementRef=t,this.floating=!1}getWidth(){return function Ige(n){if(null!==n.offsetParent)return n.scrollWidth;const t=n.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);const i=t.scrollWidth;return t.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(y(Me))},n.\u0275dir=M({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(t,i){2&t&&wn("mdc-floating-label--float-above",i.floating)},inputs:{floating:"floating"}}),n})();const rq="mdc-line-ripple--active",uv="mdc-line-ripple--deactivating";let oq=(()=>{class n{constructor(t,i){this._elementRef=t,this._handleTransitionEnd=r=>{const o=this._elementRef.nativeElement.classList,s=o.contains(uv);"opacity"===r.propertyName&&s&&o.remove(rq,uv)},i.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const t=this._elementRef.nativeElement.classList;t.remove(uv),t.add(rq)}deactivate(){this._elementRef.nativeElement.classList.add(uv)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return n.\u0275fac=function(t){return new(t||n)(y(Me),y(pe))},n.\u0275dir=M({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),n})(),sq=(()=>{class n{constructor(t,i){this._elementRef=t,this._ngZone=i,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return n.\u0275fac=function(t){return new(t||n)(y(Me),y(pe))},n.\u0275cmp=st({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(t,i){2&t&&wn("mdc-notched-outline--notched",i.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:Zme,ngContentSelectors:Jme,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(t,i){1&t&&(Lr(),bn(0,"div",0),te(1,"div",1),_t(2),re(),bn(3,"div",2)),2&t&&(xe(1),is("width",i._getNotchWidth()))},encapsulation:2,changeDetection:0}),n})();const Tge={transitionMessages:Go("transitionMessages",[kn("enter",Ze({opacity:1,transform:"translateY(0%)"})),ai("void => enter",[Ze({opacity:0,transform:"translateY(-5px)"}),bi("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let aq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=M({type:n}),n})();const lq=new k("MatFormField"),Mge=new k("MAT_FORM_FIELD_DEFAULT_OPTIONS");let cq=0,Rge=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Er(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,i,r,o,s,a,l,c){this._elementRef=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=o,this._platform=s,this._defaults=a,this._animationMode=l,this._document=c,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+cq++,this._hintLabelId="mat-mdc-hint-"+cq++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new Qe,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=Boolean(a?.hideRequiredMarker),a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${t.controlType}`),t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(nr(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Hb(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(nr(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(nr(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,r=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const t=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(t.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,o=i?.getBoundingClientRect().width??0,s=r?.getBoundingClientRect().width??0;t.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${o+s}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(y(Me),y(Ea),y(pe),y(Ou),y(tr),y(Mge,8),y(Jm,8),y(Ae))},n.\u0275cmp=st({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,r){if(1&t&&(En(r,SM,5),En(r,SM,7),En(r,aq,5),En(r,Dge,5),En(r,Sge,5),En(r,tq,5),En(r,nq,5)),2&t){let o;$e(o=qe())&&(i._labelChildNonStatic=o.first),$e(o=qe())&&(i._labelChildStatic=o.first),$e(o=qe())&&(i._formFieldControl=o.first),$e(o=qe())&&(i._prefixChildren=o),$e(o=qe())&&(i._suffixChildren=o),$e(o=qe())&&(i._errorChildren=o),$e(o=qe())&&(i._hintChildren=o)}},viewQuery:function(t,i){if(1&t&&(Zn(ege,5),Zn(tge,5),Zn(nge,5),Zn(iq,5),Zn(sq,5),Zn(oq,5)),2&t){let r;$e(r=qe())&&(i._textField=r.first),$e(r=qe())&&(i._iconPrefixContainer=r.first),$e(r=qe())&&(i._textPrefixContainer=r.first),$e(r=qe())&&(i._floatingLabel=r.first),$e(r=qe())&&(i._notchedOutline=r.first),$e(r=qe())&&(i._lineRipple=r.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(t,i){2&t&&wn("mat-mdc-form-field-label-always-float",i._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",i._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",i._hasIconSuffix)("mat-form-field-invalid",i._control.errorState)("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===i._animationMode)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-hide-placeholder",i._hasFloatingLabel()&&!i._shouldLabelFloat())("mat-focused",i._control.focused)("mat-primary","accent"!==i.color&&"warn"!==i.color)("mat-accent","accent"===i.color)("mat-warn","warn"===i.color)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[de([{provide:lq,useExisting:n}])],ngContentSelectors:wge,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(t,i){1&t&&(Lr(bge),et(0,oge,1,1,"ng-template",null,0,HP),te(2,"div",1,2),Tt("click",function(o){return i._control.onContainerClick&&i._control.onContainerClick(o)}),et(4,sge,1,0,"div",3),te(5,"div",4),et(6,cge,2,3,"div",5),et(7,uge,3,0,"div",6),et(8,dge,3,0,"div",7),te(9,"div",8),et(10,fge,1,1,"ng-template",9),_t(11),re(),et(12,pge,2,0,"div",10),et(13,mge,2,0,"div",11),re(),et(14,gge,1,0,"div",12),re(),te(15,"div",13),et(16,_ge,2,1,"div",14),et(17,vge,5,2,"div",15),re()),2&t&&(xe(2),wn("mdc-text-field--filled",!i._hasOutline())("mdc-text-field--outlined",i._hasOutline())("mdc-text-field--no-label",!i._hasFloatingLabel())("mdc-text-field--disabled",i._control.disabled)("mdc-text-field--invalid",i._control.errorState),xe(2),Se("ngIf",!i._hasOutline()&&!i._control.disabled),xe(2),Se("ngIf",i._hasOutline()),xe(1),Se("ngIf",i._hasIconPrefix),xe(1),Se("ngIf",i._hasTextPrefix),xe(2),Se("ngIf",!i._hasOutline()||i._forceDisplayInfixLabel()),xe(2),Se("ngIf",i._hasTextSuffix),xe(1),Se("ngIf",i._hasIconSuffix),xe(1),Se("ngIf",!i._hasOutline()),xe(1),wn("mat-mdc-form-field-subscript-dynamic-size","dynamic"===i.subscriptSizing),Se("ngSwitch",i._getDisplayedMessages()),xe(1),Se("ngSwitchCase","error"),xe(1),Se("ngSwitchCase","hint"))},dependencies:[pg,nL,mg,eL,Qme,nq,iq,sq,oq],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[Tge.transitionMessages]},changeDetection:0}),n})(),IM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({imports:[Qt,Sa,Xme,Qt]}),n})();const Nge=new k("MAT_INPUT_VALUE_ACCESSOR"),Oge=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Pge=0;const Fge=Vme(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i,this.stateChanges=new Qe}});let Lge=(()=>{class n extends Fge{get disabled(){return this._disabled}set disabled(t){this._disabled=Er(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(QV.required)??!1}set required(t){this._required=Er(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&k3().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Er(t)}constructor(t,i,r,o,s,a,l,c,u,d){super(a,o,s,r),this._elementRef=t,this._platform=i,this._autofillMonitor=c,this._formField=d,this._uid="mat-input-"+Pge++,this.focused=!1,this.stateChanges=new Qe,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(p=>k3().has(p)),this._iOSKeyupListener=p=>{const g=p.target;!g.value&&0===g.selectionStart&&0===g.selectionEnd&&(g.setSelectionRange(1,1),g.setSelectionRange(0,0))};const h=this._elementRef.nativeElement,f=h.nodeName.toLowerCase();this._inputValueAccessor=l||h,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&u.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===f,this._isTextarea="textarea"===f,this._isInFormField=!!d,this._isNativeSelect&&(this.controlType=h.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){const t=this._getPlaceholder();if(t!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=t,t?i.setAttribute("placeholder",t):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Oge.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(y(Me),y(tr),y(To,10),y(i_,8),y(yh,8),y(Ume),y(Nge,10),y(rme),y(pe),y(lq,8))},n.\u0275dir=M({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(t,i){1&t&&Tt("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&t&&(Od("id",i.id)("disabled",i.disabled)("required",i.required),fi("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required)("id",i.id),wn("mat-input-server",i._isServer)("mat-mdc-form-field-textarea-control",i._isInFormField&&i._isTextarea)("mat-mdc-form-field-input-control",i._isInFormField)("mdc-text-field__input",i._isInFormField)("mat-mdc-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[de([{provide:aq,useExisting:n}]),K,Fn]}),n})(),Vge=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({imports:[Qt,IM,IM,ome,Qt]}),n})();class TM{}class zs{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),o=r.toLowerCase(),s=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof zs?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new zs;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof zs?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Bge{encodeKey(e){return fq(e)}encodeValue(e){return fq(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const jge=/%(\d[a-f0-9])/gi,Hge={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function fq(n){return encodeURIComponent(n).replace(jge,(e,t)=>Hge[t]??e)}function dv(n){return`${n}`}class $s{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Bge,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Uge(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(dv):[dv(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new $s({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(dv(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(dv(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class zge{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function pq(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function mq(n){return typeof Blob<"u"&&n instanceof Blob}function gq(n){return typeof FormData<"u"&&n instanceof FormData}class sp{constructor(e,t,i,r){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function $ge(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new zs),this.context||(this.context=new zge),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new $s,this.urlWithParams=t}serializeBody(){return null===this.body?null:pq(this.body)||mq(this.body)||gq(this.body)||function qge(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof $s?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||gq(this.body)?null:mq(this.body)?this.body.type||null:pq(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof $s?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new sp(t,i,o,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:s})}}var Rn=(()=>((Rn=Rn||{})[Rn.Sent=0]="Sent",Rn[Rn.UploadProgress=1]="UploadProgress",Rn[Rn.ResponseHeader=2]="ResponseHeader",Rn[Rn.DownloadProgress=3]="DownloadProgress",Rn[Rn.Response=4]="Response",Rn[Rn.User=5]="User",Rn))();class Wge{constructor(e,t=200,i="OK"){this.headers=e.headers||new zs,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class MM extends Wge{constructor(e={}){super(e),this.type=Rn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new MM({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function AM(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let kM=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof sp)o=t;else{let l,c;l=r.headers instanceof zs?r.headers:new zs(r.headers),r.params&&(c=r.params instanceof $s?r.params:new $s({fromObject:r.params})),o=new sp(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const s=z(o).pipe(ls(l=>this.handler.handle(l)));if(t instanceof sp||"events"===r.observe)return s;const a=s.pipe(Xi(l=>l instanceof MM));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(oe(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(oe(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(oe(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(oe(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new $s).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,AM(r,i))}post(t,i,r={}){return this.request("POST",t,AM(r,i))}put(t,i,r={}){return this.request("PUT",t,AM(r,i))}}return n.\u0275fac=function(t){return new(t||n)(D(TM))},n.\u0275prov=P({token:n,factory:n.\u0275fac}),n})();const o_e=["*"];let fv;function ap(n){return function s_e(){if(void 0===fv&&(fv=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(fv=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return fv}()?.createHTML(n)||n}function xq(n){return Error(`Unable to find icon with the name "${n}"`)}function Dq(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function Sq(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class yl{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let pv=(()=>{class n{constructor(t,i,r,o){this._httpClient=t,this._sanitizer=i,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,o){return this._addSvgIconConfig(t,i,new yl(r,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,o){const s=this._sanitizer.sanitize(ze.HTML,r);if(!s)throw Sq(r);const a=ap(s);return this._addSvgIconConfig(t,i,new yl("",a,o))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new yl(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const o=this._sanitizer.sanitize(ze.HTML,i);if(!o)throw Sq(i);const s=ap(o);return this._addSvgIconSetConfig(t,new yl("",s,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(ze.RESOURCE_URL,t);if(!i)throw Dq(t);const r=this._cachedIconsByUrl.get(i);return r?z(mv(r)):this._loadSvgIconFromConfig(new yl(t,null)).pipe(tn(o=>this._cachedIconsByUrl.set(i,o)),oe(o=>mv(o)))}getNamedSvgIcon(t,i=""){const r=Iq(i,t);let o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,t),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);const s=this._iconSetConfigs.get(i);return s?this._getSvgFromIconSetConfigs(t,s):Dc(xq(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?z(mv(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(oe(i=>mv(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?z(r):WV(i.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(So(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(ze.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),z(null)})))).pipe(oe(()=>{const s=this._extractIconWithNameFromAnySet(t,i);if(!s)throw xq(t);return s}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const o=i[r];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,t,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(tn(i=>t.svgText=i),oe(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?z(null):this._fetchIcon(t).pipe(tn(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const o=t.querySelector(`[id="${i}"]`);if(!o)return null;const s=o.cloneNode(!0);if(s.removeAttribute("id"),"svg"===s.nodeName.toLowerCase())return this._setSvgAttributes(s,r);if("symbol"===s.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(s),r);const a=this._svgElementFromString(ap("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(ap("<svg></svg>")),r=t.attributes;for(let o=0;o<r.length;o++){const{name:s,value:a}=r[o];"id"!==s&&i.setAttribute(s,a)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,o=r?.withCredentials??!1;if(!this._httpClient)throw function a_e(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const s=this._sanitizer.sanitize(ze.RESOURCE_URL,i);if(!s)throw Dq(i);const a=this._inProgressUrlFetches.get(s);if(a)return a;const l=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(oe(c=>ap(c)),Dg(()=>this._inProgressUrlFetches.delete(s)),nR());return this._inProgressUrlFetches.set(s,l),l}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(Iq(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const o=this._resolvers[r](i,t);if(o)return c_e(o)?new yl(o.url,null,o.options):new yl(o,null)}}}return n.\u0275fac=function(t){return new(t||n)(D(kM,8),D(BC),D(Ae,8),D(yo))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function mv(n){return n.cloneNode(!0)}function Iq(n,e){return n+":"+e}function c_e(n){return!(!n.url||!n.options)}const u_e=Lme(class{constructor(n){this._elementRef=n}}),d_e=new k("MAT_ICON_DEFAULT_OPTIONS"),h_e=new k("mat-icon-location",{providedIn:"root",factory:function f_e(){const n=ye(Ae),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),Tq=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],p_e=Tq.map(n=>`[${n}]`).join(", "),m_e=/^url\(['"]?#(.*?)['"]?\)$/;let g_e=(()=>{class n extends u_e{get inline(){return this._inline}set inline(t){this._inline=Er(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,o,s,a){super(t),this._iconRegistry=i,this._location=o,this._errorHandler=s,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=sn.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${t}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(p_e),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)Tq.forEach(s=>{const a=i[o],l=a.getAttribute(s),c=l?l.match(m_e):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:s,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Hr(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${o.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(y(Me),y(pv),fa("aria-hidden"),y(h_e),y(yo),y(d_e,8))},n.\u0275cmp=st({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(t,i){2&t&&(fi("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),wn("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[K],ngContentSelectors:o_e,decls:1,vars:0,template:function(t,i){1&t&&(Lr(),_t(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),__e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({imports:[Qt,Qt]}),n})();function y_e(n,e){1&n&&(te(0,"span"),qt(1,"Please enter your nickname"),re())}class v_e{isErrorState(e,t){return!!(e&&e.invalid&&(e.dirty||e.touched||t&&t.submitted))}}const b_e=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:(()=>{class n{constructor(t,i){this.router=t,this.formBuilder=i,this.nickname="",this.ref=ys.database().ref("users/"),this.matcher=new v_e}ngOnInit(){localStorage.getItem("nickname")&&this.router.navigate(["/roomlist"]),this.loginForm=this.formBuilder.group({nickname:[null,QV.required]})}onFormSubmit(t){const i=t;this.ref.orderByChild("nickname").equalTo(i.nickname).once("value",r=>{r.exists()?(localStorage.setItem("nickname",i.nickname),this.router.navigate(["/roomlist"])):(ys.database().ref("users/").push().set(i),localStorage.setItem("nickname",i.nickname),this.router.navigate(["/roomlist"]))})}}return n.\u0275fac=function(t){return new(t||n)(y(mi),y(qie))},n.\u0275cmp=st({type:n,selectors:[["app-login"]],decls:14,vars:4,consts:[[1,"container"],[1,"example-form",3,"formGroup","ngSubmit"],[1,"example-full-width"],["matInput","","placeholder","Enter your nickname","formControlName","nickname",3,"errorStateMatcher"],[4,"ngIf"],[1,"button-row"],["type","submit","mat-fab","","color","primary",3,"disabled"]],template:function(t,i){if(1&t&&(te(0,"div",0)(1,"form",1),Tt("ngSubmit",function(){return i.onFormSubmit(i.loginForm.value)}),te(2,"h2"),qt(3,"Please login using your nickname"),re(),te(4,"mat-form-field",2)(5,"mat-label"),qt(6,"Username"),re(),bn(7,"input",3),te(8,"mat-error"),et(9,y_e,2,0,"span",4),re()(),te(10,"div",5)(11,"button",6)(12,"mat-icon"),qt(13,"login"),re()()()()()),2&t){let r;xe(1),Se("formGroup",i.loginForm),xe(6),Se("errorStateMatcher",i.matcher),xe(2),Se("ngIf",!(null!=(r=i.loginForm.get("nickname"))&&r.valid)&&(null==(r=i.loginForm.get("nickname"))?null:r.touched)),xe(2),Se("disabled",!i.loginForm.valid)}},dependencies:[pg,RB,Fc,Kg,vB,yh,OE,Lge,Rge,SM,Ege,g_e],styles:[".example-container[_ngcontent-%COMP%]{position:relative;padding:5px}.example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}.example-full-width[_ngcontent-%COMP%]:nth-last-child(0){margin-bottom:10px}.button-row[_ngcontent-%COMP%]{margin:10px 0}.mat-flat-button[_ngcontent-%COMP%]{margin:5px}"]}),n})()}];let w_e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({imports:[$V.forRoot(b_e),$V]}),n})();ki("firebase","9.19.1","app");const Mq="@firebase/database";let NM="";class D_e{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Dn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:wh(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class S_e{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return vr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const kq=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new D_e(e)}}catch{}return new S_e},vl=kq("localStorage"),OM=kq("sessionStorage"),Lu=new Eh("@firebase/database"),Rq=function(){let n=1;return function(){return n++}}(),Nq=function(n){const e=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r>=55296&&r<=56319){const o=r-55296;i++,F(i<n.length,"Surrogate pair missing trail surrogate."),r=65536+(o<<10)+(n.charCodeAt(i)-56320)}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=63&r|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=63&r|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=63&r|128)}return e}(n),t=new pre;t.update(e);const i=t.digest();return BE.encodeByteArray(i)},lp=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=lp.apply(null,i):e+="object"==typeof i?Dn(i):i,e+=" "}return e};let bl=null,Oq=!0;const mn=function(...n){if(!0===Oq&&(Oq=!1,null===bl&&!0===OM.get("logging_enabled")&&function(n,e){F(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Lu.logLevel=ke.VERBOSE,bl=Lu.log.bind(Lu),e&&OM.set("logging_enabled",!0)):"function"==typeof n?bl=n:(bl=null,OM.remove("logging_enabled"))}(!0)),bl){const e=lp.apply(null,n);bl(e)}},cp=function(n){return function(...e){mn(n,...e)}},PM=function(...n){const e="FIREBASE INTERNAL ERROR: "+lp(...n);Lu.error(e)},no=function(...n){const e=`FIREBASE FATAL ERROR: ${lp(...n)}`;throw Lu.error(e),new Error(e)},$n=function(...n){const e="FIREBASE WARNING: "+lp(...n);Lu.warn(e)},gv=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},qs="[MIN_NAME]",Ko="[MAX_NAME]",wl=function(n,e){if(n===e)return 0;if(n===qs||e===Ko)return-1;if(e===qs||n===Ko)return 1;{const t=Vq(n),i=Vq(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},M_e=function(n,e){return n===e?0:n<e?-1:1},up=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Dn(e))},FM=function(n){if("object"!=typeof n||null===n)return Dn(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=Dn(e[i]),t+=":",t+=FM(n[e[i]]);return t+="}",t},Fq=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function gn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Lq=function(n){F(!gv(n),"Invalid JSON number");const i=1023;let r,o,s,a,l;0===n?(o=0,s=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=a+i,s=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(o=0,s=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(l=11;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(r?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},N_e=new RegExp("^-?(0*)\\d{1,10}$"),Vq=function(n){if(N_e.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Vu=function(n){try{n()}catch(e){setTimeout(()=>{throw $n("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},F_e=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},dp=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class L_e{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){$n(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class V_e{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(mn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$n(e)}}let hp=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const zq=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Wq="websocket",Gq="long_polling";class VM{constructor(e,t,i,r,o=!1,s="",a=!1,l=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=vl.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&vl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Kq(n,e,t){let i;if(F("string"==typeof e,"typeof type must == string"),F("object"==typeof t,"typeof params must == object"),e===Wq)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Gq)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function B_e(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return gn(t,(o,s)=>{r.push(o+"="+s)}),i+r.join("&")}class U_e{constructor(){this.counters_={}}incrementCounter(e,t=1){vr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return function Qie(n){return vh(void 0,n)}(this.counters_)}}const BM={},UM={};function jM(n){const e=n.toString();return BM[e]||(BM[e]=new U_e),BM[e]}class H_e{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Vu(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ws{constructor(e,t,i,r,o,s,a){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=cp(e),this.stats_=jM(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),Kq(t,Gq,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new H_e(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if(Mo()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new HM((...o)=>{const[s,a,l,c,u]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===s)this.id=a,this.password=l;else{if("close"!==s)throw new Error("Unrecognized command received: "+s);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&zq.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ws.forceAllow_=!0}static forceDisallow(){Ws.forceDisallow_=!0}static isAvailable(){return!(Mo()||!Ws.forceAllow_&&(Ws.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Dn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=e2(t),r=Fq(i,1840);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Mo())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Dn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class HM{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Mo())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Rq(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=HM.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){mn("frame writing exception"),a.stack&&mn(a.stack),mn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||mn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const s=this.pendingSegs.shift();i=i+"&seg"+r+"="+s.seg+"&ts"+r+"="+s.ts+"&d"+r+"="+s.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){Mo()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{mn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let yv=null;typeof MozWebSocket<"u"?yv=MozWebSocket:typeof WebSocket<"u"&&(yv=WebSocket);let Bu=(()=>{class n{constructor(t,i,r,o,s,a,l){this.connId=t,this.applicationId=r,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=cp(this.connId),this.stats_=jM(i),this.connURL=n.connectionURL_(i,a,l,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,o,s){const a={v:"5"};return!Mo()&&typeof location<"u"&&location.hostname&&zq.test(location.hostname)&&(a.r="f"),i&&(a.s=i),r&&(a.ls=r),o&&(a.ac=o),s&&(a.p=s),Kq(t,Wq,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,vl.set("previous_websocket_failure",!0);try{let r;if(Mo()){r={headers:{"User-Agent":`Firebase/5/${NM}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const s=process.env,a=0===this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new yv(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==yv&&!n.forceDisallow_}static previouslyFailed(){return vl.isInMemoryStorage||!0===vl.get("previous_websocket_failure")}markConnectionHealthy(){vl.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=wh(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(F(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=Dn(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=Fq(i,16384);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),t4=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ws,Bu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=Bu&&Bu.isAvailable();let r=i&&!Bu.previouslyFailed();if(t.webSocketOnly&&(i||$n("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Bu];else{const o=this.transports_=[];for(const s of n.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class c4{constructor(e,t,i,r,o,s,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=cp("c:"+this.id+":"),this.transportManager_=new t4(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=dp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=up("t",e),i=up("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=up("t",e),i=up("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=up("t",e);if("d"in e){const i=e.d;if("h"===t){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?PM("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):PM("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&$n("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),dp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):dp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(vl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class u4{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class d4{constructor(e){this.allowedEvents_=e,this.listeners_={},F(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===t&&(!i||i===r[o].context))return void r.splice(o,1)}validateEventType_(e){F(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class vv extends d4{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!UE()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new vv}getInitialEvent(e){return F("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const h4=32,f4=768;class Ye{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function je(){return new Ye("")}function be(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Gs(n){return n.pieces_.length-n.pieceNum_}function it(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ye(n.pieces_,e)}function $M(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function fp(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function p4(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ye(e,0)}function wt(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Ye)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new Ye(t,0)}function we(n){return n.pieceNum_>=n.pieces_.length}function li(n,e){const t=be(n),i=be(e);if(null===t)return e;if(t===i)return li(it(n),it(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function qM(n,e){if(Gs(n)!==Gs(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function ir(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Gs(n)>Gs(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class dye{constructor(e,t){this.errorPrefix_=t,this.parts_=fp(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=f_(this.parts_[i]);m4(this)}}function m4(n){if(n.byteLength_>f4)throw new Error(n.errorPrefix_+"has a key path longer than "+f4+" bytes ("+n.byteLength_+").");if(n.parts_.length>h4)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+h4+") or object contains a cycle "+Cl(n))}function Cl(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class WM extends d4{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new WM}getInitialEvent(e){return F("visible"===e,"Unknown event type: "+e),[this.visible_]}}const pp=1e3;let wv,El=(()=>{class n extends u4{constructor(t,i,r,o,s,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=cp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=pp,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Mo())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");WM.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&vv.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const o=++this.requestNumber_,s={r:o,a:t,b:i};this.log_(Dn(s)),F(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[o]=r)}get(t){this.initConnection_();const i=new l_,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?i.resolve(l):i.reject(l)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,o){this.initConnection_();const s=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),F(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),F(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const l={onComplete:o,hashFn:i,query:t,tag:r};this.listens.get(a).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);const s={p:r};t.tag&&(s.q=i._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,l=>{const c=l.d,u=l.s;n.warnOnListenWarnings_(c,i),(this.listens.get(r)&&this.listens.get(r).get(o))===t&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(r,o),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&vr(t,"w")){const r=Bc(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',s=i._path.toString();$n(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=u_(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=function(n){const t=u_(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{const s=o.s,a=o.d||"error";this.authToken_===t&&("ok"===s?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),F(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,t._queryObject,i)}sendUnlisten_(t,i,r,o){this.log_("Unlisten on "+t+" for "+i);const s={p:t};o&&(s.q=r,s.t=o),this.sendRequest("n",s)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,o){const s={p:i,d:r};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(t,i,r,o){this.putInternal("p",t,i,r,o)}merge(t,i,r,o){this.putInternal("m",t,i,r,o)}putInternal(t,i,r,o,s){this.initConnection_();const a={p:i,d:r};void 0!==s&&(a.h=s),this.outstandingPuts_.push({action:t,request:a,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,s=>{this.log_(i+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Dn(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):PM("Unrecognized action received from server: "+Dn(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){F(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=pp,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=pp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=pp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return m(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),s=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,o())};t.realtime_={close:u,sendRequest:function(f){F(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)}};const h=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[f,p]=yield Promise.all([t.authTokenProvider_.getToken(h),t.appCheckTokenProvider_.getToken(h)]);l?mn("getToken() completed but was canceled"):(mn("getToken() completed. Creating connection."),t.authToken_=f&&f.accessToken,t.appCheckToken_=p&&p.token,c=new c4(s,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,o,g=>{$n(g+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(f){t.log_("Failed to get token: "+f),l||(t.repoInfo_.nodeAdmin&&$n(f),u())}}})()}interrupt(t){mn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){mn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],HE(this.interruptReasons_)&&(this.reconnectDelay_=pp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(s=>FM(s)).join("$"):"default";const o=this.removeListen_(t,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,i){const r=new Ye(t).toString();let o;if(this.listens.has(r)){const s=this.listens.get(r);o=s.get(i),s.delete(i),0===s.size&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(t,i){mn("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){mn("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";Mo()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+NM.replace(/\./g,"-")]=1,UE()?t["framework.cordova"]=1:c_()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=vv.getInstance().currentlyOnline();return HE(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Ee{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ee(e,t)}}class bv{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Ee(qs,e),r=new Ee(qs,t);return 0!==this.compare(i,r)}minPost(){return Ee.MIN}}class y4 extends bv{static get __EMPTY_NODE(){return wv}static set __EMPTY_NODE(e){wv=e}compare(e,t){return wl(e.name,t.name)}isDefinedOn(e){throw Vc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ee.MIN}maxPost(){return new Ee(Ko,wv)}makePost(e,t){return F("string"==typeof e,"KeyIndex indexValue must always be a string."),new Ee(e,wv)}toString(){return".key"}}const io=new y4;class Cv{constructor(e,t,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let KM,xr=(()=>{class n{constructor(t,i,r,o,s){this.key=t,this.value=i,this.color=r??n.RED,this.left=o??wi.EMPTY_NODE,this.right=s??wi.EMPTY_NODE}copy(t,i,r,o,s){return new n(t??this.key,i??this.value,r??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let o=this;const s=r(t,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(t,i,r),null):0===s?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(t,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return wi.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,o;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return wi.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class wi{constructor(e,t=wi.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new wi(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,xr.BLACK,null,null))}remove(e){return new wi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xr.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Cv(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Cv(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Cv(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Cv(this.root_,null,this.comparator_,!0,e)}}function vye(n,e){return wl(n.name,e.name)}function GM(n,e){return wl(n,e)}wi.EMPTY_NODE=new class yye{copy(e,t,i,r,o){return this}insert(e,t,i){return new xr(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const v4=function(n){return"number"==typeof n?"number:"+Lq(n):"string:"+n},b4=function(n){if(n.isLeafNode()){const e=n.val();F("string"==typeof e||"number"==typeof e||"object"==typeof e&&vr(e,".sv"),"Priority must be a string or number.")}else F(n===KM||n.isEmpty(),"priority of unexpected type.");F(n===KM||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let w4,C4,E4,Uu=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,F(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),b4(this.priorityNode_)}static set __childrenNodeConstructor(t){w4=t}static get __childrenNodeConstructor(){return w4}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return we(t)?this:".priority"===be(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=be(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:(F(".priority"!==r||1===Gs(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(it(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+v4(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?Lq(this.value_):this.value_,this.lazyHash_=Nq(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(F(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(i),s=n.VALUE_TYPE_ORDER.indexOf(r);return F(o>=0,"Unknown leaf type: "+i),F(s>=0,"Unknown leaf type: "+r),o===s?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const lt=new class Eye extends bv{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),o=i.compareTo(r);return 0===o?wl(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ee.MIN}maxPost(){return new Ee(Ko,new Uu("[PRIORITY-POST]",E4))}makePost(e,t){const i=C4(e);return new Ee(t,new Uu("[PRIORITY-POST]",i))}toString(){return".priority"}},xye=Math.log(2);class Dye{constructor(e){this.count=parseInt(Math.log(e+1)/xye,10),this.current_=this.count-1;const r=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ev=function(n,e,t,i){n.sort(e);const r=function(l,c){const u=c-l;let d,h;if(0===u)return null;if(1===u)return d=n[l],h=t?t(d):d,new xr(h,d.node,xr.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=r(l,f),g=r(f+1,c);return d=n[f],h=t?t(d):d,new xr(h,d.node,xr.BLACK,p,g)}},a=function(l){let c=null,u=null,d=n.length;const h=function(p,g){const _=d-p,v=d;d-=p;const E=r(_+1,v),b=n[_],N=t?t(b):b;f(new xr(N,b.node,g,null,E))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const g=l.nextBitIsOne(),_=Math.pow(2,l.count-(p+1));g?h(_,xr.BLACK):(h(_,xr.BLACK),h(_,xr.RED))}return u}(new Dye(n.length));return new wi(i||e,a)};let YM;const ju={};class Yo{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return F(ju&&lt,"ChildrenNode.ts has not been loaded"),YM=YM||new Yo({".priority":ju},{".priority":lt}),YM}get(e){const t=Bc(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof wi?t:null}hasIndex(e){return vr(this.indexSet_,e.toString())}addIndex(e,t){F(e!==io,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=t.getIterator(Ee.Wrap);let a,s=o.getNext();for(;s;)r=r||e.isDefinedOn(s.node),i.push(s),s=o.getNext();a=r?Ev(i,e.getCompare()):ju;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new Yo(u,c)}addToIndexes(e,t){const i=d_(this.indexes_,(r,o)=>{const s=Bc(this.indexSet_,o);if(F(s,"Missing index implementation for "+o),r===ju){if(s.isDefinedOn(e.node)){const a=[],l=t.getIterator(Ee.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Ev(a,s.getCompare())}return ju}{const a=t.get(e.name);let l=r;return a&&(l=l.remove(new Ee(e.name,a))),l.insert(e,e.node)}});return new Yo(i,this.indexSet_)}removeFromIndexes(e,t){const i=d_(this.indexes_,r=>{if(r===ju)return r;{const o=t.get(e.name);return o?r.remove(new Ee(e.name,o)):r}});return new Yo(i,this.indexSet_)}}let mp,fe=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&b4(this.priorityNode_),this.children_.isEmpty()&&F(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return mp||(mp=new n(new wi(GM),null,Yo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||mp}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?mp:i}}getChild(t){const i=be(t);return null===i?this:this.getImmediateChild(i).getChild(it(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if(F(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new Ee(t,i);let o,s;i.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(t,i),s=this.indexMap_.addToIndexes(r,this.children_));const a=o.isEmpty()?mp:this.priorityNode_;return new n(o,a,s)}}updateChild(t,i){const r=be(t);if(null===r)return i;{F(".priority"!==be(t)||1===Gs(t),".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(it(t),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,o=0,s=!0;if(this.forEachChild(lt,(a,l)=>{i[a]=l.val(t),r++,s&&n.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!t&&s&&o<2*r){const a=[];for(const l in i)a[l]=i[l];return a}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+v4(this.getPriority().val())+":"),this.forEachChild(lt,(i,r)=>{const o=r.hash();""!==o&&(t+=":"+i+":"+o)}),this.lazyHash_=""===t?"":Nq(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const o=this.resolveIndex_(r);if(o){const s=o.getPredecessorKey(new Ee(t,i));return s?s.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new Ee(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new Ee(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,Ee.Wrap);let s=o.peek();for(;null!=s&&i.compare(s,t)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,Ee.Wrap);let s=o.peek();for(;null!=s&&i.compare(s,t)>0;)o.getNext(),s=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===gp?-1:0}withIndex(t){if(t===io||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===io||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(lt),o=i.getIterator(lt);let s=r.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=o.getNext()}return null===s&&null===a}return!1}return!1}}resolveIndex_(t){return t===io?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const gp=new class Sye extends fe{constructor(){super(new wi(GM),fe.EMPTY_NODE,Yo.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return fe.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Ee,{MIN:{value:new Ee(qs,fe.EMPTY_NODE)},MAX:{value:new Ee(Ko,gp)}}),y4.__EMPTY_NODE=fe.EMPTY_NODE,Uu.__childrenNodeConstructor=fe,function bye(n){KM=n}(gp),function Cye(n){E4=n}(gp);const Iye=!0;function Dt(n,e=null){if(null===n)return fe.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),F(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Uu(n,Dt(e));if(n instanceof Array||!Iye){let t=fe.EMPTY_NODE;return gn(n,(i,r)=>{if(vr(n,i)&&"."!==i.substring(0,1)){const o=Dt(r);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(i,o))}}),t.updatePriority(Dt(e))}{const t=[];let i=!1;if(gn(n,(s,a)=>{if("."!==s.substring(0,1)){const l=Dt(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),t.push(new Ee(s,l)))}}),0===t.length)return fe.EMPTY_NODE;const o=Ev(t,vye,s=>s.name,GM);if(i){const s=Ev(t,lt.getCompare());return new fe(o,Dt(e),new Yo({".priority":s},{".priority":lt}))}return new fe(o,Dt(e),Yo.Default)}}!function wye(n){C4=n}(Dt);class QM extends bv{constructor(e){super(),this.indexPath_=e,F(!we(e)&&".priority"!==be(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),o=i.compareTo(r);return 0===o?wl(e.name,t.name):o}makePost(e,t){const i=Dt(e),r=fe.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ee(t,r)}maxPost(){const e=fe.EMPTY_NODE.updateChild(this.indexPath_,gp);return new Ee(Ko,e)}toString(){return fp(this.indexPath_,0).join("/")}}const XM=new class Tye extends bv{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?wl(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ee.MIN}maxPost(){return Ee.MAX}makePost(e,t){const i=Dt(e);return new Ee(t,i)}toString(){return".value"}};function yp(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class JM{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=lt}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return F(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return F(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qs}hasEnd(){return this.endSet_}getIndexEndValue(){return F(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return F(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ko}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return F(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===lt}copy(){const e=new JM;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function D4(n){const e={};if(n.isDefault())return e;let t;if(n.index_===lt?t="$priority":n.index_===XM?t="$value":n.index_===io?t="$key":(F(n.index_ instanceof QM,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Dn(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=Dn(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+Dn(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=Dn(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+Dn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function S4(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==lt&&(e.i=n.index_.toString()),e}class Dv extends u4{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=cp("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(F(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const s=Dv.getListenId_(e,i),a={};this.listens_[s]=a;const l=D4(e._queryParams);this.restRequest_(o+".json",l,(c,u)=>{let d=u;if(404===c&&(d=null,c=null),null===c&&this.onDataUpdate_(o,d,!1,i),Bc(this.listens_,s)===a){let h;h=c?401===c?"permission_denied":"rest_error:"+c:"ok",r(h,null)}})}unlisten(e,t){const i=Dv.getListenId_(e,t);delete this.listens_[i]}get(e){const t=D4(e._queryParams),i=e._path.toString(),r=new l_;return this.restRequest_(i+".json",t,(o,s)=>{let a=s;404===o&&(a=null,o=null),null===o?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(t.auth=r.accessToken),o&&o.token&&(t.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Oa(t);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=wh(a.responseText)}catch{$n("Failed to parse JSON response for "+s+": "+a.responseText)}i(null,l)}else 401!==a.status&&404!==a.status&&$n("Got unsuccessful REST response for "+s+" Status: "+a.status),i(a.status);i=null}},a.open("GET",s,!0),a.send()})}}class Fye{constructor(){this.rootNode_=fe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Sv(){return{value:null,children:new Map}}function zu(n,e,t){if(we(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=be(e);n.children.has(i)||n.children.set(i,Sv()),zu(n.children.get(i),e=it(e),t)}}function iA(n,e,t){null!==n.value?t(e,n.value):function Lye(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{iA(r,new Ye(e.toString()+"/"+i),t)})}class Vye{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&gn(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class jye{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Vye(e);const i=1e4+2e4*Math.random();dp(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;gn(e,(r,o)=>{o>0&&vr(this.statsToReport_,r)&&(t[r]=o,i=!0)}),i&&this.server_.reportStats(t),dp(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var rr=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(rr||(rr={})),rr))();function sA(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Iv{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=rr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(we(this.path)){if(null!=this.affectedTree.value)return F(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ye(e));return new Iv(je(),t,this.revert)}}return F(be(this.path)===e,"operationForChild called for unrelated child."),new Iv(it(this.path),this.affectedTree,this.revert)}}class xl{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=rr.OVERWRITE}operationForChild(e){return we(this.path)?new xl(this.source,je(),this.snap.getImmediateChild(e)):new xl(this.source,it(this.path),this.snap)}}class $u{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=rr.MERGE}operationForChild(e){if(we(this.path)){const t=this.children.subtree(new Ye(e));return t.isEmpty()?null:t.value?new xl(this.source,je(),t.value):new $u(this.source,je(),t)}return F(be(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new $u(this.source,it(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ks{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(we(e))return this.isFullyInitialized()&&!this.filtered_;const t=be(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function wp(n,e,t,i,r,o){const s=i.filter(a=>a.type===t);s.sort((a,l)=>function qye(n,e,t){if(null==e.childName||null==t.childName)throw Vc("Should only compare child_ events.");const i=new Ee(e.childName,e.snapshotNode),r=new Ee(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,a,l)),s.forEach(a=>{const l=function $ye(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,o);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function Tv(n,e){return{eventCache:n,serverCache:e}}function Cp(n,e,t,i){return Tv(new Ks(e,t,i),n.serverCache)}function T4(n,e,t,i){return Tv(n.eventCache,new Ks(e,t,i))}function Mv(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Dl(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let aA;class ct{constructor(e,t=(()=>(aA||(aA=new wi(M_e)),aA))()){this.value=e,this.children=t}static fromObject(e){let t=new ct(null);return gn(e,(i,r)=>{t=t.set(new Ye(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:je(),value:this.value};if(we(e))return null;{const i=be(e),r=this.children.get(i);if(null!==r){const o=r.findRootMostMatchingPathAndValue(it(e),t);return null!=o?{path:wt(new Ye(i),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(we(e))return this;{const t=be(e),i=this.children.get(t);return null!==i?i.subtree(it(e)):new ct(null)}}set(e,t){if(we(e))return new ct(t,this.children);{const i=be(e),o=(this.children.get(i)||new ct(null)).set(it(e),t),s=this.children.insert(i,o);return new ct(this.value,s)}}remove(e){if(we(e))return this.children.isEmpty()?new ct(null):new ct(null,this.children);{const t=be(e),i=this.children.get(t);if(i){const r=i.remove(it(e));let o;return o=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&o.isEmpty()?new ct(null):new ct(this.value,o)}return this}}get(e){if(we(e))return this.value;{const t=be(e),i=this.children.get(t);return i?i.get(it(e)):null}}setTree(e,t){if(we(e))return t;{const i=be(e),o=(this.children.get(i)||new ct(null)).setTree(it(e),t);let s;return s=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new ct(this.value,s)}}fold(e){return this.fold_(je(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(wt(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,je(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(we(e))return null;{const o=be(e),s=this.children.get(o);return s?s.findOnPath_(it(e),wt(t,o),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,je(),t)}foreachOnPath_(e,t,i){if(we(e))return this;{this.value&&i(t,this.value);const r=be(e),o=this.children.get(r);return o?o.foreachOnPath_(it(e),wt(t,r),i):new ct(null)}}foreach(e){this.foreach_(je(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(wt(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class Dr{constructor(e){this.writeTree_=e}static empty(){return new Dr(new ct(null))}}function Ep(n,e,t){if(we(e))return new Dr(new ct(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let o=i.value;const s=li(r,e);return o=o.updateChild(s,t),new Dr(n.writeTree_.set(r,o))}{const r=new ct(t),o=n.writeTree_.setTree(e,r);return new Dr(o)}}}function lA(n,e,t){let i=n;return gn(t,(r,o)=>{i=Ep(i,wt(e,r),o)}),i}function M4(n,e){if(we(e))return Dr.empty();{const t=n.writeTree_.setTree(e,new ct(null));return new Dr(t)}}function cA(n,e){return null!=Sl(n,e)}function Sl(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(li(t.path,e)):null}function A4(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(lt,(i,r)=>{e.push(new Ee(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new Ee(i,r.value))}),e}function Ys(n,e){if(we(e))return n;{const t=Sl(n,e);return new Dr(null!=t?new ct(t):n.writeTree_.subtree(e))}}function uA(n){return n.writeTree_.isEmpty()}function qu(n,e){return k4(je(),n.writeTree_,e)}function k4(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{".priority"===r?(F(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):t=k4(wt(n,r),o,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(wt(n,".priority"),i)),t}}function Av(n,e){return F4(e,n)}function Xye(n,e){if(n.snap)return ir(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ir(wt(n.path,t),e))return!0;return!1}function Jye(n){return n.visible}function R4(n,e,t){let i=Dr.empty();for(let r=0;r<n.length;++r){const o=n[r];if(e(o)){const s=o.path;let a;if(o.snap)ir(t,s)?(a=li(t,s),i=Ep(i,a,o.snap)):ir(s,t)&&(a=li(s,t),i=Ep(i,je(),o.snap.getChild(a)));else{if(!o.children)throw Vc("WriteRecord should have .snap or .children");if(ir(t,s))a=li(t,s),i=lA(i,a,o.children);else if(ir(s,t))if(a=li(s,t),we(a))i=lA(i,je(),o.children);else{const l=Bc(o.children,be(a));if(l){const c=l.getChild(it(a));i=Ep(i,je(),c)}}}}}return i}function N4(n,e,t,i,r){if(i||r){const o=Ys(n.visibleWrites,e);return!r&&uA(o)?t:r||null!=t||cA(o,je())?qu(R4(n.allWrites,function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(ir(c.path,e)||ir(e,c.path))},e),t||fe.EMPTY_NODE):null}{const o=Sl(n.visibleWrites,e);if(null!=o)return o;{const s=Ys(n.visibleWrites,e);return uA(s)?t:null!=t||cA(s,je())?qu(s,t||fe.EMPTY_NODE):null}}}function kv(n,e,t,i){return N4(n.writeTree,n.treePath,e,t,i)}function dA(n,e){return function eve(n,e,t){let i=fe.EMPTY_NODE;const r=Sl(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(lt,(o,s)=>{i=i.updateImmediateChild(o,s)}),i;if(t){const o=Ys(n.visibleWrites,e);return t.forEachChild(lt,(s,a)=>{const l=qu(Ys(o,new Ye(s)),a);i=i.updateImmediateChild(s,l)}),A4(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}return A4(Ys(n.visibleWrites,e)).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}(n.writeTree,n.treePath,e)}function O4(n,e,t,i){return function tve(n,e,t,i,r){F(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=wt(e,t);if(cA(n.visibleWrites,o))return null;{const s=Ys(n.visibleWrites,o);return uA(s)?r.getChild(t):qu(s,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function Rv(n,e){return function ive(n,e){return Sl(n.visibleWrites,e)}(n.writeTree,wt(n.treePath,e))}function hA(n,e,t){return function nve(n,e,t,i){const r=wt(e,t),o=Sl(n.visibleWrites,r);return null!=o?o:i.isCompleteForChild(t)?qu(Ys(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function P4(n,e){return F4(wt(n.treePath,e),n.writeTree)}function F4(n,e){return{treePath:n,writeTree:e}}class ave{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;F("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),F(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(i,yp(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(i,function _p(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(i,r.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(i,function Hu(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw Vc("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,yp(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const L4=new class lve{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class fA{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new Ks(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hA(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Dl(this.viewCache_),o=function sve(n,e,t,i,r,o){return function rve(n,e,t,i,r,o,s){let a;const l=Ys(n.visibleWrites,e),c=Sl(l,je());if(null!=c)a=c;else{if(null==t)return[];a=qu(l,t)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const u=[],d=s.getCompare(),h=o?a.getReverseIteratorFrom(i,s):a.getIteratorFrom(i,s);let f=h.getNext();for(;f&&u.length<r;)0!==d(f,i)&&u.push(f),f=h.getNext();return u}}(n.writeTree,n.treePath,e,t,i,r,o)}(this.writes_,r,t,1,i,e);return 0===o.length?null:o[0]}}function V4(n,e,t,i,r,o){const s=e.eventCache;if(null!=Rv(i,t))return e;{let a,l;if(we(t))if(F(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Dl(e),d=dA(i,c instanceof fe?c:fe.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{const c=kv(i,Dl(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,o)}else{const c=be(t);if(".priority"===c){F(1===Gs(t),"Can't have a priority with additional path components");const u=s.getNode();l=e.serverCache.getNode();const d=O4(i,t,u,l);a=null!=d?n.filter.updatePriority(u,d):s.getNode()}else{const u=it(t);let d;if(s.isCompleteForChild(c)){l=e.serverCache.getNode();const h=O4(i,t,s.getNode(),l);d=null!=h?s.getNode().getImmediateChild(c).updateChild(u,h):s.getNode().getImmediateChild(c)}else d=hA(i,c,e.serverCache);a=null!=d?n.filter.updateChild(s.getNode(),c,d,u,r,o):s.getNode()}}return Cp(e,a,s.isFullyInitialized()||we(t),n.filter.filtersNodes())}}function Nv(n,e,t,i,r,o,s,a){const l=e.serverCache;let c;const u=s?n.filter:n.filter.getIndexedFilter();if(we(t))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(t,i);c=u.updateFullNode(l.getNode(),f,null)}else{const f=be(t);if(!l.isCompleteForPath(t)&&Gs(t)>1)return e;const p=it(t),_=l.getNode().getImmediateChild(f).updateChild(p,i);c=".priority"===f?u.updatePriority(l.getNode(),_):u.updateChild(l.getNode(),f,_,p,L4,null)}const d=T4(e,c,l.isFullyInitialized()||we(t),u.filtersNodes());return V4(n,d,t,r,new fA(r,d,o),a)}function pA(n,e,t,i,r,o,s){const a=e.eventCache;let l,c;const u=new fA(r,e,o);if(we(t))c=n.filter.updateFullNode(e.eventCache.getNode(),i,s),l=Cp(e,c,!0,n.filter.filtersNodes());else{const d=be(t);if(".priority"===d)c=n.filter.updatePriority(e.eventCache.getNode(),i),l=Cp(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=it(t),f=a.getNode().getImmediateChild(d);let p;if(we(h))p=i;else{const g=u.getCompleteChild(d);p=null!=g?".priority"===$M(h)&&g.getChild(p4(h)).isEmpty()?g:g.updateChild(h,i):fe.EMPTY_NODE}l=f.equals(p)?e:Cp(e,n.filter.updateChild(a.getNode(),d,p,h,u,s),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function B4(n,e){return n.eventCache.isCompleteForChild(e)}function U4(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function mA(n,e,t,i,r,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=we(t)?i:new ct(null).setTree(t,i);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const p=U4(0,e.serverCache.getNode().getImmediateChild(d),h);l=Nv(n,l,new Ye(d),p,r,o,s,a)}}),c.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&null===h.value;if(!u.hasChild(d)&&!f){const g=U4(0,e.serverCache.getNode().getImmediateChild(d),h);l=Nv(n,l,new Ye(d),g,r,o,s,a)}}),l}function bve(n,e){const t=Dl(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!we(e)&&!t.getImmediateChild(be(e)).isEmpty())?t.getChild(e):null}function z4(n,e,t,i){e.type===rr.MERGE&&null!==e.source.queryId&&(F(Dl(n.viewCache_),"We should always have a full cache before handling merges"),F(Mv(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,o=function dve(n,e,t,i,r){const o=new ave;let s,a;if(t.type===rr.OVERWRITE){const c=t;c.source.fromUser?s=pA(n,e,c.path,c.snap,i,r,o):(F(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!we(c.path),s=Nv(n,e,c.path,c.snap,i,r,a,o))}else if(t.type===rr.MERGE){const c=t;c.source.fromUser?s=function fve(n,e,t,i,r,o,s){let a=e;return i.foreach((l,c)=>{const u=wt(t,l);B4(e,be(u))&&(a=pA(n,a,u,c,r,o,s))}),i.foreach((l,c)=>{const u=wt(t,l);B4(e,be(u))||(a=pA(n,a,u,c,r,o,s))}),a}(n,e,c.path,c.children,i,r,o):(F(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),s=mA(n,e,c.path,c.children,i,r,a,o))}else if(t.type===rr.ACK_USER_WRITE){const c=t;s=c.revert?function gve(n,e,t,i,r,o){let s;if(null!=Rv(i,t))return e;{const a=new fA(i,e,r),l=e.eventCache.getNode();let c;if(we(t)||".priority"===be(t)){let u;if(e.serverCache.isFullyInitialized())u=kv(i,Dl(e));else{const d=e.serverCache.getNode();F(d instanceof fe,"serverChildren would be complete if leaf node"),u=dA(i,d)}c=n.filter.updateFullNode(l,u,o)}else{const u=be(t);let d=hA(i,u,e.serverCache);null==d&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),c=null!=d?n.filter.updateChild(l,u,d,it(t),a,o):e.eventCache.getNode().hasChild(u)?n.filter.updateChild(l,u,fe.EMPTY_NODE,it(t),a,o):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=kv(i,Dl(e)),s.isLeafNode()&&(c=n.filter.updateFullNode(c,s,o)))}return s=e.serverCache.isFullyInitialized()||null!=Rv(i,je()),Cp(e,c,s,n.filter.filtersNodes())}}(n,e,c.path,i,r,o):function pve(n,e,t,i,r,o,s){if(null!=Rv(r,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=i.value){if(we(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Nv(n,e,t,l.getNode().getChild(t),r,o,a,s);if(we(t)){let c=new ct(null);return l.getNode().forEachChild(io,(u,d)=>{c=c.set(new Ye(u),d)}),mA(n,e,t,c,r,o,a,s)}return e}{let c=new ct(null);return i.foreach((u,d)=>{const h=wt(t,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),mA(n,e,t,c,r,o,a,s)}}(n,e,c.path,c.affectedTree,i,r,o)}else{if(t.type!==rr.LISTEN_COMPLETE)throw Vc("Unknown operation type: "+t.type);s=function mve(n,e,t,i,r){const o=e.serverCache;return V4(n,T4(e,o.getNode(),o.isFullyInitialized()||we(t),o.isFiltered()),t,i,L4,r)}(n,e,t.path,i,o)}const l=o.getChanges();return function hve(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=Mv(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&t.push(function x4(n){return{type:"value",snapshotNode:n}}(Mv(e)))}}(e,s,l),{viewCache:s,changes:l}}(n.processor_,r,e,t,i);return function uve(n,e){F(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),F(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),F(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,function $4(n,e,t,i){return function zye(n,e,t,i){const r=[],o=[];return e.forEach(s=>{"child_changed"===s.type&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(function Mye(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(s.childName,s.snapshotNode))}),wp(n,r,"child_removed",e,i,t),wp(n,r,"child_added",e,i,t),wp(n,r,"child_moved",o,i,t),wp(n,r,"child_changed",e,i,t),wp(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}(n,o.changes,o.viewCache.eventCache.getNode(),null)}let Ov,Fv;function gA(n,e,t,i){const r=e.source.queryId;if(null!==r){const o=n.views.get(r);return F(null!=o,"SyncTree gave us an op for an invalid query."),z4(o,e,t,i)}{let o=[];for(const s of n.views.values())o=o.concat(z4(s,e,t,i));return o}}function Qs(n,e){let t=null;for(const i of n.views.values())t=t||bve(i,e);return t}class Q4{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ct(null),this.pendingWriteTree_=function ove(){return{visibleWrites:Dr.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function _A(n,e,t,i,r){return function Gye(n,e,t,i,r){F(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Ep(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?Wu(n,new xl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Zs(n,e,t=!1){const i=function Yye(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function Qye(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);F(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,o=!1,s=n.allWrites.length-1;for(;r&&s>=0;){const a=n.allWrites[s];a.visible&&(s>=t&&Xye(a,i.path)?r=!1:ir(i.path,a.path)&&(o=!0)),s--}return!!r&&(o?(function Zye(n){n.visibleWrites=R4(n.allWrites,Jye,je()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=M4(n.visibleWrites,i.path):gn(i.children,l=>{n.visibleWrites=M4(n.visibleWrites,wt(i.path,l))}),!0))}(n.pendingWriteTree_,e)){let o=new ct(null);return null!=i.snap?o=o.set(je(),!0):gn(i.children,s=>{o=o.set(new Ye(s),!0)}),Wu(n,new Iv(i.path,o,t))}return[]}function xp(n,e,t){return Wu(n,new xl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Vv(n,e,t){const r=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(s,a)=>{const c=Qs(a,li(s,e));if(c)return c});return N4(r,e,o,t,!0)}function Wu(n,e){return Z4(e,n.syncPointTree_,null,Av(n.pendingWriteTree_,je()))}function Z4(n,e,t,i){if(we(n.path))return J4(n,e,t,i);{const r=e.get(je());null==t&&null!=r&&(t=Qs(r,je()));let o=[];const s=be(n.path),a=n.operationForChild(s),l=e.children.get(s);if(l&&a){const c=t?t.getImmediateChild(s):null,u=P4(i,s);o=o.concat(Z4(a,l,c,u))}return r&&(o=o.concat(gA(r,n,i,t))),o}}function J4(n,e,t,i){const r=e.get(je());null==t&&null!=r&&(t=Qs(r,je()));let o=[];return e.children.inorderTraversal((s,a)=>{const l=t?t.getImmediateChild(s):null,c=P4(i,s),u=n.operationForChild(s);u&&(o=o.concat(J4(u,a,l,c)))}),r&&(o=o.concat(gA(r,n,i,t))),o}function vA(n,e){return n.tagToQueryMap.get(e)}function bA(n){const e=n.indexOf("$");return F(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ye(n.substr(0,e))}}function wA(n,e,t){const i=n.syncPointTree_.get(e);return F(i,"Missing sync point for query tag that we're tracking"),gA(i,t,Av(n.pendingWriteTree_,e),null)}class CA{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new CA(t)}node(){return this.node_}}class EA{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=wt(this.path_,e);return new EA(this.syncTree_,t)}node(){return Vv(this.syncTree_,this.path_)}}const jve=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},tW=function(n,e,t){return n&&"object"==typeof n?(F(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Hve(n[".sv"],e,t):"object"==typeof n[".sv"]?zve(n[".sv"],e):void F(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Hve=function(n,e,t){if("timestamp"===n)return t.timestamp;F(!1,"Unexpected server value: "+n)},zve=function(n,e,t){n.hasOwnProperty("increment")||F(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&F(!1,"Unexpected increment value: "+i);const r=e.node();if(F(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const s=r.getValue();return"number"!=typeof s?i:s+i},nW=function(n,e,t,i){return DA(e,new EA(t,n),i)},xA=function(n,e,t){return DA(n,new CA(e),t)};function DA(n,e,t){const i=n.getPriority().val(),r=tW(i,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const s=n,a=tW(s.getValue(),e,t);return a!==s.getValue()||r!==s.getPriority().val()?new Uu(a,Dt(r)):n}{const s=n;return o=s,r!==s.getPriority().val()&&(o=o.updatePriority(new Uu(r))),s.forEachChild(lt,(a,l)=>{const c=DA(l,e.getImmediateChild(a),t);c!==l&&(o=o.updateImmediateChild(a,c))}),o}}class SA{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function Uv(n,e){let t=e instanceof Ye?e:new Ye(e),i=n,r=be(t);for(;null!==r;){const o=Bc(i.node.children,r)||{children:{},childCount:0};i=new SA(r,i,o),t=it(t),r=be(t)}return i}function Il(n){return n.node.value}function IA(n,e){n.node.value=e,TA(n)}function iW(n){return n.node.childCount>0}function jv(n,e){gn(n.node.children,(t,i)=>{e(new SA(t,n,i))})}function rW(n,e,t,i){t&&!i&&e(n),jv(n,r=>{rW(r,e,!0,i)}),t&&i&&e(n)}function Ip(n){return new Ye(null===n.parent?n.name:Ip(n.parent)+"/"+n.name)}function TA(n){null!==n.parent&&function Wve(n,e,t){const i=function $ve(n){return void 0===Il(n)&&!iW(n)}(t),r=vr(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,TA(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,TA(n))}(n.parent,n.name,n)}const Gve=/[\[\].#$\/\u0000-\u001F\u007F]/,Kve=/[\[\].#$\u0000-\u001F\u007F]/,MA=10485760,Hv=function(n){return"string"==typeof n&&0!==n.length&&!Gve.test(n)},Mp=function(n,e,t){const i=t instanceof Ye?new dye(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Cl(i));if("function"==typeof e)throw new Error(n+"contains a function "+Cl(i)+" with contents = "+e.toString());if(gv(e))throw new Error(n+"contains "+e.toString()+" "+Cl(i));if("string"==typeof e&&e.length>MA/3&&f_(e)>MA)throw new Error(n+"contains a string greater than "+MA+" utf8 bytes "+Cl(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,o=!1;if(gn(e,(s,a)=>{if(".value"===s)r=!0;else if(".priority"!==s&&".sv"!==s&&(o=!0,!Hv(s)))throw new Error(n+" contains an invalid key ("+s+") "+Cl(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function hye(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=f_(e),m4(n)})(i,s),Mp(n,a,i),function fye(n){const e=n.parts_.pop();n.byteLength_-=f_(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&o)throw new Error(n+' contains ".value" child '+Cl(i)+" in addition to actual children.")}},aW=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Hv(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!Kve.test(n)}(n)}(t))throw new Error(function h_(n,e){return`${n} failed: ${e} argument `}(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Zve{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Li(n,e,t){(function zv(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],o=r.getPath();null!==t&&!qM(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(r)}t&&n.eventLists_.push(t)})(n,t),function cW(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(Jve(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,i=>ir(i,e)||ir(e,i))}function Jve(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();bl&&mn("event: "+t.toString()),Vu(i)}}}const uW="repo_interrupt",ebe=25;class tbe{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Zve,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Sv(),this.transactionQueueTree_=new SA,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dW(n){const t=n.infoData_.getNode(new Ye(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function kp(n){return jve({timestamp:dW(n)})}function hW(n,e,t,i,r){n.dataUpdateCount++;const o=new Ye(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let s=[];if(r)if(i){const l=d_(t,c=>Dt(c));s=function Pve(n,e,t,i){const r=vA(n,i);if(r){const o=bA(r),s=o.path,a=o.queryId,l=li(s,e),c=ct.fromObject(t);return wA(n,s,new $u(sA(a),l,c))}return[]}(n.serverSyncTree_,o,l,r)}else{const l=Dt(t);s=function X4(n,e,t,i){const r=vA(n,i);if(null!=r){const o=bA(r),s=o.path,a=o.queryId,l=li(s,e);return wA(n,s,new xl(sA(a),l,t))}return[]}(n.serverSyncTree_,o,l,r)}else if(i){const l=d_(t,c=>Dt(c));s=function Rve(n,e,t){const i=ct.fromObject(t);return Wu(n,new $u({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,o,l)}else{const l=Dt(t);s=xp(n.serverSyncTree_,o,l)}let a=o;s.length>0&&(a=Ku(n,o)),Li(n.eventQueue_,a,s)}function fW(n,e){RA(n,"connected",e),!1===e&&function sbe(n){Gu(n,"onDisconnectEvents");const e=kp(n),t=Sv();iA(n.onDisconnect_,je(),(r,o)=>{const s=nW(r,o,n.serverSyncTree_,e);zu(t,r,s)});let i=[];iA(t,je(),(r,o)=>{i=i.concat(xp(n.serverSyncTree_,r,o));const s=function FA(n,e){const t=Ip(gW(n,e)),i=Uv(n.transactionQueueTree_,e);return function qve(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{LA(n,r)}),LA(n,i),rW(i,r=>{LA(n,r)}),t}(n,r);Ku(n,s)}),n.onDisconnect_=Sv(),Li(n.eventQueue_,je(),i)}(n)}function RA(n,e,t){const i=new Ye("/.info/"+e),r=Dt(t);n.infoData_.updateSnapshot(i,r);const o=xp(n.infoSyncTree_,i,r);Li(n.eventQueue_,i,o)}function $v(n){return n.nextWriteId_++}function Gu(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),mn(t,...e)}function PA(n,e,t){return Vv(n.serverSyncTree_,e,t)||fe.EMPTY_NODE}function qv(n,e=n.transactionQueueTree_){if(e||Wv(n,e),Il(e)){const t=_W(n,e);F(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function fbe(n,e,t){const i=t.map(c=>c.currentWriteId),r=PA(n,e,i);let o=r;const s=r.hash();for(let c=0;c<t.length;c++){const u=t[c];F(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=li(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}const a=o.val(!0),l=e;n.server_.put(l.toString(),a,c=>{Gu(n,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const d=[];for(let h=0;h<t.length;h++)t[h].status=2,u=u.concat(Zs(n.serverSyncTree_,t[h].currentWriteId)),t[h].onComplete&&d.push(()=>t[h].onComplete(null,!0,t[h].currentOutputSnapshotResolved)),t[h].unwatcher();Wv(n,Uv(n.transactionQueueTree_,e)),qv(n,n.transactionQueueTree_),Li(n.eventQueue_,e,u);for(let h=0;h<d.length;h++)Vu(d[h])}else{if("datastale"===c)for(let d=0;d<t.length;d++)t[d].status=3===t[d].status?4:0;else{$n("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=c}Ku(n,e)}},s)}(n,Ip(e),t)}else iW(e)&&jv(e,t=>{qv(n,t)})}function Ku(n,e){const t=gW(n,e),i=Ip(t);return function pbe(n,e,t){if(0===e.length)return;const i=[];let r=[];const s=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=li(t,l.path);let d,u=!1;if(F(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,d=l.abortReason,r=r.concat(Zs(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=ebe)u=!0,d="maxretry",r=r.concat(Zs(n.serverSyncTree_,l.currentWriteId,!0));else{const h=PA(n,l.path,s);l.currentInputSnapshot=h;const f=e[a].update(h.val());if(void 0!==f){Mp("transaction failed: Data returned ",f,l.path);let p=Dt(f);"object"==typeof f&&null!=f&&vr(f,".priority")||(p=p.updatePriority(h.getPriority()));const _=l.currentWriteId,v=kp(n),E=xA(p,h,v);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=E,l.currentWriteId=$v(n),s.splice(s.indexOf(_),1),r=r.concat(_A(n.serverSyncTree_,l.path,E,l.currentWriteId,l.applyLocally)),r=r.concat(Zs(n.serverSyncTree_,_,!0))}else u=!0,d="nodata",r=r.concat(Zs(n.serverSyncTree_,l.currentWriteId,!0))}Li(n.eventQueue_,t,r),r=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&i.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}Wv(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)Vu(i[a]);qv(n,n.transactionQueueTree_)}(n,_W(n,t),i),i}function gW(n,e){let t,i=n.transactionQueueTree_;for(t=be(e);null!==t&&void 0===Il(i);)i=Uv(i,t),t=be(e=it(e));return i}function _W(n,e){const t=[];return yW(n,e,t),t.sort((i,r)=>i.order-r.order),t}function yW(n,e,t){const i=Il(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);jv(e,r=>{yW(n,r,t)})}function Wv(n,e){const t=Il(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,IA(e,t.length>0?t:void 0)}jv(e,i=>{Wv(n,i)})}function LA(n,e){const t=Il(e);if(t){const i=[];let r=[],o=-1;for(let s=0;s<t.length;s++)3===t[s].status||(1===t[s].status?(F(o===s-1,"All SENT items should be at beginning of queue."),o=s,t[s].status=3,t[s].abortReason="set"):(F(0===t[s].status,"Unexpected transaction status in abort"),t[s].unwatcher(),r=r.concat(Zs(n.serverSyncTree_,t[s].currentWriteId,!0)),t[s].onComplete&&i.push(t[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?IA(e,void 0):t.length=o+1,Li(n.eventQueue_,Ip(e),r);for(let s=0;s<i.length;s++)Vu(i[s])}}const VA=function(n,e){const t=_be(n),i=t.namespace;return"firebase.com"===t.domain&&no(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&no("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&$n("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new VM(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new Ye(t.pathString)}},_be=function(n){let e="",t="",i="",r="",o="",s=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");-1===u&&(u=n.length);let d=n.indexOf("?");-1===d&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(r=function mbe(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}(n.substring(u,d)));const h=function gbe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):$n(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,d)));c=e.indexOf(":"),c>=0?(s="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if("localhost"===f.toLowerCase())t="localhost";else if(f.split(".").length<=2)t=f;else{const p=e.indexOf(".");i=e.substring(0,p).toLowerCase(),t=e.substring(p+1),o=i}"ns"in h&&(o=h.ns)}return{host:e,port:l,domain:t,subdomain:i,secure:s,scheme:a,pathString:r,namespace:o}};class Vi{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return we(this._path)?null:$M(this._path)}get ref(){return new Sr(this._repo,this._path)}get _queryIdentifier(){const e=S4(this._queryParams),t=FM(e);return"{}"===t?"default":t}get _queryObject(){return S4(this._queryParams)}isEqual(e){if(!((e=Y(e))instanceof Vi))return!1;const t=this._repo===e._repo,i=qM(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function cye(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Sr extends Vi{constructor(e,t){super(e,t,new JM,!1)}get parent(){const e=p4(this._path);return null===e?null:new Sr(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function Eve(n){F(!Ov,"__referenceConstructor has already been defined"),Ov=n})(Sr),function Tve(n){F(!Fv,"__referenceConstructor has already been defined"),Fv=n}(Sr);const kbe="FIREBASE_DATABASE_EMULATOR_HOST",UA={};let DW=!1;class Lbe{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function nbe(n,e,t){if(n.stats_=jM(n.repoInfo_),n.forceRestClient_||F_e())n.server_=new Dv(n.repoInfo_,(i,r,o,s)=>{hW(n,i,r,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>fW(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Dn(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new El(n.repoInfo_,e,(i,r,o,s)=>{hW(n,i,r,o,s)},i=>{fW(n,i)},i=>{!function ibe(n,e){gn(e,(t,i)=>{RA(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function j_e(n,e){const t=n.toString();return UM[t]||(UM[t]=e()),UM[t]}(n.repoInfo_,()=>new jye(n.stats_,n.server_)),n.infoData_=new Fye,n.infoSyncTree_=new Q4({startListening:(i,r,o,s)=>{let a=[];const l=n.infoData_.getNode(i._path);return l.isEmpty()||(a=xp(n.infoSyncTree_,i._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),RA(n,"connected",!1),n.serverSyncTree_=new Q4({startListening:(i,r,o,s)=>(n.server_.listen(i,o,r,(a,l)=>{const c=s(a,l);Li(n.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Sr(this._repo,je())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Obe(n,e){const t=UA[e];(!t||t[n.key]!==n)&&no(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function mW(n){n.persistentConnection_&&n.persistentConnection_.interrupt(uW)}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&no("Cannot call "+e+" on a deleted database.")}}El.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},El.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Ube(n){(function x_e(n){NM=n})(_s),Ao(new br("database",(e,{instanceIdentifier:t})=>function Nbe(n,e,t,i,r){let o=i||n.options.databaseURL;void 0===o&&(n.options.projectId||no("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),mn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,s=VA(o,r),a=s.repoInfo;typeof process<"u"&&process.env&&(c=process.env[kbe]),c?(l=!0,o=`http://${c}?ns=${a.namespace}`,s=VA(o,r),a=s.repoInfo):l=!s.repoInfo.secure;const u=r&&l?new hp(hp.OWNER):new V_e(n.name,n.options,e);aW("Invalid Firebase Database URL",s),we(s.path)||no("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function Pbe(n,e,t,i){let r=UA[e.name];r||(r={},UA[e.name]=r);let o=r[n.toURLString()];return o&&no("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new tbe(n,DW,t,i),r[n.toURLString()]=o,o}(a,n,u,new L_e(n.name,t));return new Lbe(d,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),ki(Mq,"0.14.4",n),ki(Mq,"0.14.4","esm2017")}();let zbe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=st({type:n,selectors:[["app-header"]],decls:3,vars:0,consts:[["href","/"],["src","./assets/logo_large.png","alt","EspenVentures KlG",1,"center"]],template:function(t,i){1&t&&(te(0,"header")(1,"a",0),bn(2,"img",1),re()())},styles:["header[_ngcontent-%COMP%]{height:120px;background-color:#fff;color:#fff;border-bottom:2px solid rgb(0,0,0)}.center[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto}header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-left:10px;margin-top:10px;height:100px}h1[_ngcontent-%COMP%]{font-size:large}h2[_ngcontent-%COMP%]{font-size:medium}h3[_ngcontent-%COMP%]{font-size:small}"]}),n})(),$be=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=st({type:n,selectors:[["app-footer"]],decls:10,vars:0,consts:[[1,"Company"],[1,"kontakt"],["href","https://espenventures.com/about-us/","target","_self"]],template:function(t,i){1&t&&(te(0,"footer")(1,"div",0)(2,"h3"),qt(3,"EspenVentures KlG"),re()(),te(4,"div",1)(5,"a",2),qt(6,"Kontakt"),re()(),te(7,"div",0)(8,"h1"),qt(9,"Copyright \xa9 2023"),re()()())},styles:["footer[_ngcontent-%COMP%]{height:100px;background-color:#035d3e;color:#fff;border-top:2px solid rgb(0,0,0)}h1[_ngcontent-%COMP%]{font-size:small;text-align:center}h2[_ngcontent-%COMP%]{font-size:medium}h3[_ngcontent-%COMP%]{font-size:small;text-align:center;margin-top:1px}a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited{text-decoration:none;color:#fff}a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:active{text-decoration:underline;color:#fff}.kontakt[_ngcontent-%COMP%]{display:block;font-size:small;text-align:center;margin-left:auto;margin-right:auto;z-index:9999;font-weight:700}"]}),n})(),qbe=(()=>{class n{constructor(){this.chatMessage=""}addMessage(t){console.log(t),alert(t),this.chatMessage=""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=st({type:n,selectors:[["app-chatbar"]],decls:6,vars:3,consts:[[1,"chat-container"],["type","text","placeholder","Schreiben...",1,"form-control","chat-input",3,"ngModel","ngModelChange","keyup.enter"],[1,"btn","btn-default","send-button",3,"disabled","click"]],template:function(t,i){1&t&&(te(0,"div",0)(1,"textarea",1),Tt("ngModelChange",function(o){return i.chatMessage=o})("keyup.enter",function(){return i.addMessage(i.chatMessage)}),re(),te(2,"button",2),Tt("click",function(){return i.addMessage(i.chatMessage)}),qt(3," Senden\n"),re()(),te(4,"p"),qt(5),re()),2&t&&(xe(1),Se("ngModel",i.chatMessage),xe(1),Se("disabled",!i.chatMessage),xe(3),rs(" ",i.chatMessage," "))},dependencies:[Fc,Kg,r_],styles:[".chat-container[_ngcontent-%COMP%]{display:flex;align-items:center;border:1px solid #ccc;border-radius:5px;padding:10px}.chat-input[_ngcontent-%COMP%]{flex:1;height:38px;font-size:16px;border:none}.send-button[_ngcontent-%COMP%]{height:38px;font-size:16px;margin-left:10px;border-radius:0 5px 5px 0}"]}),n})();function Wbe(n,e){if(1&n&&(te(0,"span",8),qt(1),re()),2&n){const t=Vt(2);xe(1),Hm(t.nickname)}}function Gbe(n,e){if(1&n){const t=kd();te(0,"button",9),Tt("click",function(){return zl(t),$l(Vt(2).showChangeNickname=!0)}),qt(1,"Benutzername w\xe4hlen"),re()}}function Kbe(n,e){if(1&n){const t=kd();te(0,"button",9),Tt("click",function(){return zl(t),$l(Vt(2).showChangeNickname=!0)}),qt(1,"Change"),re()}}function Ybe(n,e){if(1&n&&(te(0,"div"),et(1,Wbe,2,1,"span",6),et(2,Gbe,2,0,"button",7),et(3,Kbe,2,0,"button",7),re()),2&n){const t=Vt();xe(1),Se("ngIf",t.nickname),xe(1),Se("ngIf",!t.nickname),xe(1),Se("ngIf",t.nickname)}}function Qbe(n,e){if(1&n){const t=kd();te(0,"div")(1,"input",10),Tt("ngModelChange",function(r){return zl(t),$l(Vt().nickname=r)}),re(),te(2,"button",11),Tt("click",function(){return zl(t),$l(Vt().saveNickname())}),qt(3,"Speichern"),re()()}if(2&n){const t=Vt();xe(1),Se("ngModel",t.nickname)}}let Xbe=(()=>{class n{constructor(){this.showChangeNickname=!1,this.nickname=""}saveNickname(){""!==this.nickname.trim()?this.showChangeNickname=!1:alert("Der Benutzername darf nicht leer sein!")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=st({type:n,selectors:[["app-chatbox"]],decls:9,vars:2,consts:[[1,"chatbox-container"],[1,"chatbox"],[1,"nickname"],[1,"nickname-label"],[1,"nickname-input"],[4,"ngIf"],["class","nickname-text",4,"ngIf"],["class","change-nickname-button",3,"click",4,"ngIf"],[1,"nickname-text"],[1,"change-nickname-button",3,"click"],["type","text","placeholder","Nickname...",2,"width","90px",3,"ngModel","ngModelChange"],[1,"save-nickname-button",3,"click"]],template:function(t,i){1&t&&(te(0,"div",0),bn(1,"div",1),te(2,"div",2)(3,"div",3)(4,"span"),qt(5,"Nickname:"),re()(),te(6,"div",4),et(7,Ybe,4,3,"div",5),et(8,Qbe,4,1,"div",5),re()()()),2&t&&(xe(7),Se("ngIf",!i.showChangeNickname),xe(1),Se("ngIf",i.showChangeNickname))},dependencies:[pg,Fc,Kg,r_],styles:[".chatbox-container[_ngcontent-%COMP%]{display:flex;height:100%;width:100%;overflow:hidden}.nickname-container[_ngcontent-%COMP%]{background-color:#035d3e;color:#fff;padding:10px;width:200px;box-sizing:border-box;border:1px solid black;border-radius:5px}label[_ngcontent-%COMP%]{display:block;margin-bottom:10px}input[type=text][_ngcontent-%COMP%]{width:100%;box-sizing:border-box;padding:5px;border:none;border-radius:10px;font-size:16px;line-height:1.5}.chatbox[_ngcontent-%COMP%]{flex-grow:1;border:1px solid #ccc;margin-left:10px;margin-right:10px;padding:10px;border-radius:5px;overflow-y:scroll}.nickname-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-bottom:5px}.change-nickname-button[_ngcontent-%COMP%], .save-nickname-button[_ngcontent-%COMP%]{background-color:#4caf50;margin-left:10px;border:none;color:#fff;padding:5px 10px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin-top:5px;cursor:pointer;border-radius:5px}.nickname[_ngcontent-%COMP%]{width:200px;display:flex;flex-direction:column;justify-content:center;align-items:center;border-left:1px solid black}.nickname-label[_ngcontent-%COMP%]{margin-bottom:10px}.nickname-text[_ngcontent-%COMP%]{font-weight:700}.nickname-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:10px}"]}),n})();const IW={apiKey:"AIzaSyBLm6nzB_PQUKDG6LjT7UybuE6m6I1h770",authDomain:"chatapp-95178.firebaseapp.com",databaseURL:"https://chatapp-95178-default-rtdb.europe-west1.firebasedatabase.app",projectId:"chatapp-95178",storageBucket:"chatapp-95178.appspot.com",messagingSenderId:"434978678153",appId:"1:434978678153:web:f50b772befdaddbe58ed58"};!function Vbe(n=g2(),e){const t=JE(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=(n=>{const e=(n=>{var e,t;return null===(t=null===(e=a_())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]})(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),i]:[e.substring(0,t),i]})("database");i&&function Bbe(n,e,t,i={}){(n=Y(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&no("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&no('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new hp(hp.OWNER);else if(i.mockUserToken){const s="string"==typeof i.mockUserToken?i.mockUserToken:t2(i.mockUserToken,n.app.options.projectId);o=new hp(s)}!function Rbe(n,e,t,i){n.repoInfo_=new VM(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,e,t,o)}(t,...i)}}(m_(IW));let Jbe=(()=>{class n{constructor(){this.title="webapp",ys.initializeApp(IW)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=st({type:n,selectors:[["app-root"]],decls:24,vars:0,consts:[["id","wrap"],["id","header"],[1,"container"],[1,"row"],[1,"col"],["id","main"],["id","footer"]],template:function(t,i){1&t&&(te(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),bn(5,"app-header"),re()()()(),te(6,"div",5)(7,"div",2)(8,"div",3)(9,"div",4)(10,"main")(11,"div",2),bn(12,"app-chatbox"),re()()()()()(),te(13,"div",5)(14,"div",2)(15,"div",3)(16,"div",4)(17,"main"),bn(18,"app-chatbar"),re()()()()(),te(19,"div",6)(20,"div",2)(21,"div",3)(22,"div",4),bn(23,"app-footer"),re()()()()())},dependencies:[zbe,$be,qbe,Xbe],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}#wrap[_ngcontent-%COMP%]{min-height:100%}#footer[_ngcontent-%COMP%]{position:top;clear:both}#main[_ngcontent-%COMP%]{overflow:auto;padding-bottom:180px}#footer[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;margin-top:-180px;height:180px;clear:both}.container[_ngcontent-%COMP%]{padding:20px}"]}),n})();function TW(n){return new x(3e3,!1)}function Owe(){return typeof window<"u"&&typeof window.document<"u"}function jA(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ta(n){switch(n.length){case 0:return new op;case 1:return n[0];default:return new J3(n)}}function MW(n,e,t,i,r=new Map,o=new Map){const s=[],a=[];let l=-1,c=null;if(i.forEach(u=>{const d=u.get("offset"),h=d==l,f=h&&c||new Map;u.forEach((p,g)=>{let _=g,v=p;if("offset"!==g)switch(_=e.normalizePropertyName(_,s),v){case DM:v=r.get(g);break;case Wo:v=o.get(g);break;default:v=e.normalizeStyleValue(g,_,v,s)}f.set(_,v)}),h||a.push(f),c=f,l=d}),s.length)throw function Cwe(n){return new x(3502,!1)}();return a}function HA(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&zA(t,"start",n)));break;case"done":n.onDone(()=>i(t&&zA(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&zA(t,"destroy",n)))}}function zA(n,e,t){const o=$A(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),s=n._data;return null!=s&&(o._data=s),o}function $A(n,e,t,i,r="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function Bi(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function AW(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let qA=(n,e)=>!1,kW=(n,e,t)=>[],RW=null;function WA(n){const e=n.parentNode||n.host;return e===RW?null:e}(jA()||typeof Element<"u")&&(Owe()?(RW=(()=>document.documentElement)(),qA=(n,e)=>{for(;e;){if(e===n)return!0;e=WA(e)}return!1}):qA=(n,e)=>n.contains(e),kW=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let Ml=null,NW=!1;const OW=qA,PW=kW;let FW=(()=>{class n{validateStyleProperty(t){return function Fwe(n){Ml||(Ml=function Lwe(){return typeof document<"u"?document.body:null}()||{},NW=!!Ml.style&&"WebkitAppearance"in Ml.style);let e=!0;return Ml.style&&!function Pwe(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Ml.style,!e&&NW&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Ml.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return OW(t,i)}getParentElement(t){return WA(t)}query(t,i,r){return PW(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,s,a=[],l){return new op(r,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:n.\u0275fac}),n})(),GA=(()=>{class n{}return n.NOOP=new FW,n})();const Vwe=1e3,KA="ng-enter",Qv="ng-leave",Xv="ng-trigger",Zv=".ng-trigger",VW="ng-animating",YA=".ng-animating";function Qo(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:QA(parseFloat(e[1]),e[2])}function QA(n,e){return"s"===e?n*Vwe:n}function Jv(n,e,t){return n.hasOwnProperty("duration")?n:function Uwe(n,e,t){let r,o=0,s="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(TW()),{duration:0,delay:0,easing:""};r=QA(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(o=QA(parseFloat(l),a[4]));const c=a[5];c&&(s=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(function ewe(){return new x(3100,!1)}()),a=!0),o<0&&(e.push(function twe(){return new x(3101,!1)}()),a=!0),a&&e.splice(l,0,TW())}return{duration:r,delay:o,easing:s}}(n,e,t)}function Op(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function BW(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function na(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function jW(n,e,t){return t?e+":"+t+";":""}function HW(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=jW(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=jW(0,$we(t),n.style[t]));n.setAttribute("style",e)}function so(n,e,t){n.style&&(e.forEach((i,r)=>{const o=ZA(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i}),jA()&&HW(n))}function Al(n,e){n.style&&(e.forEach((t,i)=>{const r=ZA(i);n.style[r]=""}),jA()&&HW(n))}function Pp(n){return Array.isArray(n)?1==n.length?n[0]:X3(n):n}const XA=new RegExp("{{\\s*(.+?)\\s*}}","g");function zW(n){let e=[];if("string"==typeof n){let t;for(;t=XA.exec(n);)e.push(t[1]);XA.lastIndex=0}return e}function Fp(n,e,t){const i=n.toString(),r=i.replace(XA,(o,s)=>{let a=e[s];return null==a&&(t.push(function iwe(n){return new x(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function eb(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const zwe=/-+([a-z0-9])/g;function ZA(n){return n.replace(zwe,(...e)=>e[1].toUpperCase())}function $we(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ui(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function rwe(n){return new x(3004,!1)}()}}function $W(n,e){return window.getComputedStyle(n)[e]}const ib="*";function Qwe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Xwe(n,e,t){if(":"==n[0]){const l=function Zwe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function ywe(n){return new x(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function _we(n){return new x(3015,!1)}()),e;const r=i[1],o=i[2],s=i[3];e.push(qW(r,s));"<"==o[0]&&!(r==ib&&s==ib)&&e.push(qW(s,r))}(i,t,e)):t.push(n),t}const rb=new Set(["true","1"]),ob=new Set(["false","0"]);function qW(n,e){const t=rb.has(n)||ob.has(n),i=rb.has(e)||ob.has(e);return(r,o)=>{let s=n==ib||n==r,a=e==ib||e==o;return!s&&t&&"boolean"==typeof r&&(s=r?rb.has(n):ob.has(n)),!a&&i&&"boolean"==typeof o&&(a=o?rb.has(e):ob.has(e)),s&&a}}const Jwe=new RegExp("s*:selfs*,?","g");function JA(n,e,t,i){return new e0e(n).build(e,t,i)}class e0e{constructor(e){this._driver=e}build(e,t,i){const r=new i0e(t);return this._resetContextStyleTimingState(r),Ui(this,Pp(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const o=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push(function swe(){return new x(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,o.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,s.push(l)}else t.errors.push(function awe(){return new x(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{zW(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&(eb(o.values()),t.errors.push(function lwe(n,e){return new x(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Ui(this,Pp(e.animation),t);return{type:1,matchers:Qwe(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:kl(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Ui(this,i,t)),options:kl(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const o=e.steps.map(s=>{t.currentTime=i;const a=Ui(this,s,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:o,options:kl(e.options)}}visitAnimate(e,t){const i=function o0e(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return ek(Jv(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=ek(0,0,"");return o.dynamic=!0,o.strValue=t,o}const r=Jv(t,e);return ek(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:Ze({});if(5==o.type)r=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;const c={};i.easing&&(c.easing=i.easing),s=Ze(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(s,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===Wo?i.push(a):t.errors.push(new x(3002,!1)):i.push(BW(a));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let l of a.values())if(l.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l);let d=!0;u&&(o!=r&&o>=u.startTime&&r<=u.endTime&&(t.errors.push(function uwe(n,e,t,i,r){return new x(3010,!1)}()),d=!1),o=u.startTime),d&&c.set(l,{startTime:o,endTime:r}),t.options&&function Hwe(n,e,t){const i=e.params||{},r=zW(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(function nwe(n){return new x(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function dwe(){return new x(3011,!1)}()),i;let o=0;const s=[];let a=!1,l=!1,c=0;const u=e.steps.map(v=>{const E=this._makeStyleAst(v,t);let b=null!=E.offset?E.offset:function r0e(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(E.styles),N=0;return null!=b&&(o++,N=E.offset=b),l=l||N<0||N>1,a=a||N<c,c=N,s.push(N),E});l&&t.errors.push(function hwe(){return new x(3012,!1)}()),a&&t.errors.push(function fwe(){return new x(3200,!1)}());const d=e.steps.length;let h=0;o>0&&o<d?t.errors.push(function pwe(){return new x(3202,!1)}()):0==o&&(h=1/(d-1));const f=d-1,p=t.currentTime,g=t.currentAnimateTimings,_=g.duration;return u.forEach((v,E)=>{const b=h>0?E==f?1:h*E:s[E],N=b*_;t.currentTime=p+g.delay+N,g.duration=N,this._validateStyleAst(v,t),v.offset=b,i.styles.push(v)}),i}visitReference(e,t){return{type:8,animation:Ui(this,Pp(e.animation),t),options:kl(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:kl(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:kl(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[o,s]=function t0e(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Jwe,"")),n=n.replace(/@\*/g,Zv).replace(/@\w+/g,t=>Zv+"-"+t.slice(1)).replace(/:animating/g,YA),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,Bi(t.collectedStyles,t.currentQuerySelector,new Map);const a=Ui(this,Pp(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:kl(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function mwe(){return new x(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:Jv(e.timings,t.errors,!0);return{type:12,animation:Ui(this,Pp(e.animation),t),timings:i,options:null}}}class i0e{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function kl(n){return n?(n=Op(n)).params&&(n.params=function n0e(n){return n?Op(n):null}(n.params)):n={},n}function ek(n,e,t){return{duration:n,delay:e,easing:t}}function tk(n,e,t,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}class sb{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const l0e=new RegExp(":enter","g"),u0e=new RegExp(":leave","g");function nk(n,e,t,i,r,o=new Map,s=new Map,a,l,c=[]){return(new d0e).buildKeyframes(n,e,t,i,r,o,s,a,l,c)}class d0e{buildKeyframes(e,t,i,r,o,s,a,l,c,u=[]){c=c||new sb;const d=new ik(e,t,c,r,o,u,[]);d.options=l;const h=l.delay?Qo(l.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([s],null,d.errors,l),Ui(this,i,d);const f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let g=f.length-1;g>=0;g--){const _=f[g];if(_.element===t){p=_;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,l)}return f.length?f.map(p=>p.buildKeyframes()):[tk(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const o=r?.delay;if(o){const s="number"==typeof o?o:Qo(Fp(o,r?.params??{},t.errors));i.delayNextStep(s)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime;const s=null!=i.duration?Qo(i.duration):null,a=null!=i.delay?Qo(i.delay):null;return 0!==s&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Ui(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=ab);const s=Qo(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>Ui(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?Qo(e.options.delay):0;e.steps.forEach(s=>{const a=t.createSubContext(e.options);o&&a.delayNextStep(o),Ui(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return Jv(t.params?Fp(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?Qo(r.delay):0;o&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=ab);let s=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);o&&d.delayNextStep(o),c===t.element&&(l=d.currentTimeline),Ui(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1);let l=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;Ui(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const ab={};class ik{constructor(e,t,i,r,o,s,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ab,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new lb(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Qo(i.duration)),null!=i.delay&&(r.delay=Qo(i.delay));const o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Fp(o[a],s,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,o=new ik(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=ab,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new h0e(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(l0e,"."+this._enterClassName)).replace(u0e,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!o&&0==a.length&&s.push(function gwe(n){return new x(3014,!1)}()),a}}class lb{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new lb(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Wo),this._currentKeyframe.set(t,Wo);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const o=r&&r.params||{},s=function f0e(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let o of i)t.set(o,Wo)}else na(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of s){const c=Fp(l,o,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Wo),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=na(a,new Map,this._backFill);c.forEach((u,d)=>{u===DM?e.add(d):u===Wo&&t.add(d)}),i||c.set("offset",l/this.duration),r.push(c)});const o=e.size?eb(e.values()):[],s=t.size?eb(t.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return tk(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}}class h0e extends lb{constructor(e,t,i,r,o,s,a=!1){super(e,t,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],s=i+t,a=t/s,l=na(e[0]);l.set("offset",0),o.push(l);const c=na(e[0]);c.set("offset",KW(a)),o.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let h=na(e[d]);const f=h.get("offset");h.set("offset",KW((t+f*i)/s)),o.push(h)}i=s,t=0,r="",e=o}return tk(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function KW(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class rk{}const p0e=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class m0e extends rk{normalizePropertyName(e,t){return ZA(e)}normalizeStyleValue(e,t,i,r){let o="";const s=i.toString().trim();if(p0e.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function owe(n,e){return new x(3005,!1)}())}return s+o}}function YW(n,e,t,i,r,o,s,a,l,c,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const ok={};class QW{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function g0e(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,s,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||ok,p=this.buildStyles(i,a&&a.params||ok,d),g=l&&l.params||ok,_=this.buildStyles(r,g,d),v=new Set,E=new Map,b=new Map,N="void"===r,W={params:_0e(g,h),delay:this.ast.options?.delay},H=u?[]:nk(e,t,this.ast.animation,o,s,p,_,W,c,d);let Le=0;if(H.forEach(ji=>{Le=Math.max(ji.duration+ji.delay,Le)}),d.length)return YW(t,this._triggerName,i,r,N,p,_,[],[],E,b,Le,d);H.forEach(ji=>{const Ir=ji.element,VG=Bi(E,Ir,new Set);ji.preStyleProps.forEach(Nl=>VG.add(Nl));const Hp=Bi(b,Ir,new Set);ji.postStyleProps.forEach(Nl=>Hp.add(Nl)),Ir!==t&&v.add(Ir)});const Xt=eb(v.values());return YW(t,this._triggerName,i,r,N,p,_,H,Xt,E,b,Le)}}function _0e(n,e){const t=Op(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class y0e{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=Op(this.defaultParams);return Object.keys(e).forEach(o=>{const s=e[o];null!==s&&(r[o]=s)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=Fp(s,r,t));const l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),i.set(a,s)})}),i}}class b0e{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new y0e(r.style,r.options&&r.options.params||{},i))}),XW(this.states,"true","1"),XW(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new QW(e,r,this.states))}),this.fallbackTransition=function w0e(n,e,t){return new QW(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(s=>s.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function XW(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const C0e=new sb;class E0e{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],r=[],o=JA(this._driver,t,i,r);if(i.length)throw function Ewe(n){return new x(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,i){const r=e.element,o=MW(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],o=this._animations.get(e);let s;const a=new Map;if(o?(s=nk(this._driver,t,o,KA,Qv,new Map,new Map,i,C0e,r),s.forEach(u=>{const d=Bi(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(function xwe(){return new x(3300,!1)}()),s=[]),r.length)throw function Dwe(n){return new x(3504,!1)}();a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,Wo))})});const c=ta(s.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Swe(n){return new x(3301,!1)}();return t}listen(e,t,i,r){const o=$A(t,"","","");return HA(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const ZW="ng-animate-queued",sk="ng-animate-disabled",T0e=[],JW={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},M0e={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},or="__ng_removed";class ak{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function N0e(n){return n??null}(i?e.value:e),i){const o=Op(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Lp="void",lk=new ak(Lp);class A0e{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,sr(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function Iwe(n,e){return new x(3302,!1)}();if(null==i||0==i.length)throw function Twe(n){return new x(3303,!1)}();if(!function O0e(n){return"start"==n||"done"==n}(i))throw function Mwe(n,e){return new x(3400,!1)}();const o=Bi(this._elementListeners,e,[]),s={name:t,phase:i,callback:r};o.push(s);const a=Bi(this._engine.statesByElement,e,new Map);return a.has(t)||(sr(e,Xv),sr(e,Xv+"-"+t),a.set(t,lk)),()=>{this._engine.afterFlush(()=>{const l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Awe(n){return new x(3401,!1)}();return t}trigger(e,t,i,r=!0){const o=this._getTrigger(t),s=new ck(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(sr(e,Xv),sr(e,Xv+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new ak(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=lk),c.value!==Lp&&l.value===c.value){if(!function L0e(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(l.params,c.params)){const g=[],_=o.matchStyles(l.value,l.params,g),v=o.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{Al(e,_),so(e,v)})}return}const h=Bi(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let f=o.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!r)return;f=o.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:s,isFallbackTransition:p}),p||(sr(e,ZW),s.onStart(()=>{Qu(e,ZW)})),s.onDone(()=>{let g=this.players.indexOf(s);g>=0&&this.players.splice(g,1);const _=this._engine.playersByElement.get(e);if(_){let v=_.indexOf(s);v>=0&&_.splice(v,1)}}),this.players.push(s),h.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,Zv,!0);i.forEach(r=>{if(r[or])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const o=this._engine.statesByElement.get(e),s=new Map;if(o){const a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){const u=this.trigger(e,c,Lp,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),i&&ta(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(o=>{const s=o.name;if(r.has(s))return;r.add(s);const l=this._triggers.get(s).fallbackTransition,c=i.get(s)||lk,u=new ak(Lp),d=new ck(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const o=e[or];(!o||o===JW)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){sr(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){const l=$A(o,i.triggerName,i.fromState.value,i.toState.value);l._data=e,HA(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const o=i.transition.ast.depCount,s=r.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class k0e{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new A0e(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}return t}trigger(e,t,i,r){if(cb(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!cb(t))return;const o=t[or];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){const s=this._fetchNamespace(e);s&&s.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),sr(e,sk)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Qu(e,sk))}removeNode(e,t,i,r){if(cb(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[or]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return cb(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Zv,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,YA,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ta(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[or];if(t&&t.setForRemoval){if(e[or]=JW,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(sk)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)sr(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?ta(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function kwe(n){return new x(3402,!1)}()}_flushAnimations(e,t){const i=new sb,r=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(j=>{u.add(j);const Q=this.driver.query(j,".ng-animate-queued",!0);for(let ie=0;ie<Q.length;ie++)u.add(Q[ie])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=nG(h,this.collectedEnterElements),p=new Map;let g=0;f.forEach((j,Q)=>{const ie=KA+g++;p.set(Q,ie),j.forEach(Ve=>sr(Ve,ie))});const _=[],v=new Set,E=new Set;for(let j=0;j<this.collectedLeaveElements.length;j++){const Q=this.collectedLeaveElements[j],ie=Q[or];ie&&ie.setForRemoval&&(_.push(Q),v.add(Q),ie.hasAnimation?this.driver.query(Q,".ng-star-inserted",!0).forEach(Ve=>v.add(Ve)):E.add(Q))}const b=new Map,N=nG(h,Array.from(v));N.forEach((j,Q)=>{const ie=Qv+g++;b.set(Q,ie),j.forEach(Ve=>sr(Ve,ie))}),e.push(()=>{f.forEach((j,Q)=>{const ie=p.get(Q);j.forEach(Ve=>Qu(Ve,ie))}),N.forEach((j,Q)=>{const ie=b.get(Q);j.forEach(Ve=>Qu(Ve,ie))}),_.forEach(j=>{this.processLeaveNode(j)})});const W=[],H=[];for(let j=this._namespaceList.length-1;j>=0;j--)this._namespaceList[j].drainQueuedTransitions(t).forEach(ie=>{const Ve=ie.player,_n=ie.element;if(W.push(Ve),this.collectedEnterElements.length){const qn=_n[or];if(qn&&qn.setForMove){if(qn.previousTriggersValues&&qn.previousTriggersValues.has(ie.triggerName)){const Ol=qn.previousTriggersValues.get(ie.triggerName),ar=this.statesByElement.get(ie.element);if(ar&&ar.has(ie.triggerName)){const Ib=ar.get(ie.triggerName);Ib.value=Ol,ar.set(ie.triggerName,Ib)}}return void Ve.destroy()}}const ao=!d||!this.driver.containsElement(d,_n),Hi=b.get(_n),ra=p.get(_n),St=this._buildInstruction(ie,i,ra,Hi,ao);if(St.errors&&St.errors.length)return void H.push(St);if(ao)return Ve.onStart(()=>Al(_n,St.fromStyles)),Ve.onDestroy(()=>so(_n,St.toStyles)),void r.push(Ve);if(ie.isFallbackTransition)return Ve.onStart(()=>Al(_n,St.fromStyles)),Ve.onDestroy(()=>so(_n,St.toStyles)),void r.push(Ve);const jG=[];St.timelines.forEach(qn=>{qn.stretchStartingKeyframe=!0,this.disabledNodes.has(qn.element)||jG.push(qn)}),St.timelines=jG,i.append(_n,St.timelines),s.push({instruction:St,player:Ve,element:_n}),St.queriedElements.forEach(qn=>Bi(a,qn,[]).push(Ve)),St.preStyleProps.forEach((qn,Ol)=>{if(qn.size){let ar=l.get(Ol);ar||l.set(Ol,ar=new Set),qn.forEach((Ib,Mk)=>ar.add(Mk))}}),St.postStyleProps.forEach((qn,Ol)=>{let ar=c.get(Ol);ar||c.set(Ol,ar=new Set),qn.forEach((Ib,Mk)=>ar.add(Mk))})});if(H.length){const j=[];H.forEach(Q=>{j.push(function Rwe(n,e){return new x(3505,!1)}())}),W.forEach(Q=>Q.destroy()),this.reportError(j)}const Le=new Map,Xt=new Map;s.forEach(j=>{const Q=j.element;i.has(Q)&&(Xt.set(Q,Q),this._beforeAnimationBuild(j.player.namespaceId,j.instruction,Le))}),r.forEach(j=>{const Q=j.element;this._getPreviousPlayers(Q,!1,j.namespaceId,j.triggerName,null).forEach(Ve=>{Bi(Le,Q,[]).push(Ve),Ve.destroy()})});const ji=_.filter(j=>rG(j,l,c)),Ir=new Map;tG(Ir,this.driver,E,c,Wo).forEach(j=>{rG(j,l,c)&&ji.push(j)});const Hp=new Map;f.forEach((j,Q)=>{tG(Hp,this.driver,new Set(j),l,DM)}),ji.forEach(j=>{const Q=Ir.get(j),ie=Hp.get(j);Ir.set(j,new Map([...Array.from(Q?.entries()??[]),...Array.from(ie?.entries()??[])]))});const Nl=[],BG=[],UG={};s.forEach(j=>{const{element:Q,player:ie,instruction:Ve}=j;if(i.has(Q)){if(u.has(Q))return ie.onDestroy(()=>so(Q,Ve.toStyles)),ie.disabled=!0,ie.overrideTotalTime(Ve.totalTime),void r.push(ie);let _n=UG;if(Xt.size>1){let Hi=Q;const ra=[];for(;Hi=Hi.parentNode;){const St=Xt.get(Hi);if(St){_n=St;break}ra.push(Hi)}ra.forEach(St=>Xt.set(St,_n))}const ao=this._buildAnimation(ie.namespaceId,Ve,Le,o,Hp,Ir);if(ie.setRealPlayer(ao),_n===UG)Nl.push(ie);else{const Hi=this.playersByElement.get(_n);Hi&&Hi.length&&(ie.parentPlayer=ta(Hi)),r.push(ie)}}else Al(Q,Ve.fromStyles),ie.onDestroy(()=>so(Q,Ve.toStyles)),BG.push(ie),u.has(Q)&&r.push(ie)}),BG.forEach(j=>{const Q=o.get(j.element);if(Q&&Q.length){const ie=ta(Q);j.setRealPlayer(ie)}}),r.forEach(j=>{j.parentPlayer?j.syncPlayerEvents(j.parentPlayer):j.destroy()});for(let j=0;j<_.length;j++){const Q=_[j],ie=Q[or];if(Qu(Q,Qv),ie&&ie.hasAnimation)continue;let Ve=[];if(a.size){let ao=a.get(Q);ao&&ao.length&&Ve.push(...ao);let Hi=this.driver.query(Q,YA,!0);for(let ra=0;ra<Hi.length;ra++){let St=a.get(Hi[ra]);St&&St.length&&Ve.push(...St)}}const _n=Ve.filter(ao=>!ao.destroyed);_n.length?P0e(this,Q,_n):this.processLeaveNode(Q)}return _.length=0,Nl.forEach(j=>{this.players.push(j),j.onDone(()=>{j.destroy();const Q=this.players.indexOf(j);this.players.splice(Q,1)}),j.play()}),Nl}elementContainsData(e,t){let i=!1;const r=t[or];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let s=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(s=a)}else{const a=this.playersByElement.get(e);if(a){const l=!o||o==Lp;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||s.push(c)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,t,i){const o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==o,d=Bi(i,c,[]);this._getPreviousPlayers(c,u,s,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}Al(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,s){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(p=>{const g=p.element;u.add(g);const _=g[or];if(_&&_.removedBeforeQueried)return new op(p.duration,p.delay);const v=g!==l,E=function F0e(n){const e=[];return iG(n,e),e}((i.get(g)||T0e).map(Le=>Le.getRealPlayer())).filter(Le=>!!Le.element&&Le.element===g),b=o.get(g),N=s.get(g),W=MW(0,this._normalizer,0,p.keyframes,b,N),H=this._buildPlayer(p,W,E);if(p.subTimeline&&r&&d.add(g),v){const Le=new ck(e,a,g);Le.setRealPlayer(H),c.push(Le)}return H});c.forEach(p=>{Bi(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function R0e(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>sr(p,VW));const f=ta(h);return f.onDestroy(()=>{u.forEach(p=>Qu(p,VW)),so(l,t.toStyles)}),d.forEach(p=>{Bi(r,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new op(e.duration,e.delay)}}class ck{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new op,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>HA(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Bi(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function cb(n){return n&&1===n.nodeType}function eG(n,e){const t=n.style.display;return n.style.display=e??"none",t}function tG(n,e,t,i,r){const o=[];t.forEach(l=>o.push(eG(l)));const s=[];i.forEach((l,c)=>{const u=new Map;l.forEach(d=>{const h=e.computeStyle(c,d,r);u.set(d,h),(!h||0==h.length)&&(c[or]=M0e,s.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>eG(l,o[a++])),s}function nG(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=1,r=new Set(e),o=new Map;function s(a){if(!a)return i;let l=o.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?i:s(c),o.set(a,l),l}return e.forEach(a=>{const l=s(a);l!==i&&t.get(l).push(a)}),t}function sr(n,e){n.classList?.add(e)}function Qu(n,e){n.classList?.remove(e)}function P0e(n,e,t){ta(t).onDone(()=>n.processLeaveNode(e))}function iG(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof J3?iG(i.players,e):e.push(i)}}function rG(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}class ub{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new k0e(e,t,i),this._timelineEngine=new E0e(e,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){const s=e+"-"+r;let a=this._triggerCache[s];if(!a){const l=[],c=[],u=JA(this._driver,o,l,c);if(l.length)throw function wwe(n,e){return new x(3404,!1)}();a=function v0e(n,e,t){return new b0e(n,e,t)}(r,u,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[o,s]=AW(i);this._timelineEngine.command(o,t,s,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if("@"==i.charAt(0)){const[s,a]=AW(i);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let B0e=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&so(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(so(this._element,this._initialStyles),this._endStyles&&(so(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Al(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Al(this._element,this._endStyles),this._endStyles=null),so(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function uk(n){let e=null;return n.forEach((t,i)=>{(function U0e(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class oG{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:$W(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class j0e{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return OW(e,t)}getParentElement(e){return WA(e)}query(e,t,i){return PW(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,o,s=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(l.easing=o);const c=new Map,u=s.filter(f=>f instanceof oG);(function qwe(n,e){return 0===n||0===e})(i,r)&&u.forEach(f=>{f.currentSnapshot.forEach((p,g)=>c.set(g,p))});let d=function jwe(n){return n.length?n[0]instanceof Map?n:n.map(e=>BW(e)):[]}(t).map(f=>na(f));d=function Wwe(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,$W(n,a)))}}return e}(e,d,c);const h=function V0e(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=uk(e[0]),e.length>1&&(i=uk(e[e.length-1]))):e instanceof Map&&(t=uk(e)),t||i?new B0e(n,t,i):null}(e,d);return new oG(e,d,l,h)}}let H0e=(()=>{class n extends Q3{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:cr.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?X3(t):t;return sG(this._renderer,null,i,"register",[r]),new z0e(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(D(xd),D(Ae))},n.\u0275prov=P({token:n,factory:n.\u0275fac}),n})();class z0e extends Wme{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new $0e(this._id,e,t||{},this._renderer)}}class $0e{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return sG(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function sG(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const aG="@.disabled";let q0e=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(o,s)=>{const a=s?.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(t,i){const o=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(o);return u||(u=new lG("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,u)),u}const s=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(s,a,t,u.name,u)};return i.data.animation.forEach(l),new W0e(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(D(xd),D(ub),D(pe))},n.\u0275prov=P({token:n,factory:n.\u0275fac}),n})();class lG{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?o=>t.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==aG?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class W0e extends lG{constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==aG?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function G0e(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function K0e(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let Y0e=(()=>{class n extends ub{constructor(t,i,r,o){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(D(Ae),D(GA),D(rk),D(Ec))},n.\u0275prov=P({token:n,factory:n.\u0275fac}),n})();const cG=[{provide:Q3,useClass:H0e},{provide:rk,useFactory:function Q0e(){return new m0e}},{provide:ub,useClass:Y0e},{provide:xd,useFactory:function X0e(n,e,t){return new q0e(n,e,t)},deps:[wg,ub,pe]}],dk=[{provide:GA,useFactory:()=>new j0e},{provide:Jm,useValue:"BrowserAnimations"},...cG],uG=[{provide:GA,useClass:FW},{provide:Jm,useValue:"NoopAnimations"},...cG];let Z0e=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?uG:dk}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({providers:dk,imports:[TL]}),n})(),vCe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({imports:[Qt,Sa,Qt]}),n})();const bCe=["addListener","removeListener"],wCe=["addEventListener","removeEventListener"],CCe=["on","off"];function hb(n,e,t,i){if(Be(t)&&(i=t,t=void 0),i)return hb(n,e,t).pipe(UC(i));const[r,o]=function DCe(n){return Be(n.addEventListener)&&Be(n.removeEventListener)}(n)?wCe.map(s=>a=>n[s](e,a,t)):function ECe(n){return Be(n.addListener)&&Be(n.removeListener)}(n)?bCe.map(fG(n,e)):function xCe(n){return Be(n.on)&&Be(n.off)}(n)?CCe.map(fG(n,e)):[];if(!r&&Ub(n))return an(s=>hb(s,e,t))(Wn(n));if(!r)throw new TypeError("Invalid event target");return new Je(s=>{const a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function fG(n,e){return t=>i=>n[t](e,i)}const Bp={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=Bp;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(o=>{t=void 0,n(o)});return new sn(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=Bp;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Bp;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},TCe=new class ICe extends CM{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class SCe extends wM{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Bp.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(Bp.cancelAnimationFrame(t),e._scheduled=void 0)}});let fk,MCe=1;const fb={};function pG(n){return n in fb&&(delete fb[n],!0)}const ACe={setImmediate(n){const e=MCe++;return fb[e]=!0,fk||(fk=Promise.resolve()),fk.then(()=>pG(e)&&n()),e},clearImmediate(n){pG(n)}},{setImmediate:kCe,clearImmediate:RCe}=ACe,pb={setImmediate(...n){const{delegate:e}=pb;return(e?.setImmediate||kCe)(...n)},clearImmediate(n){const{delegate:e}=pb;return(e?.clearImmediate||RCe)(n)},delegate:void 0},PCe=new class OCe extends CM{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class NCe extends wM{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=pb.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(pb.clearImmediate(t),e._scheduled=void 0)}});function pk(n,e=EM){return function FCe(n){return Pt((e,t)=>{let i=!1,r=null,o=null,s=!1;const a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const c=r;r=null,t.next(c)}s&&t.complete()},l=()=>{o=null,s&&t.complete()};e.subscribe(Ct(t,c=>{i=!0,r=c,o||Wn(n(c)).subscribe(o=Ct(t,a,l))},()=>{s=!0,(!i||!o||o.closed)&&t.complete()}))})}(()=>function VCe(n=0,e,t=fme){let i=-1;return null!=e&&(Xk(e)?t=e:i=e),new Je(r=>{let o=function LCe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}(n,e))}const BCe=["contentWrapper"],UCe=["*"],jCe=new k("VIRTUAL_SCROLL_STRATEGY");let mb=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new Qe,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Je(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(pk(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):z()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Xi(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,t)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=ku(i),o=t.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>hb(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(D(pe),D(tr),D(Ae,8))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mG=(()=>{class n{constructor(t,i,r,o){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=o,this._destroyed=new Qe,this._elementScrolled=new Je(s=>this.ngZone.runOutsideAngular(()=>hb(this.elementRef.nativeElement,"scroll").pipe(nr(this._destroyed)).subscribe(s)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=r?t.end:t.start),null==t.right&&(t.right=r?t.start:t.end),null!=t.bottom&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&0!=tp()?(null!=t.left&&(t.right=i.scrollWidth-i.clientWidth-t.left),2==tp()?t.left=t.right:1==tp()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const i=this.elementRef.nativeElement;R3()?i.scrollTo(t):(null!=t.top&&(i.scrollTop=t.top),null!=t.left&&(i.scrollLeft=t.left))}measureScrollOffset(t){const i="left",r="right",o=this.elementRef.nativeElement;if("top"==t)return o.scrollTop;if("bottom"==t)return o.scrollHeight-o.clientHeight-o.scrollTop;const s=this.dir&&"rtl"==this.dir.value;return"start"==t?t=s?r:i:"end"==t&&(t=s?i:r),s&&2==tp()?t==i?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:s&&1==tp()?t==i?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:t==i?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(y(Me),y(mb),y(pe),y(Ou,8))},n.\u0275dir=M({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),n})(),gb=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new Qe,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,o=r.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-o.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(pk(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(D(tr),D(pe),D(Ae,8))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gG=new k("VIRTUAL_SCROLLABLE");let $Ce=(()=>{class n extends mG{constructor(t,i,r,o){super(t,i,r,o)}measureViewportSize(t){const i=this.elementRef.nativeElement;return"horizontal"===t?i.clientWidth:i.clientHeight}}return n.\u0275fac=function(t){return new(t||n)(y(Me),y(mb),y(pe),y(Ou,8))},n.\u0275dir=M({type:n,features:[K]}),n})();const WCe=typeof requestAnimationFrame<"u"?TCe:PCe;let GCe=(()=>{class n extends $Ce{get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(t){this._appendOnly=Er(t)}constructor(t,i,r,o,s,a,l,c){super(t,a,r,s),this.elementRef=t,this._changeDetectorRef=i,this._scrollStrategy=o,this.scrollable=c,this._platform=ye(tr),this._detachedSubject=new Qe,this._renderedRangeSubject=new Qe,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new Je(u=>this._scrollStrategy.scrolledIndexChange.subscribe(d=>Promise.resolve().then(()=>this.ngZone.run(()=>u.next(d))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=sn.EMPTY,this._viewportChanges=l.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe($C(null),pk(0,WCe)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(t){this.ngZone.runOutsideAngular(()=>{this._forOf=t,this._forOf.dataStream.pipe(nr(this._detachedSubject)).subscribe(i=>{const r=i.length;r!==this._dataLength&&(this._dataLength=r,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(t){return this.getElementRef().nativeElement.getBoundingClientRect()[t]}setTotalContentSize(t){this._totalContentSize!==t&&(this._totalContentSize=t,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(t){(function qCe(n,e){return n.start==e.start&&n.end==e.end})(this._renderedRange,t)||(this.appendOnly&&(t={start:0,end:Math.max(this._renderedRange.end,t.end)}),this._renderedRangeSubject.next(this._renderedRange=t),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(t,i="to-start"){t=this.appendOnly&&"to-start"===i?0:t;const o="horizontal"==this.orientation,s=o?"X":"Y";let l=`translate${s}(${Number((o&&this.dir&&"rtl"==this.dir.value?-1:1)*t)}px)`;this._renderedContentOffset=t,"to-end"===i&&(l+=` translate${s}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=l&&(this._renderedContentTransform=l,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(t,i="auto"){const r={behavior:i};"horizontal"===this.orientation?r.start=t:r.top=t,this.scrollable.scrollTo(r)}scrollToIndex(t,i="auto"){this._scrollStrategy.scrollToIndex(t,i)}measureScrollOffset(t){let i;return i=this.scrollable==this?r=>super.measureScrollOffset(r):r=>this.scrollable.measureScrollOffset(r),Math.max(0,i(t??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(t){let i;const r="left",o="right",s="rtl"==this.dir?.value;i="start"==t?s?o:r:"end"==t?s?r:o:t||("horizontal"===this.orientation?"left":"top");const a=this.scrollable.measureBoundingClientRectWithScrollOffset(i);return this.elementRef.nativeElement.getBoundingClientRect()[i]-a}measureRenderedContentSize(){const t=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?t.offsetWidth:t.offsetHeight}measureRangeSize(t){return this._forOf?this._forOf.measureRangeSize(t,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(t){t&&this._runAfterChangeDetection.push(t),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const t=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const i of t)i()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return n.\u0275fac=function(t){return new(t||n)(y(Me),y(Ea),y(pe),y(jCe,8),y(Ou,8),y(mb),y(gb),y(gG,8))},n.\u0275cmp=st({type:n,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(t,i){if(1&t&&Zn(BCe,7),2&t){let r;$e(r=qe())&&(i._contentWrapper=r.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(t,i){2&t&&wn("cdk-virtual-scroll-orientation-horizontal","horizontal"===i.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==i.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[de([{provide:mG,useFactory:(e,t)=>e||t,deps:[[new Rr,new ym(gG)],n]}]),K,B0],ngContentSelectors:UCe,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(t,i){1&t&&(Lr(),te(0,"div",0,1),_t(2),re(),bn(3,"div",2)),2&t&&(xe(3),is("width",i._totalContentWidth)("height",i._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),n})(),_b=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({}),n})(),mk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({imports:[ip,_b,GCe,ip,_b]}),n})(),lEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({imports:[mk]}),n})(),DEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({imports:[Qt,lEe,Qt]}),n})(),MEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({imports:[Sa,Qt]}),n})(),Sk=(()=>{class n{constructor(){this.changes=new Qe}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kEe={provide:Sk,deps:[[new Rr,new ma,Sk]],useFactory:function AEe(n){return n||new Sk}};let REe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({providers:[kEe],imports:[Sa,Qt]}),n})(),PEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({imports:[Qt,qme,Qt]}),n})();class Ik{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class FEe extends Ik{constructor(e,t,i,r,o){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}}class LEe extends Ik{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class VEe extends Ik{constructor(e){super(),this.element=e instanceof Me?e.nativeElement:e}}class BEe{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof FEe?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof LEe?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof VEe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class UEe extends BEe{constructor(e,t,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{const a=s.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=o}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||hi.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let IG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({}),n})();const TG=R3();class jEe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Yt(-this._previousScrollPosition.left),e.style.top=Yt(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),TG&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),TG&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class HEe{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Xi(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class MG{enable(){}disable(){}attach(){}}function Tk(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function AG(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class zEe{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();Tk(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let $Ee=(()=>{class n{constructor(t,i,r,o){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new MG,this.close=s=>new HEe(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new jEe(this._viewportRuler,this._document),this.reposition=s=>new zEe(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=o}}return n.\u0275fac=function(t){return new(t||n)(D(mb),D(gb),D(pe),D(Ae))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class qEe{constructor(e){if(this.scrollStrategy=new MG,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class WEe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let kG=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(D(Ae))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),GEe=(()=>{class n extends kG{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){const a=o[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(D(Ae),D(pe,8))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),KEe=(()=>{class n extends kG{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=vM(o)},this._clickListener=o=>{const s=vM(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(s)||u.overlayElement.contains(a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(o)):d.next(o)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(D(Ae),D(tr),D(pe,8))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),RG=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||bM()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const i=this._document.createElement("div");i.classList.add(t),bM()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(D(Ae),D(tr))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class YEe{constructor(e,t,i,r,o,s,a,l,c,u=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new Qe,this._attachments=new Qe,this._detachments=new Qe,this._locationChanges=sn.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new Qe,this._outsidePointerEvents=new Qe,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Hr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Yt(this._config.width),e.height=Yt(this._config.height),e.minWidth=Yt(this._config.minWidth),e.minHeight=Yt(this._config.minHeight),e.maxWidth=Yt(this._config.maxWidth),e.maxHeight=Yt(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=ov(t||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(nr(Hb(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const NG="cdk-overlay-connected-position-bounding-box",QEe=/([A-Za-z%]+)$/;class XEe{get positions(){return this._preferredPositions}constructor(e,t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Qe,this._resizeSubscription=sn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(NG),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,i)?o.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!s||s.overlayFit.visibleArea<u.visibleArea)&&(s={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(o.length){let a=null,l=-1;for(const c of o){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Rl(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(NG),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,o;if("center"==i.originX)r=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?s:a}return t.left<0&&(r-=t.left),o="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(o-=t.top),{x:r,y:o}}_getOverlayPoint(e,t,i){let r,o;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,t,i,r){const o=PG(t);let{x:s,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(s+=l),c&&(a+=c);let h=0-a,f=a+o.height-i.height,p=this._subtractOverflows(o.width,0-s,s+o.width-i.width),g=this._subtractOverflows(o.height,h,f),_=p*g;return{visibleArea:_,isCompletelyWithinViewport:o.width*o.height===_,fitsInViewportVertically:g===o.height,fitsInViewportHorizontally:p==o.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,o=i.right-t.x,s=OG(this._overlayRef.getConfig().minHeight),a=OG(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=s&&s<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=o)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=PG(t),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),l=Math.max(o.top-i.top-e.y,0),c=Math.max(o.left-i.left-e.x,0);let u=0,d=0;return u=r.width<=o.width?c||-s:e.x<this._viewportMargin?o.left-i.left-e.x:0,d=r.height<=o.height?l||-a:e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new WEe(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let o,s,a,u,d,h;if("top"===t.overlayY)s=e.y,o=i.height-s+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,o=i.height-a+this._viewportMargin;else{const f=Math.min(i.bottom-e.y+i.top,e.y),p=this._lastBoundingBoxSize.height;o=2*f,s=e.y-f,o>p&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-p/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)h=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)d=e.x,u=i.right-e.x;else{const f=Math.min(i.right-e.x+i.left,e.x),p=this._lastBoundingBoxSize.width;u=2*f,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:s,left:d,bottom:a,right:h,width:u,height:o}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=Yt(i.height),r.top=Yt(i.top),r.bottom=Yt(i.bottom),r.width=Yt(i.width),r.left=Yt(i.left),r.right=Yt(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=Yt(o)),s&&(r.maxWidth=Yt(s))}this._lastBoundingBoxSize=i,Rl(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Rl(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Rl(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();Rl(i,this._getExactOverlayY(t,e,u)),Rl(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=Yt(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=Yt(s.maxWidth):o&&(i.maxWidth="")),Rl(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=Yt(o.y),r}_getExactOverlayX(e,t,i){let s,r={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),s=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===s?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=Yt(o.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:AG(e,i),isOriginOutsideView:Tk(e,i),isOverlayClipped:AG(t,i),isOverlayOutsideView:Tk(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&ov(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Me)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Rl(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function OG(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(QEe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function PG(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const FG="cdk-global-overlay-wrapper";class ZEe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(FG),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),c=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,d=this._xOffset,h="rtl"===this._overlayRef.getConfig().direction;let f="",p="",g="";l?g="flex-start":"center"===u?(g="center",h?p=d:f=d):h?"left"===u||"end"===u?(g="flex-end",f=d):("right"===u||"start"===u)&&(g="flex-start",p=d):"left"===u||"start"===u?(g="flex-start",f=d):("right"===u||"end"===u)&&(g="flex-end",p=d),e.position=this._cssPosition,e.marginLeft=l?"0":f,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":p,t.justifyContent=g,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(FG),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let JEe=(()=>{class n{constructor(t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o}global(){return new ZEe}flexibleConnectedTo(t){return new XEe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(D(gb),D(Ae),D(tr),D(RG))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),exe=0,LG=(()=>{class n{constructor(t,i,r,o,s,a,l,c,u,d,h,f){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=s,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=h,this._animationsModuleType=f}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),s=new qEe(t);return s.direction=s.direction||this._directionality.value,new YEe(o,i,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+exe++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Ec)),new UEe(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(D($Ee),D(RG),D(ic),D(JEe),D(GEe),D(hi),D(pe),D(Ae),D(Ou),D(rg),D(KEe),D(Jm,8))},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ixe={provide:new k("cdk-connected-overlay-scroll-strategy"),deps:[LG],useFactory:function nxe(n){return()=>n.scrollStrategies.reposition()}};let rxe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({providers:[LG,ixe],imports:[ip,IG,mk,mk]}),n})(),axe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({imports:[rxe,IG,Sa,PEe,Qt,Qt]}),n})(),uxe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n}),n.\u0275inj=Pe({imports:[Sa,Qt,_b,_b,Qt]}),n})(),dxe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ue({type:n,bootstrap:[Jbe]}),n.\u0275inj=Pe({providers:[iL],imports:[TL,w_e,Z0e,Wie,Gie,Vge,__e,vCe,IM,DEe,MEe,REe,axe,uxe]}),n})();aee().bootstrapModule(dxe).catch(n=>console.error(n))}},Tb=>{Tb(Tb.s=138)}]);